bplist00“ë_WebSubresources_WebMainResourceØ#'+27<AFKPUZ_dinsx}Çáå‘	
_WebResourceData_WebResourceMIMEType_WebResourceResponse^WebResourceURLO&™/* Generic styles */

body {
	font-family: verdana, sans-serif;
	font-size: 12px;
	padding: 0px;
	margin: 0px;
	background: #FFF;
	font-weight: 400;
	line-height: 1.429;
	color: rgba(0, 0, 0, .87);
	visibility: hidden;
	-moz-user-select: -moz-none;
	-khtml-user-select: none;
	-webkit-user-select: none;
	-ms-user-select: none;
	user-select: none;
}

input[type=button] {
	font-family: verdana, sans-serif;
	-webkit-appearance: button;
	cursor: pointer;
	font-weight: 500;
	font-size: 14px;
	line-height: 18px;
	text-transform: uppercase;
	color: rgba(0, 0, 0, .87);
	background-color: #FFF;
	display: inline-block;
	height: 36px;
	padding: 0 26px;
	margin-top: 6px;
	margin-bottom: 6px;
	border: none;
	border-radius: 2px;
	cursor: pointer;
	-ms-touch-action: manipulation;
	touch-action: manipulation;
	background-image: none;
	text-align: center;
	line-height: 36px;
	vertical-align: middle;
	white-space: nowrap;
	-webkit-user-select: none;
	-moz-user-select: none;
	-ms-user-select: none;
	user-select: none;
	font-size: 14px;
	letter-spacing: .03em;
	position: relative;
	overflow: hidden;
}

input[type=text] {
	font-family: verdana, sans-serif;
	height: 32px;
	display: block;
	background-color: transparent;
	color: rgba(0, 0, 0, .87);
	border: none;
	border-bottom-color: currentcolor;
	border-bottom-style: none;
	border-bottom-width: medium;
	border-bottom: 1px solid rgba(0, 0, 0, .26);
	outline: 0;
	width: 100%;
	font-size: 16px;
	padding: 0;
	box-shadow: none;
	border-radius: 0;
	background-image: none;
}

textarea {
	min-width: 500px;
	font-family: verdana, sans-serif;
	min-height: 64px;
	display: block;
	background-color: transparent;
	color: rgba(0, 0, 0, .87);
	border: none;
	border-bottom-color: currentcolor;
	border-bottom-style: none;
	border-bottom-width: medium;
	border-bottom: 1px solid rgba(0, 0, 0, .26);
	outline: 0;
	width: 100%;
	font-size: 16px;
	padding: 0;
	box-shadow: none;
	border-radius: 0;
	background-image: none;
}

select {
	font-family: verdana, sans-serif;
	display: block;
	height: 32px;
	width: 100%;
	appearance: none;
	-webkit-appearance: none;
	-moz-appearance: none;
	outline: 0;
	border: none;
	border-bottom-color: currentcolor;
	border-bottom-style: none;
	border-bottom-width: medium;
	border-bottom: 1px solid rgba(0, 0, 0, .26);
	border-radius: 0;
	box-shadow: none;
	background-color: transparent;
	background-image: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iNiIgd2lkdGg9IjEwIj48cG9seWdvbiBwb2ludHM9IjAsMCAxMCwwIDUsNiIgc3R5bGU9ImZpbGw6cmdiYSgwLDAsMCwuMjQpOyIvPjwvc3ZnPg==);
	background-repeat: no-repeat;
	background-position: right center;
	cursor: pointer;
	color: rgba(0, 0, 0, .87);
	font-size: 16px;
	padding: 0 25px 0 0;
}

textarea:focus, select:focus, input[type=text]:focus {
	border-color: #2196F3;
	border-width: 2px;
}

select optgroup {
	color: rgba(0, 0, 0, .54);
	font-size: .9em;
	background: white !important;
	font-style: normal;
}

legend {
	text-align: left;
	display: block;
	width: 100%;
	padding: 0;
	margin-bottom: 10px;
	font-size: 21px;
	color: rgba(0, 0, 0, .87);
	line-height: inherit;
}

fieldset {
	border: none;
	padding: 0px;
	margin: 0px 0px 10px 0px;
}

label {
	opacity: 0.7;
}

label, input, select {
	vertical-align: middle;
}

/* Area */

#area {
	position: relative;
	background: transparent url(../images/back_dim.png);
	width: 3000px;
	height: 3000px;
	opacity: 0.7;
}

#rubberband {
	position: absolute;
	border: .2px solid #FF4081;
	background: rgba(255, 64, 129, 0.5);
	opacity: 0.5;
	visibility: hidden;
}

#background {
	position: absolute;
	background-color: #000;
	opacity: 0.5;
	visibility: hidden;
}

/* Main menu */

#controls {
	position: absolute;
	left: 0px;
	top: 0px;
}

#bar {
	position: fixed;
	transition: all .2s ease-in-out;
	right: 4px;
	top: 0px;
	width: 190px;
	margin: 0px 0px 20px 0px;
	padding: 0px;
	background-color: rgb(255, 255, 255);
	text-align: center;
	border-radius: 0px;
	box-shadow: rgba(0, 0, 0, 0.16) 0px 3px 6px 0px, rgba(0, 0, 0, 0.23) 0px 3px 6px 0px;
	box-sizing: border-box;
	max-height: 600px;
}

#bar input {
	transition: all .2s ease-in-out;
	border-radius: 2px;
	width: 100%;
	height: auto;
	margin: auto auto 3px auto;
	padding: 2px;
	line-height: 1.3;
	opacity: .7;
	text-transform: none;
}

#bar input:hover {
	background-color: #de2665;
	color: #fff;
}

#bar input:disabled {
	cursor: not-allowed;
	pointer-events: none;
	opacity: .4;
	box-shadow: none;
}

#bar input.small {
	width: 45%;
	display: inline;
}

#bar hr {
	margin: 8px;
	background-color: #ddd;
	height: 1px;
	border: none;
}

#toggle {
	margin-bottom: 5px;
	cursor: pointer;
	transition: all .2s ease-in-out;
	border-radius: 2px;
	background-position: center;
	background-repeat: no-repeat;
	height: 22px;
	opacity: .7;
}

#toggle:hover {
	background-color: #de2665;
}

#toggle.on {
	background-image: url(../images/up_2_black.png);
}

#toggle.on:hover {
	background-image: url(../images/up_2_white.png);
}

#toggle.off {
	background-image: url(../images/down_2_black.png);
}

#toggle.off:hover {
	background-image: url(../images/down_2_white.png);
}

/* Minimap */

#minimap {
	position: fixed;
	width: 100px;
	height: 100px;
	right: 5px;
	bottom: 5px;
	background-color: #fff;
	opacity: 0.9;
	overflow: hidden;
	box-shadow: 0 1px 3px rgba(0, 0, 0, .12), 0 1px 2px rgba(0, 0, 0, .24);
}

.mini {
	position: absolute;
	background-color: #ff8fb5;
	font-size: 1px;
	line-height: 1px;
}

.mini_selected {
	background-color: #de2665;
}

.port {
	position: absolute;
	transition: border 0.2s ease-in-out;
	border: 2px solid rgba(0, 0, 0, .3);
}

#minimap:hover .port {
	border: 2px solid rgba(0, 0, 0, .8);
}

/* Tables */

.table {
	position: absolute;
	padding: 0 6px 6px 6px;
	cursor: pointer;
	margin-bottom: 20px;
	border-radius: 0;
	background-color: #FFF;
	box-shadow: 0 2px 2px 0 rgba(0, 0, 0, .16), 0 0 2px 0 rgba(0, 0, 0, .12);
}

.table table {
	border-collapse: collapse;
}

.table.selected {
	border: 1px solid #FF4081;
}

.table thead .title {
	text-align: center;
	padding: 6px 30px;
}

.table tbody {
	border-right: 4px solid transparent;
	background: none !important;
}

.table tbody td {
	padding: 3px;
	position: relative;
}

.table tbody.expanded {
	border-right: 6px solid rgba(0, 0, 0, .12);
	background-color: whitesmoke !important;
}

.table tbody .selected {
	font-weight: bold;
	color: #f00;
	display: inline-block;
}

.table tbody .title {
	display: inline-block;
}

.table thead td[title]:not([title=""]):after {
	content: '';
	position: absolute;
	top: 0;
	right: 0;
	border-color: rgb(125, 178, 221);
	border-style: solid;
	border-width: 5px;
	border-bottom-color: transparent;
	border-left-color: transparent;
}

.table tbody[title]:not(.expanded):not([title=""]) td:last-child:after {
	content: '';
	position: relative;
	border-color: rgb(125, 178, 221);
	border-style: solid;
	border-width: 6px;
	border-bottom-color: transparent;
	border-left-color: transparent;
	border-top-color: transparent;
	float: right;
}

.primary {
	font-weight: bold;
}

.key {
	font-style: italic;
}

.primary.key {
	font-style: normal;
}

.typehint {
	font-size: 80%;
	color: gray;
}

.comment {
	font-size: 80%;
	font-weight: normal;
	margin-right: 0.5em;
}

#commentbtn {
	box-shadow: 0 0 2px rgba(0, 0, 0, .12), 0 2px 2px rgba(0, 0, 0, .2);
}

.adding {
	cursor: crosshair;
}

.relation {
	overflow: hidden;
}

#tablename, #tablecomment {
	margin-bottom: 10px;
}

/* Window */

#window {
	position: absolute;
	visibility: hidden;
	background-color: #fff;
	box-shadow: 0 10px 20px rgba(0, 0, 0, .19), 0 6px 6px rgba(0, 0, 0, .23);
	padding: 15px;
}

#windowtitle {
	font-size: x-large;
	margin: 15px 15px 24px 15px;
	padding-left: 15px;
	padding-right: 15px;
}

#windowcontent {
	padding: 1em;
}

#windowok {
	color: #FF4081;
}

#windowok, #windowcancel {
	float: right;
}

#windowok:hover, #windowcancel:hover {
	background-color: #f2f2f2;
}

#throbber {
	position: absolute;
	top: 2px;
	right: 3px;
}

/* Save / Load */

#io {
	min-width: 860px;
}

#io hr {
	visibility: hidden;
}

#io table {
	width: 100%;
}

#io input[type=button] {
	box-shadow: 0 0 2px rgba(0, 0, 0, .12), 0 2px 2px rgba(0, 0, 0, .2);
}

#io input[type=button]:active {
	background-color: #f2f2f2;
	transition: all .2s ease-out;
}

#io #clientsql {
	color: #FFF;
	background-color: #FF4081;
}

#io #clientsql:hover {
	transition: all .2s ease-in-out;
	box-shadow: 0 0 2px rgba(0, 0, 0, .12), 0 2px 2px rgba(0, 0, 0, .2);
	background-color: #ff5a92;
}

#textarea {
	width: 100%;
	height: 200px;
	font-size: small;
	font-family: "Lucida Console", Monaco, monospace;
}

/* Options */

#opts {
	width: 700px;
}

#opts td {
	padding-top: 15px;
	margin-bottom: 20px;
}

#opts #optionsnotice {
	opacity: 0.7;
}

#opts hr {
	background-color: #ddd;
	height: 1px;
	border: none;
	margin: 25px 0px 25px 0px;
}

.small {
	font-size: 85%;
}

/* Keys */

#keys {
	white-space: nowrap;
	padding: 0px 10px;
	text-align: center;
}

#keys hr {
	visibility: hidden;
}

#keys table {
	width: 100%;
}

#keys table td {
	width: 42%;
}

#keys table td+td {
	width: 16%;
}

#keys table td+td+td {
	width: 42%;
}

#keyadd {
	margin: 15px;
	color: #FFF;
	background-color: #2196F3;
}

#keyadd:hover {
	transition: all .2s ease-in-out;
	background-color: #39a1f4;
	box-shadow: 0 0 2px rgba(0, 0, 0, .12), 0 2px 2px rgba(0, 0, 0, .2);
}

#keyremove {
	margin: 15px;
	color: #FFF;
	background-color: #F44336;
}

#keyremove:hover {
	transition: all .2s ease-in-out;
	background-color: #f55a4e;
	box-shadow: 0 0 2px rgba(0, 0, 0, .12), 0 2px 2px rgba(0, 0, 0, .2);
}

#keyleft, #keyright {
	height: auto;
	line-height: normal;
	box-shadow: none;
	padding: 3px;
	box-shadow: 0 0 2px rgba(0, 0, 0, .12), 0 2px 2px rgba(0, 0, 0, .2);
}

#keyfields, #keyavail {
	height: auto;
	background-image: none;
	font-size: small;
	border: 1px solid rgba(0, 0, 0, .26);
	padding: 0px;
}Xtext/cssOíbplist00‘
X$versionY$archiverT$topX$objects Ü†_NSKeyedArchiver—	_WebResourceResponseÄØ''-.4567YZ[\]^_`abcdefghijklmnopqrstuyU$null› !"#$%&___nsurlrequest_proto_prop_obj_6___nsurlrequest_proto_prop_obj_3R$2___nsurlrequest_proto_prop_obj_0R$3___nsurlrequest_proto_prop_obj_4V$class___nsurlrequest_proto_prop_obj_1R$4R$0___nsurlrequest_proto_prop_obj_5___nsurlrequest_proto_prop_obj_2R$1ÄÄÄ	ÄÄ&ÄÄ Ä”()$+,WNS.base[NS.relativeÄ ÄÄ_>https://ondras.zarovi.cz/sql/demo/styles/material-inspired.css“/012Z$classnameX$classesUNSURL¢13XNSObject#AƒS7x•°^ »”89:IXWNS.keysZNS.objectsÆ;<=>?@ABCDEFGHÄ	Ä
ÄÄÄÄÄÄÄÄÄÄÄÄÆKLMNOPQRSTUVWÄÄÄÄÄÄÄÄÄÄ Ä!Ä"Ä#Ä$Ä%\Content-TypeZKeep-Alive]Accept-Ranges]Last-Modified_Content-EncodingVServerTDate^Content-LengthZConnectionX__hhaa___X-Content-Type-OptionsTEtag_X-Frame-OptionsTVaryXtext/css_timeout=5, max=98Ubytes_Thu, 05 Sep 2019 08:49:12 GMTTgzipVApache_Thu, 11 Aug 2022 17:02:55 GMTT2558ZKeep-Alive_ƒ

YnBsaXN0MDDdAQIDBAUGBwgJCgsMDQ4QEhQWGBocHiAiJCZcQ29udGVudC1UeXBlXxAPWC1GcmFtZS1PcHRpb25zWktlZXAtQWxpdmVUVmFyeV8QEENvbnRlbnQtRW5jb2RpbmdWU2VydmVyVERhdGVeQ29udGVudC1MZW5ndGhaQ29ubmVjdGlvbl8QFlgtQ29udGVudC1UeXBlLU9wdGlvbnNURXRhZ11BY2NlcHQtUmFuZ2VzXUxhc3QtTW9kaWZpZWShD1h0ZXh0L2Nzc6ERWnNhbWVvcmlnaW6hE18QEXRpbWVvdXQ9NSwgbWF4PTk4oRVfEA9BY2NlcHQtRW5jb2RpbmehF1RnemlwoRlWQXBhY2hloRtfEB1UaHUsIDExIEF1ZyAyMDIyIDE3OjAyOjU1IEdNVKEdVDI1NTihH1pLZWVwLUFsaXZloSFXbm9zbmlmZqEjXxAZIjI2YWEtNTkxY2E2NTUxNDU4Yy1nemlwIqElVWJ5dGVzoSdfEB1UaHUsIDA1IFNlcCAyMDE5IDA4OjQ5OjEyIEdNVAAIACMAMABCAE0AUgBlAGwAcQCAAIsApACpALcAxQDHANAA0gDdAN8A8wD1AQcBCQEOARABFwEZATkBOwFAAUIBTQFPAVcBWQF1AXcBfQF/AAAAAAAAAgEAAAAAAAAAKAAAAAAAAAAAAAAAAAAAAZ8=Wnosniff_"26aa-591ca6551458c-gzip"Zsameorigin_Accept-Encoding“/0vw_NSMutableDictionary£vx3\NSDictionary“/0z{_NSHTTPURLResponse£|}3_NSHTTPURLResponse]NSURLResponse    $ ) 2 7 I L b d é î Ø — Û ˆ=Dfilé∞≥µ∑πªΩø¡√ƒ∆» Ã”€ÁÈÎÌ.3>GMPYbdfmuÄèëìïóôõùü°£•ß©´∫ºæ¿¬ƒ∆» ÃŒ–“‘÷ÿÂ˛&+:ENgl~Éå†¶∆À“Ú˜ “Ó˘&*7<PTh             ~              v_>https://ondras.zarovi.cz/sql/demo/styles/material-inspired.css‘OÇ<svg xmlns="http://www.w3.org/2000/svg" height="6" width="10"><polygon points="0,0 10,0 5,6" style="fill:rgba(0,0,0,.24);"/></svg>]image/svg+xmlOêbplist00‘
X$versionY$archiverT$topX$objects Ü†_NSKeyedArchiver—	_WebResourceResponseÄ´#)*01234U$null€ !"V$class___nsurlrequest_proto_prop_obj_6R$1___nsurlrequest_proto_prop_obj_4___nsurlrequest_proto_prop_obj_3___nsurlrequest_proto_prop_obj_2___nsurlrequest_proto_prop_obj_1R$2___nsurlrequest_proto_prop_obj_0___nsurlrequest_proto_prop_obj_5R$0Ä
Ä	 Ä ÄÄÄÄÄ”$%'(WNS.base[NS.relativeÄ ÄÄ_ data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iNiIgd2lkdGg9IjEwIj48cG9seWdvbiBwb2ludHM9IjAsMCAxMCwwIDUsNiIgc3R5bGU9ImZpbGw6cmdiYSgwLDAsMCwuMjQpOyIvPjwvc3ZnPg==“+,-.Z$classnameX$classesUNSURL¢-/XNSObject#AƒS7x¶]image/svg+xmlÇ#Ôˇˇˇˇˇˇ“+,56]NSURLResponse¢7/]NSURLResponse    $ ) 2 7 I L b d p v ç î ∂ π € ˝ADfàãçèëìïóôõùü°®∞ºæ¿¬èîü®Æ±∫√—”‹·ÔÚ             8               _ data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iNiIgd2lkdGg9IjEwIj48cG9seWdvbiBwb2ludHM9IjAsMCAxMCwwIDUsNiIgc3R5bGU9ImZpbGw6cmdiYSgwLDAsMCwuMjQpOyIvPjwvc3ZnPg==‘OaâPNG

   IHDR   d   d   ˇÄ   	pHYs     öú   tIME‡	À∞q÷   IDATx⁄Ì€±!ÜaŒ8’ç@Õl»JLA¡N†·
=üØΩÊÚDˇº1Òh≠[€3ÑPk}˜xŒc¸˝”ﬁ{Œy∑∑z¯º¨,X∞`¡2Xv¥÷J)ªΩ÷#•¥c¡ﬂR√üüé16|+_C7,X∞,Ø‡ºõe∞`¡Çñ)xØ‡›,X∞,X∞ºÇWæÜn,X∞`,Xﬂ+¯Û<A¨¸ÜˇıOV7ñ¡Ç¨+xø¡_(xø¡+x7,X∞,Ø‡ºõe∞`¡Çñ)xØ‡›,X∞,X∞ºÇW
ﬁÕÇ,ÉÎ÷Ω -
BÑ2«z    IENDÆB`ÇYimage/pngO‘bplist00‘
X$versionY$archiverT$topX$objects Ü†_NSKeyedArchiver—	_WebResourceResponseÄØ#'-.4567UVWXYZ[\]^_`abcdefghijklmqU$null› !"#$%&___nsurlrequest_proto_prop_obj_6___nsurlrequest_proto_prop_obj_3R$2___nsurlrequest_proto_prop_obj_0R$3___nsurlrequest_proto_prop_obj_4V$class___nsurlrequest_proto_prop_obj_1R$4R$0___nsurlrequest_proto_prop_obj_5___nsurlrequest_proto_prop_obj_2R$1ÄÄÄ	ÄÄ"ÄÄ Ä”()$+,WNS.base[NS.relativeÄ ÄÄ_5https://ondras.zarovi.cz/sql/demo/images/back_dim.png“/012Z$classnameX$classesUNSURL¢13XNSObject#AƒS7x¶ »”89:GTWNS.keysZNS.objects¨;<=>?@ABCDEFÄ	Ä
ÄÄÄÄÄÄÄÄÄÄ¨IJKLMNOPQRSÄÄÄÄÄÄÄÄÄÄÄÄ Ä!\Content-Type_X-Frame-OptionsZKeep-AliveVServerTDate^Content-LengthZConnectionX__hhaa___X-Content-Type-OptionsTEtag]Accept-Ranges]Last-ModifiedYimage/pngZsameorigin_timeout=5, max=92VApache_Thu, 11 Aug 2022 17:02:56 GMTS353ZKeep-Alive_d

YnBsaXN0MDDbAQIDBAUGBwgJCgsMDhASFBYYGhweIF8QFlgtQ29udGVudC1UeXBlLU9wdGlvbnNcQ29udGVudC1UeXBlWkNvbm5lY3Rpb25dTGFzdC1Nb2RpZmllZFZTZXJ2ZXJdQWNjZXB0LVJhbmdlc18QD1gtRnJhbWUtT3B0aW9uc1REYXRlXkNvbnRlbnQtTGVuZ3RoWktlZXAtQWxpdmVURXRhZ6ENV25vc25pZmahD1lpbWFnZS9wbmehEVpLZWVwLUFsaXZloRNfEB1UaHUsIDA1IFNlcCAyMDE5IDA4OjQ5OjEyIEdNVKEVVkFwYWNoZaEXVWJ5dGVzoRlac2FtZW9yaWdpbqEbXxAdVGh1LCAxMSBBdWcgMjAyMiAxNzowMjo1NiBHTVShHVMzNTOhH18QEXRpbWVvdXQ9NSwgbWF4PTkyoSFfEBMiMTYxLTU5MWNhNjU1MTI2NGMiAAgAHwA4AEUAUABeAGUAcwCFAIoAmQCkAKkAqwCzALUAvwDBAMwAzgDuAPAA9wD5AP8BAQEMAQ4BLgEwATQBNgFKAUwAAAAAAAACAQAAAAAAAAAiAAAAAAAAAAAAAAAAAAABYg==Wnosniff_"161-591ca6551264c"Ubytes_Thu, 05 Sep 2019 08:49:12 GMT“/0no_NSMutableDictionary£np3\NSDictionary“/0rs_NSHTTPURLResponse£tu3_NSHTTPURLResponse]NSURLResponse    $ ) 2 7 I L b d ä ê ´ Õ Ô Ú9@behä¨Ø±≥µ∑πªΩø¿¬ƒ∆»œ◊„ÂÁÈ!&1:@CLUWY`hsÄÇÑÜàäåéêíîñò•ß©´≠Ø±≥µ∑πªΩøÃﬁÈı16DR\g{Ç¢¶±!7=]bx|âé¢¶∫             v              »_5https://ondras.zarovi.cz/sql/demo/images/back_dim.png‘OsâPNG

   IHDR         ¸«F‹   :IDATxca†	*˘ÑÑîÃdòRÜO…tF ƒ©Ã(1® † Ï±)ÛÜ(Å(ÚF  £‹®˜Õ›c    IENDÆB`ÇO—bplist00‘
X$versionY$archiverT$topX$objects Ü†_NSKeyedArchiver—	_WebResourceResponseÄØ#'-.4567UVWXYZ[\]^_`abcdefghijklmqU$null› !"#$%&___nsurlrequest_proto_prop_obj_6___nsurlrequest_proto_prop_obj_3R$2___nsurlrequest_proto_prop_obj_0R$3___nsurlrequest_proto_prop_obj_4V$class___nsurlrequest_proto_prop_obj_1R$4R$0___nsurlrequest_proto_prop_obj_5___nsurlrequest_proto_prop_obj_2R$1ÄÄÄ	ÄÄ"ÄÄ Ä”()$+,WNS.base[NS.relativeÄ ÄÄ_7https://ondras.zarovi.cz/sql/demo/images/up_2_black.png“/012Z$classnameX$classesUNSURL¢13XNSObject#AƒS7x¶' »”89:GTWNS.keysZNS.objects¨;<=>?@ABCDEFÄ	Ä
ÄÄÄÄÄÄÄÄÄÄ¨IJKLMNOPQRSÄÄÄÄÄÄÄÄÄÄÄÄ Ä!\Content-Type_X-Frame-OptionsZKeep-AliveVServerTDate^Content-LengthZConnectionX__hhaa___X-Content-Type-OptionsTEtag]Accept-Ranges]Last-ModifiedYimage/pngZsameorigin_timeout=5, max=96VApache_Thu, 11 Aug 2022 17:02:56 GMTS115ZKeep-Alive_`

YnBsaXN0MDDbAQIDBAUGBwgJCgsMDhASFBYYGhweIF8QFlgtQ29udGVudC1UeXBlLU9wdGlvbnNcQ29udGVudC1UeXBlWkNvbm5lY3Rpb25dTGFzdC1Nb2RpZmllZFZTZXJ2ZXJdQWNjZXB0LVJhbmdlc18QD1gtRnJhbWUtT3B0aW9uc1REYXRlXkNvbnRlbnQtTGVuZ3RoWktlZXAtQWxpdmVURXRhZ6ENV25vc25pZmahD1lpbWFnZS9wbmehEVpLZWVwLUFsaXZloRNfEB1UaHUsIDA1IFNlcCAyMDE5IDA4OjQ5OjEyIEdNVKEVVkFwYWNoZaEXVWJ5dGVzoRlac2FtZW9yaWdpbqEbXxAdVGh1LCAxMSBBdWcgMjAyMiAxNzowMjo1NiBHTVShHVMxMTWhH18QEXRpbWVvdXQ9NSwgbWF4PTk2oSFfEBIiNzMtNTkxY2E2NTUxMjY0YyIACAAfADgARQBQAF4AZQBzAIUAigCZAKQAqQCrALMAtQC/AMEAzADOAO4A8AD3APkA/wEBAQwBDgEuATABNAE2AUoBTAAAAAAAAAIBAAAAAAAAACIAAAAAAAAAAAAAAAAAAAFhWnosniff_"73-591ca6551264c"Ubytes_Thu, 05 Sep 2019 08:49:12 GMT“/0no_NSMutableDictionary£np3\NSDictionary“/0rs_NSHTTPURLResponse£tu3_NSHTTPURLResponse]NSURLResponse    $ ) 2 7 I L b d ä ê ´ Õ Ô Ú9@behä¨Ø±≥µ∑πªΩø¿¬ƒ∆»œ◊„ÂÁÈ#(3<BENWY[bjuÇÑÜàäåéêíîñòöß©´≠Ø±≥µ∑πªΩø¡Œ‡ÎÚ˜38FT^i}Ñ§®≥4:Z_uyÜãü£∑             v              ≈_7https://ondras.zarovi.cz/sql/demo/images/up_2_black.png‘OvâPNG

   IHDR         ¸«F‹   =IDAT(œc`Q‡√ˇ¬J@†Åêíôˇg·QV2˝?#‚Rˆﬂ(1Ì?#òQfèMô7D	Tô˜Hâ* r@0àÀZLJ    IENDÆB`ÇO÷bplist00‘
X$versionY$archiverT$topX$objects Ü†_NSKeyedArchiver—	_WebResourceResponseÄØ#'-.4567UVWXYZ[\]^_`abcdefghijklmqU$null› !"#$%&___nsurlrequest_proto_prop_obj_6___nsurlrequest_proto_prop_obj_3R$2___nsurlrequest_proto_prop_obj_0R$3___nsurlrequest_proto_prop_obj_4V$class___nsurlrequest_proto_prop_obj_1R$4R$0___nsurlrequest_proto_prop_obj_5___nsurlrequest_proto_prop_obj_2R$1ÄÄÄ	ÄÄ"ÄÄ Ä”()$+,WNS.base[NS.relativeÄ ÄÄ_7https://ondras.zarovi.cz/sql/demo/images/up_2_white.png“/012Z$classnameX$classesUNSURL¢13XNSObject#AƒS7x¶1ú »”89:GTWNS.keysZNS.objects¨;<=>?@ABCDEFÄ	Ä
ÄÄÄÄÄÄÄÄÄÄ¨IJKLMNOPQRSÄÄÄÄÄÄÄÄÄÄÄÄ Ä!\Content-Type_X-Frame-OptionsZKeep-AliveVServerTDate^Content-LengthZConnectionX__hhaa___X-Content-Type-OptionsTEtag]Accept-Ranges]Last-ModifiedYimage/pngZsameorigin_timeout=5, max=100VApache_Thu, 11 Aug 2022 17:05:35 GMTS118ZKeep-Alive_d

YnBsaXN0MDDbAQIDBAUGBwgJCgsMDhASFBYYGhweIF8QFlgtQ29udGVudC1UeXBlLU9wdGlvbnNcQ29udGVudC1UeXBlWkNvbm5lY3Rpb25dTGFzdC1Nb2RpZmllZFZTZXJ2ZXJdQWNjZXB0LVJhbmdlc18QD1gtRnJhbWUtT3B0aW9uc1REYXRlXkNvbnRlbnQtTGVuZ3RoWktlZXAtQWxpdmVURXRhZ6ENV25vc25pZmahD1lpbWFnZS9wbmehEVpLZWVwLUFsaXZloRNfEB1UaHUsIDA1IFNlcCAyMDE5IDA4OjQ5OjEyIEdNVKEVVkFwYWNoZaEXVWJ5dGVzoRlac2FtZW9yaWdpbqEbXxAdVGh1LCAxMSBBdWcgMjAyMiAxNzowNTozNSBHTVShHVMxMTihH18QEnRpbWVvdXQ9NSwgbWF4PTEwMKEhXxASIjc2LTU5MWNhNjU1MTI2NGMiAAgAHwA4AEUAUABeAGUAcwCFAIoAmQCkAKkAqwCzALUAvwDBAMwAzgDuAPAA9wD5AP8BAQEMAQ4BLgEwATQBNgFLAU0AAAAAAAACAQAAAAAAAAAiAAAAAAAAAAAAAAAAAAABYg==Wnosniff_"76-591ca6551264c"Ubytes_Thu, 05 Sep 2019 08:49:12 GMT“/0no_NSMutableDictionary£np3\NSDictionary“/0rs_NSHTTPURLResponse£tu3_NSHTTPURLResponse]NSURLResponse    $ ) 2 7 I L b d ä ê ´ Õ Ô Ú9@behä¨Ø±≥µ∑πªΩø¿¬ƒ∆»œ◊„ÂÁÈ#(3<BENWY[bjuÇÑÜàäåéêíîñòöß©´≠Ø±≥µ∑πªΩø¡Œ‡ÎÚ˜38FT^i~Ö•©¥$9?_dz~ãê§®º             v               _7https://ondras.zarovi.cz/sql/demo/images/up_2_white.png‘ !"OÄâPNG

   IHDR         ¸«F‹   GIDAT(œc`˙‡?nLPÛˇùˇ÷pûÌˇ€ˇ50I˛øÒˇÛ®í/@û$6≥@ æ¸∑¡£I>%pe¯ï@ïI2å(  ëÉ4»”ûy    IENDÆB`ÇOÿbplist00‘
X$versionY$archiverT$topX$objects Ü†_NSKeyedArchiver—	_WebResourceResponseÄØ#'-.4567UVWXYZ[\]^_`abcdefghijklmqU$null› !"#$%&___nsurlrequest_proto_prop_obj_6___nsurlrequest_proto_prop_obj_3R$2___nsurlrequest_proto_prop_obj_0R$3___nsurlrequest_proto_prop_obj_4V$class___nsurlrequest_proto_prop_obj_1R$4R$0___nsurlrequest_proto_prop_obj_5___nsurlrequest_proto_prop_obj_2R$1ÄÄÄ	ÄÄ"ÄÄ Ä”()$+,WNS.base[NS.relativeÄ ÄÄ_9https://ondras.zarovi.cz/sql/demo/images/down_2_white.png“/012Z$classnameX$classesUNSURL¢13XNSObject#AƒS7x¶:⁄ »”89:GTWNS.keysZNS.objects¨;<=>?@ABCDEFÄ	Ä
ÄÄÄÄÄÄÄÄÄÄ¨IJKLMNOPQRSÄÄÄÄÄÄÄÄÄÄÄÄ Ä!\Content-Type_X-Frame-OptionsZKeep-AliveVServerTDate^Content-LengthZConnectionX__hhaa___X-Content-Type-OptionsTEtag]Accept-Ranges]Last-ModifiedYimage/pngZsameorigin_timeout=5, max=100VApache_Thu, 11 Aug 2022 17:34:22 GMTS128ZKeep-Alive_d

YnBsaXN0MDDbAQIDBAUGBwgJCgsMDhASFBYYGhweIF8QFlgtQ29udGVudC1UeXBlLU9wdGlvbnNcQ29udGVudC1UeXBlWkNvbm5lY3Rpb25dTGFzdC1Nb2RpZmllZFZTZXJ2ZXJdQWNjZXB0LVJhbmdlc18QD1gtRnJhbWUtT3B0aW9uc1REYXRlXkNvbnRlbnQtTGVuZ3RoWktlZXAtQWxpdmVURXRhZ6ENV25vc25pZmahD1lpbWFnZS9wbmehEVpLZWVwLUFsaXZloRNfEB1UaHUsIDA1IFNlcCAyMDE5IDA4OjQ5OjEyIEdNVKEVVkFwYWNoZaEXVWJ5dGVzoRlac2FtZW9yaWdpbqEbXxAdVGh1LCAxMSBBdWcgMjAyMiAxNzozNDoyMiBHTVShHVMxMjihH18QEnRpbWVvdXQ9NSwgbWF4PTEwMKEhXxASIjgwLTU5MWNhNjU1MTI2NGMiAAgAHwA4AEUAUABeAGUAcwCFAIoAmQCkAKkAqwCzALUAvwDBAMwAzgDuAPAA9wD5AP8BAQEMAQ4BLgEwATQBNgFLAU0AAAAAAAACAQAAAAAAAAAiAAAAAAAAAAAAAAAAAAABYg==Wnosniff_"80-591ca6551264c"Ubytes_Thu, 05 Sep 2019 08:49:12 GMT“/0no_NSMutableDictionary£np3\NSDictionary“/0rs_NSHTTPURLResponse£tu3_NSHTTPURLResponse]NSURLResponse    $ ) 2 7 I L b d ä ê ´ Õ Ô Ú9@behä¨Ø±≥µ∑πªΩø¿¬ƒ∆»œ◊„ÂÁÈ%*5>DGPY[]dlwÑÜàäåéêíîñòöú©´≠Ø±≥µ∑πªΩø¡√–‚ÌÙ˘5:HV`kÄáß´∂&;Aaf|Äçí¶™æ             v              Ã_9https://ondras.zarovi.cz/sql/demo/images/down_2_white.png‘$
%&Obody {
	font-family: verdana, sans serif;
	font-size: small;
	padding: 0px;
	margin: 0px;
	background: #FFF;
	visibility: hidden;
	-moz-user-select: -moz-none;
	-khtml-user-select: none;
	-webkit-user-select: none;
	-ms-user-select: none;
	user-select: none;
}

#area {
	position: relative;
	background: transparent url(../images/back.png);
	width: 3000px;
	height: 3000px;
}

#controls {
	position: absolute;
	left: 0px;
	top: 0px;
}

#bar {
	text-align: center;
	background-color: #ccc;
	position: fixed; 
	top: 0px;
	right: 0px;
	width: 150px;
	padding: 0px 5px 5px;
	-moz-box-shadow: -4px 4px 8px #888; /* FF 3.5+ */
	-webkit-box-shadow: -4px 4px 8px #888; /* Safari 3.0+, Chrome */
	box-shadow: -4px 4px 8px #888; /* Opera 10.5, IE 9.0 */
	filter: progid:DXImageTransform.Microsoft.Shadow(Strength=5, Direction=215, Color='#888888'); /* IE 6, IE 7 */
	-ms-filter: "progid:DXImageTransform.Microsoft.Shadow(Strength=5, Direction=215, Color='#888888')"; /* IE 8 */
}

#bar input {
	display: block;
	width: 90%;
	margin: auto;
}

#bar input.small {
	width: 45%;
	display: inline;
}

#toggle {
	padding: 5px 0px;
	margin-bottom: 5px;
	cursor: pointer;
	background-position: 50% 5px;
	background-repeat: no-repeat;
	height: 5px;
}

#toggle:hover {
	background-color: #bbb;
}

#toggle.on {
	background-image: url(../images/up.gif);
}

#toggle.off {
	background-image: url(../images/down.gif);
}

#minimap {
	position: fixed;
	width: 100px;
	height: 100px;
	right: 0px;
	bottom: 0px;
	background-color: #fff;
	border: 1px solid #000;
	opacity: 0.9;
	overflow: hidden;
}

.mini {
	position: absolute;
	border: 1px solid #000;
	background-color: #eea;
	font-size: 1px;
	line-height: 1px;
}

.mini_selected {
	background-color: #f85;
}

.port {
	position: absolute;
	border: 2px solid #f00;
}

.table {
	position: absolute;
	border: 1px solid #000;
	background-color: #ddd;
	cursor: pointer;
	-moz-box-shadow: 4px 4px 8px #888; /* FF 3.5+ */
	-webkit-box-shadow: 4px 4px 8px #888; /* Safari 3.0+, Chrome */
	box-shadow: 4px 4px 8px #888; /* Opera 10.5, IE 9.0 */
	filter: progid:DXImageTransform.Microsoft.Shadow(Strength=5, Direction=135, Color='#888888'); /* IE 6, IE 7 */
	-ms-filter: progid:DXImageTransform.Microsoft.Shadow(Strength=5, Direction=135, Color='#888888'); /* IE 8 */
	border-radius: 3px;
}

.table table {
	border-collapse: collapse;
}

.table.selected {
	border: 2px solid #000;
}

.table thead .title {
	text-align: center;
	padding: 3px 30px;
}

.table tbody {
	border-top: 1px dotted #888;
}

.table tbody td {
	padding: 3px;
}

.table tbody .selected {
	font-weight: bold;
	color: #f00;
	display: inline-block;
}

.table tbody .title {
	display: inline-block;
}

.table thead td[title]:not([title=""]):after{
	content: '';
	position: absolute;
	top: 0;
	right: 0;
	border-color: royalblue;
	border-style: solid;
	border-width: 5px;
	border-bottom-color: transparent;
	border-left-color: transparent;
}

.table tbody td {
	position: relative;
}

.table tbody[title]:not(.expanded):not([title=""]) td:last-child:after{
	content: '';
	position: absolute;
	top: 0;
	right: 0;
	border-color: royalblue;
	border-style: solid;
	border-width: 5px;
	border-bottom-color: transparent;
	border-left-color: transparent;
}

.primary {
	font-weight: bold;
}

.key {
	font-style: italic;
}

.primary.key {
	font-style: normal;
}

.typehint {
	font-size: 80%;
	color: gray;
}

.comment {
	font-size: 80%;
	font-weight: normal;
	margin-right: 0.5em;
}

.adding {
	cursor: crosshair;
}

.relation {
	overflow: hidden;
}

#background {
	position: absolute;
	background-color: #000;
	opacity: 0.5;
	visibility: hidden;
}

#window {
	position: absolute;
	visibility: hidden;
	background-color: #fff;
	border: 6px double #333;
}

#windowtitle {
	border-bottom: 2px solid #333;
	padding: 2px;
	padding-left: 1em;
	font-weight: bold;
	background-color: rgb(238, 238, 170);
}

#windowcontent {
	padding: 1em;
}

#windowok, #windowcancel {
	margin: 0em 1em 1em;
}

.small {
	font-size: 85%;
}

#textarea {
	width: 650px;
	height: 200px;
}

#opts {
	width: 700px;
}

#keys {
	white-space: nowrap; 
	text-align: center;
}

legend {
	font-weight: bold;
}

label, input, select {
	vertical-align: middle;
}

#throbber {
	position: absolute;
	top: 2px;
	right: 3px;
}

#rubberband {
	position: absolute;
	border: 1px solid #000;
	background: #888;
	opacity: 0.5;
	visibility: hidden;
}
Oäbplist00‘
X$versionY$archiverT$topX$objects Ü†_NSKeyedArchiver—	_WebResourceResponseÄØ''-.4567YZ[\]^_`abcdefghijklmnopqrstuyU$null› !"#$%&___nsurlrequest_proto_prop_obj_6___nsurlrequest_proto_prop_obj_3R$2___nsurlrequest_proto_prop_obj_0R$3___nsurlrequest_proto_prop_obj_4V$class___nsurlrequest_proto_prop_obj_1R$4R$0___nsurlrequest_proto_prop_obj_5___nsurlrequest_proto_prop_obj_2R$1ÄÄÄ	ÄÄ&ÄÄ Ä”()$+,WNS.base[NS.relativeÄ ÄÄ_5https://ondras.zarovi.cz/sql/demo/styles/original.css“/012Z$classnameX$classesUNSURL¢13XNSObject#AƒS7x¶E$ »”89:IXWNS.keysZNS.objectsÆ;<=>?@ABCDEFGHÄ	Ä
ÄÄÄÄÄÄÄÄÄÄÄÄÆKLMNOPQRSTUVWÄÄÄÄÄÄÄÄÄÄ Ä!Ä"Ä#Ä$Ä%\Content-TypeZKeep-Alive]Accept-Ranges]Last-Modified_Content-EncodingVServerTDate^Content-LengthZConnectionX__hhaa___X-Content-Type-OptionsTEtag_X-Frame-OptionsTVaryXtext/css_timeout=5, max=100Ubytes_Thu, 05 Sep 2019 08:49:12 GMTTgzipVApache_Thu, 11 Aug 2022 17:02:56 GMTT1315ZKeep-Alive_ƒ

YnBsaXN0MDDdAQIDBAUGBwgJCgsMDQ4QEhQWGBocHiAiJCZcQ29udGVudC1UeXBlXxAPWC1GcmFtZS1PcHRpb25zWktlZXAtQWxpdmVUVmFyeV8QEENvbnRlbnQtRW5jb2RpbmdWU2VydmVyVERhdGVeQ29udGVudC1MZW5ndGhaQ29ubmVjdGlvbl8QFlgtQ29udGVudC1UeXBlLU9wdGlvbnNURXRhZ11BY2NlcHQtUmFuZ2VzXUxhc3QtTW9kaWZpZWShD1h0ZXh0L2Nzc6ERWnNhbWVvcmlnaW6hE18QEnRpbWVvdXQ9NSwgbWF4PTEwMKEVXxAPQWNjZXB0LUVuY29kaW5noRdUZ3ppcKEZVkFwYWNoZaEbXxAdVGh1LCAxMSBBdWcgMjAyMiAxNzowMjo1NiBHTVShHVQxMzE1oR9aS2VlcC1BbGl2ZaEhV25vc25pZmahI18QGSIxMTE1LTU5MWNhNjU1MTQ1OGMtZ3ppcCKhJVVieXRlc6EnXxAdVGh1LCAwNSBTZXAgMjAxOSAwODo0OToxMiBHTVQACAAjADAAQgBNAFIAZQBsAHEAgACLAKQAqQC3AMUAxwDQANIA3QDfAPQA9gEIAQoBDwERARgBGgE6ATwBQQFDAU4BUAFYAVoBdgF4AX4BgAAAAAAAAAIBAAAAAAAAACgAAAAAAAAAAAAAAAAAAAGgWnosniff_"1115-591ca6551458c-gzip"Zsameorigin_Accept-Encoding“/0vw_NSMutableDictionary£vx3\NSDictionary“/0z{_NSHTTPURLResponse£|}3_NSHTTPURLResponse]NSURLResponse    $ ) 2 7 I L b d é î Ø — Û ˆ=Dfilé∞≥µ∑πªΩø¡√ƒ∆» Ã”€ÁÈÎÌ%*5>DGPY[]dlwÜàäåéêíîñòöúû†¢±≥µ∑πªΩø¡√≈«…ÀÕœ‹Áı"1<E^cuzÉòûæ√ ÍÔ˙¬ ÊÒ"/4HL`             ~              n_5https://ondras.zarovi.cz/sql/demo/styles/original.css‘(
)*O*#bar, #background, #minimap {
	display: none;
}

.table {
	border:1px solid #000000;
	background-color:none;
}

.row {
	background-color:none;
}

.table .shadow-corner, .shadow-right, .shadow-bottom  {
	display:none;
}

.table_title {
	font-weight:bold;
	font-size:115%;
	background-color:none;
}

OÖbplist00‘
X$versionY$archiverT$topX$objects Ü†_NSKeyedArchiver—	_WebResourceResponseÄØ''-.4567YZ[\]^_`abcdefghijklmnopqrstuyU$null› !"#$%&___nsurlrequest_proto_prop_obj_6___nsurlrequest_proto_prop_obj_3R$2___nsurlrequest_proto_prop_obj_0R$3___nsurlrequest_proto_prop_obj_4V$class___nsurlrequest_proto_prop_obj_1R$4R$0___nsurlrequest_proto_prop_obj_5___nsurlrequest_proto_prop_obj_2R$1ÄÄÄ	ÄÄ&ÄÄ Ä”()$+,WNS.base[NS.relativeÄ ÄÄ_2https://ondras.zarovi.cz/sql/demo/styles/print.css“/012Z$classnameX$classesUNSURL¢13XNSObject#AƒS7x¶Q± »”89:IXWNS.keysZNS.objectsÆ;<=>?@ABCDEFGHÄ	Ä
ÄÄÄÄÄÄÄÄÄÄÄÄÆKLMNOPQRSTUVWÄÄÄÄÄÄÄÄÄÄ Ä!Ä"Ä#Ä$Ä%\Content-TypeZKeep-Alive]Accept-Ranges]Last-Modified_Content-EncodingVServerTDate^Content-LengthZConnectionX__hhaa___X-Content-Type-OptionsTEtag_X-Frame-OptionsTVaryXtext/css_timeout=5, max=100Ubytes_Thu, 26 May 2016 21:04:07 GMTTgzipVApache_Thu, 11 Aug 2022 17:02:56 GMTS177ZKeep-Alive_ƒ

YnBsaXN0MDDdAQIDBAUGBwgJCgsMDQ4QEhQWGBocHiAiJCZcQ29udGVudC1UeXBlXxAPWC1GcmFtZS1PcHRpb25zWktlZXAtQWxpdmVUVmFyeV8QEENvbnRlbnQtRW5jb2RpbmdWU2VydmVyVERhdGVeQ29udGVudC1MZW5ndGhaQ29ubmVjdGlvbl8QFlgtQ29udGVudC1UeXBlLU9wdGlvbnNURXRhZ11BY2NlcHQtUmFuZ2VzXUxhc3QtTW9kaWZpZWShD1h0ZXh0L2Nzc6ERWnNhbWVvcmlnaW6hE18QEnRpbWVvdXQ9NSwgbWF4PTEwMKEVXxAPQWNjZXB0LUVuY29kaW5noRdUZ3ppcKEZVkFwYWNoZaEbXxAdVGh1LCAxMSBBdWcgMjAyMiAxNzowMjo1NiBHTVShHVMxNzehH1pLZWVwLUFsaXZloSFXbm9zbmlmZqEjXxAYIjEyYS01MzNjNTIxODdjZDM5LWd6aXAioSVVYnl0ZXOhJ18QHVRodSwgMjYgTWF5IDIwMTYgMjE6MDQ6MDcgR01UAAgAIwAwAEIATQBSAGUAbABxAIAAiwCkAKkAtwDFAMcA0ADSAN0A3wD0APYBCAEKAQ8BEQEYARoBOgE8AUABQgFNAU8BVwFZAXQBdgF8AX4AAAAAAAACAQAAAAAAAAAoAAAAAAAAAAAAAAAAAAABng==Wnosniff_"12a-533c52187cd39-gzip"Zsameorigin_Accept-Encoding“/0vw_NSMutableDictionary£vx3\NSDictionary“/0z{_NSHTTPURLResponse£|}3_NSHTTPURLResponse]NSURLResponse    $ ) 2 7 I L b d é î Ø — Û ˆ=Dfilé∞≥µ∑πªΩø¡√ƒ∆» Ã”€ÁÈÎÌ"'2;ADMVXZaitÉÖáâãçèëìïóôõùüÆ∞≤¥∂∏∫ºæ¿¬ƒ∆» ÃŸ‰Ú .9B[`rwÄïõª¿«ÁÎˆæ∆·Ï˛*/CG[             ~              i_2https://ondras.zarovi.cz/sql/demo/styles/print.css’,-./01_WebResourceTextEncodingNameOÈ€(function(){var t,e,r,n,i,o,s,a,u,h,l,p={}.hasOwnProperty,c=[].indexOf||function(t){for(var e=0,r=this.length;r>e;e++)if(e in this&&this[e]===t)return e;return-1},d=function(t,e){function r(){this.constructor=t}for(var n in e)p.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};if(l=function(){function t(){throw new Error("Not implemented. Did you mean to use Dropbox.Client?")}return t}(),l.Util=function(){function t(){}return t}(),l.Http=function(){function t(){}return t}(),l.File=function(){function t(){}return t}(),"undefined"!=typeof global&&"undefined"!=typeof module&&"exports"in module)e=global,r=module.require.bind(module),module.exports=l;else if("undefined"!=typeof window&&"undefined"!=typeof navigator)e=window,r=null,window.Dropbox&&!function(){var t,e,r,n;r=window.Dropbox,n=[];for(t in r)p.call(r,t)&&(e=r[t],n.push(l[t]=e));return n}(),window.Dropbox=l;else{if("undefined"==typeof self||"undefined"==typeof navigator)throw new Error("dropbox.js loaded in an unsupported JavaScript environment.");e=self,r=self.importScripts.bind(self),self.Dropbox=l}if(l.Env=function(){function t(){}return t.global=e,t.require=r,t}(),l.Util.EventSource=function(){function t(t){this._cancelable=t&&t.cancelable,this._listeners=[]}return t.prototype.addListener=function(t){if("function"!=typeof t)throw new TypeError("Invalid listener type; expected function");return c.call(this._listeners,t)<0&&this._listeners.push(t),this},t.prototype.removeListener=function(t){var e,r,n,i,o,s;if(this._listeners.indexOf)r=this._listeners.indexOf(t),-1!==r&&this._listeners.splice(r,1);else for(s=this._listeners,e=i=0,o=s.length;o>i;e=++i)if(n=s[e],n===t){this._listeners.splice(e,1);break}return this},t.prototype.dispatch=function(t){var e,r,n,i,o;for(o=this._listeners,n=0,i=o.length;i>n;n++)if(e=o[n],r=e(t),this._cancelable&&r===!1)return!1;return!0},t}(),l.AccountInfo=function(){function t(t){var e;this._json=t,this.name=t.display_name,this.email=t.email,this.countryCode=t.country||null,this.uid=t.uid.toString(),t.public_app_url?(this.publicAppUrl=t.public_app_url,e=this.publicAppUrl.length-1,e>=0&&"/"===this.publicAppUrl.substring(e)&&(this.publicAppUrl=this.publicAppUrl.substring(0,e))):this.publicAppUrl=null,this.referralUrl=t.referral_link,this.quota=t.quota_info.quota,this.privateBytes=t.quota_info.normal||0,this.sharedBytes=t.quota_info.shared||0,this.usedQuota=this.privateBytes+this.sharedBytes}return t.parse=function(t){return t&&"object"==typeof t?new l.AccountInfo(t):t},t.prototype.name=null,t.prototype.email=null,t.prototype.countryCode=null,t.prototype.uid=null,t.prototype.referralUrl=null,t.prototype.publicAppUrl=null,t.prototype.quota=null,t.prototype.usedQuota=null,t.prototype.privateBytes=null,t.prototype.sharedBytes=null,t.prototype.json=function(){return this._json},t}(),l.ApiError=function(){function t(t,e,r){var n,i;if(this.method=e,this.url=r,this.status=t.status,t.responseType)try{n=t.response||t.responseText}catch(o){i=o;try{n=t.responseText}catch(o){i=o,n=null}}else try{n=t.responseText}catch(o){i=o,n=null}if(n)try{this.responseText=n.toString(),this.response=JSON.parse(n)}catch(o){i=o,this.response=null}else this.responseText="(no response)",this.response=null}return t.prototype.status=null,t.prototype.method=null,t.prototype.url=null,t.prototype.responseText=null,t.prototype.response=null,t.NETWORK_ERROR=0,t.NO_CONTENT=304,t.INVALID_PARAM=400,t.INVALID_TOKEN=401,t.OAUTH_ERROR=403,t.NOT_FOUND=404,t.INVALID_METHOD=405,t.NOT_ACCEPTABLE=406,t.CONFLICT=409,t.RATE_LIMITED=429,t.SERVER_ERROR=503,t.OVER_QUOTA=507,t.prototype.toString=function(){return"Dropbox API error "+this.status+" from "+this.method+" "+this.url+" :: "+this.responseText},t.prototype.inspect=function(){return this.toString()},t}(),l.AuthDriver=function(){function t(){}return t.prototype.authType=function(){return"code"},t.prototype.url=function(){return"https://some.url"},t.prototype.doAuthorize=function(t,e,r,n){return n({code:"access-code"})},t.prototype.getStateParam=function(t,e){return e(l.Util.Oauth.randomAuthStateParam())},t.prototype.resumeAuthorize=function(t,e,r){return r({code:"access-code"})},t.prototype.onAuthStateChange=function(t,e){return e()},t.oauthQueryParams=["access_token","expires_in","scope","token_type","code","error","error_description","error_uri","mac_key","mac_algorithm"].sort(),t}(),l.AuthDriver.autoConfigure=function(t){if("undefined"!=typeof chrome&&chrome.runtime&&chrome.runtime.id)return chrome.tabs&&chrome.tabs.create?t.authDriver(new l.AuthDriver.ChromeExtension):t.authDriver(new l.AuthDriver.ChromeApp),void 0;if("undefined"!=typeof window){if(window.cordova)return t.authDriver(new l.AuthDriver.Cordova),void 0;window&&window.navigator&&t.authDriver(new l.AuthDriver.Redirect)}},l.AuthDriver.BrowserBase=function(){function t(t){t?(this.rememberUser="rememberUser"in t?t.rememberUser:!0,this.scope=t.scope||"default"):(this.rememberUser=!0,this.scope="default"),this.storageKey=null,this.storage=l.AuthDriver.BrowserBase.localStorage(),this.stateRe=/^[^#]+\#(.*&)?state=([^&]+)(&|$)/}return t.prototype.authType=function(){return"token"},t.prototype.onAuthStepChange=function(t,e){var r=this;switch(this.setStorageKey(t),t.authStep){case l.Client.RESET:return this.loadCredentials(function(n){return n?(t.setCredentials(n),t.authStep!==l.Client.DONE?e():r.rememberUser?(t.setCredentials(n),e()):r.forgetCredentials(e)):e()});case l.Client.DONE:return this.rememberUser?this.storeCredentials(t.credentials(),e):this.forgetCredentials(e);case l.Client.SIGNED_OUT:return this.forgetCredentials(e);case l.Client.ERROR:return this.forgetCredentials(e);default:return e(),this}},t.prototype.setStorageKey=function(t){return this.storageKey="dropbox-auth:"+this.scope+":"+t.appHash(),this},t.prototype.storeCredentials=function(t,e){var r,n,i,o;r=JSON.stringify(t);try{this.storage.setItem(this.storageKey,r)}catch(s){i=s,n=encodeURIComponent(this.storageKey),o=encodeURIComponent(r),document.cookie=""+n+"="+o+"; path=/"}return e(),this},t.prototype.loadCredentials=function(t){var e,r,n,i,o,s,a;try{n=this.storage.getItem(this.storageKey)}catch(u){a=u,n=null}if(null===n&&(o=encodeURIComponent(this.storageKey),s=o.replace(/[.*+()]/g,"\\$&"),e=new RegExp("(^|(;\\s*))"+o+"=([^;]*)(;|$)"),(i=e.exec(document.cookie))&&(n=decodeURIComponent(i[3]))),!n)return t(null),this;try{t(JSON.parse(n))}catch(u){r=u,t(null)}return this},t.prototype.forgetCredentials=function(t){var e,r,n;try{this.storage.removeItem(this.storageKey)}catch(i){n=i,r=encodeURIComponent(this.storageKey),e=new Date(0).toGMTString(),document.cookie=""+r+"={}; expires="+e+"; path=/"}return t(),this},t.prototype.locationStateParam=function(t){var e,r;return e=t||l.AuthDriver.BrowserBase.currentLocation(),r=this.stateRe.exec(e),r?decodeURIComponent(r[2]):null},t.prototype.replaceUrlBasename=function(t,e){var r,n,i;return n=t.indexOf("#"),-1!==n&&(t=t.substring(0,n)),i=t.indexOf("?"),-1!==i&&(t=t.substring(0,i)),r=t.split("/"),r[r.length-1]=e,r.join("/")},t.localStorage=function(){return"undefined"!=typeof window?window.localStorage:null},t.currentLocation=function(){return window.location.href},t.cleanupLocation=function(){var t,e;window.history&&window.history.replaceState?(e=this.currentLocation(),t=e.indexOf("#"),window.history.replaceState({},document.title,e.substring(0,t))):window.location.hash=""},t}(),l.AuthDriver.Redirect=function(t){function e(t){e.__super__.constructor.call(this,t),this.receiverUrl=this.baseUrl(t)}return d(e,t),e.prototype.baseUrl=function(t){var e,r;if(r=l.AuthDriver.BrowserBase.currentLocation(),t){if(t.redirectUrl)return t.redirectUrl;if(t.redirectFile)return this.replaceUrlBasename(r,t.redirectFile)}return e=r.indexOf("#"),-1!==e&&(r=r.substring(0,e)),r},e.prototype.url=function(){return this.receiverUrl},e.prototype.doAuthorize=function(t,e,r){return this.storeCredentials(r.credentials(),function(){return window.location.assign(t)})},e.prototype.resumeAuthorize=function(t,e,r){var n;return this.locationStateParam()===t?(n=l.AuthDriver.BrowserBase.currentLocation(),l.AuthDriver.BrowserBase.cleanupLocation(),r(l.Util.Oauth.queryParamsFromUrl(n))):this.forgetCredentials(function(){return r({error:"Authorization error"})})},e}(l.AuthDriver.BrowserBase),l.AuthDriver.Popup=function(t){function e(t){e.__super__.constructor.call(this,t),this.receiverUrl=this.baseUrl(t)}return d(e,t),e.prototype.url=function(){return this.receiverUrl},e.prototype.doAuthorize=function(t,e,r,n){return this.listenForMessage(e,n),this.openWindow(t)},e.prototype.baseUrl=function(t){var e;if(e=l.AuthDriver.BrowserBase.currentLocation(),t){if(t.receiverUrl)return t.receiverUrl;if(t.receiverFile)return this.replaceUrlBasename(e,t.receiverFile)}return e},e.prototype.openWindow=function(t){return window.open(t,"_dropboxOauthSigninWindow",this.popupWindowSpec(980,700))},e.prototype.popupWindowSpec=function(t,e){var r,n,i,o,s,a,u,h,l,p;return s=null!=(u=window.screenX)?u:window.screenLeft,a=null!=(h=window.screenY)?h:window.screenTop,o=null!=(l=window.outerWidth)?l:document.documentElement.clientWidth,r=null!=(p=window.outerHeight)?p:document.documentElement.clientHeight,n=Math.round(s+(o-t)/2),i=Math.round(a+(r-e)/2.5),s>n&&(n=s),a>i&&(i=a),"width="+t+",height="+e+","+("left="+n+",top="+i)+"dialog=yes,dependent=yes,scrollbars=yes,location=yes"},e.prototype.listenForMessage=function(t,e){var r,n=this;return r=function(i){var o,s,a;o=i.data?i.data:i;try{a=JSON.parse(o)._dropboxjs_oauth_info}catch(u){return s=u,void 0}if(a)return n.locationStateParam(a)===t?(t=!1,window.removeEventListener("message",r),l.AuthDriver.Popup.onMessage.removeListener(r),e(l.Util.Oauth.queryParamsFromUrl(o))):void 0},window.addEventListener("message",r,!1),l.AuthDriver.Popup.onMessage.addListener(r)},e.locationOrigin=function(t){var e;return(e=/^(file:\/\/[^\?\#]*)(\?|\#|$)/.exec(t))?e[1]:(e=/^([^\:]+\:\/\/[^\/\?\#]*)(\/|\?|\#|$)/.exec(t),e?e[1]:t)},e.oauthReceiver=function(){window.addEventListener("load",function(){var t,e,r,n,i,o;if(o=window.location.href,r=JSON.stringify({_dropboxjs_oauth_info:o}),l.AuthDriver.BrowserBase.cleanupLocation(),n=window.opener,window.parent!==window.top&&(n||(n=window.parent)),n){try{i=window.location.origin||locationOrigin(o),n.postMessage(r,i),window.close()}catch(s){e=s}try{return n.Dropbox.AuthDriver.Popup.onMessage.dispatch(r),window.close()}catch(s){t=s}}})},e.onMessage=new l.Util.EventSource,e}(l.AuthDriver.BrowserBase),l.AuthDriver.ChromeBase=function(t){function e(t){e.__super__.constructor.call(this,t),this.storageKey="dropbox_js_"+this.scope+"_credentials"}return d(e,t),e.prototype.onAuthStepChange=function(t,e){switch(t.authStep){case l.Client.RESET:return this.loadCredentials(function(r){return r&&t.setCredentials(r),e()});case l.Client.DONE:return this.storeCredentials(t.credentials(),e);case l.Client.SIGNED_OUT:return this.forgetCredentials(e);case l.Client.ERROR:return this.forgetCredentials(e);default:return e()}},e.prototype.url=function(){return this.receiverUrl},e.prototype.storeCredentials=function(t,e){var r;return r={},r[this.storageKey]=t,chrome.storage.local.set(r,e),this},e.prototype.loadCredentials=function(t){var e=this;return chrome.storage.local.get(this.storageKey,function(r){return t(r[e.storageKey]||null)}),this},e.prototype.forgetCredentials=function(t){return chrome.storage.local.remove(this.storageKey,t),this},e}(l.AuthDriver.BrowserBase),l.AuthDriver.ChromeApp=function(t){function e(t){e.__super__.constructor.call(this,t),this.receiverUrl="https://"+chrome.runtime.id+".chromiumapp.org/"}return d(e,t),e.prototype.doAuthorize=function(t,e,r,n){var i=this;return chrome.identity.launchWebAuthFlow({url:t,interactive:!0},function(t){return i.locationStateParam(t)===e?(e=!1,n(l.Util.Oauth.queryParamsFromUrl(t))):void 0})},e}(l.AuthDriver.ChromeBase),l.AuthDriver.ChromeExtension=function(t){function e(t){var r;e.__super__.constructor.call(this,t),r=t&&t.receiverPath||"chrome_oauth_receiver.html",this.receiverUrl=chrome.runtime.getURL(r)}return d(e,t),e.prototype.doAuthorize=function(t,e,r,n){var i,o,s=this;return o=null,i=function(t,r){var a;if((!r||!r.tab||r.tab.url.substring(0,s.receiverUrl.length)===s.receiverUrl)&&t.dropbox_oauth_receiver_href)return a=t.dropbox_oauth_receiver_href,s.locationStateParam(a)===e?(e=!1,o&&chrome.tabs.remove(o.id),chrome.runtime.onMessage.removeListener(i),n(l.Util.Oauth.queryParamsFromUrl(a))):void 0},chrome.runtime.onMessage.addListener(i),chrome.tabs.create({url:t,active:!0,pinned:!1},function(t){return o=t})},e.oauthReceiver=function(){return window.addEventListener("load",function(){var t;return t=window.location.href,window.location.hash="",chrome.runtime.sendMessage({dropbox_oauth_receiver_href:t}),window.close?window.close():void 0})},e}(l.AuthDriver.ChromeBase),l.AuthDriver.Cordova=function(t){function e(t){e.__super__.constructor.call(this,t)}return d(e,t),e.prototype.url=function(){return"https://www.dropbox.com/1/oauth2/redirect_receiver"},e.prototype.doAuthorize=function(t,e,r,n){var i,o,s,a,u,h=this;return o=window.open(t,"_blank","location=yes,closebuttoncaption=Cancel"),a=!1,i=/^[^/]*\/\/[^/]*\//.exec(t)[0],u=!1,s=function(t){if(t.url&&h.locationStateParam(t.url)===e){if(u)return;return o.removeEventListener("loadstart",s),o.removeEventListener("loaderror",s),o.removeEventListener("loadstop",s),o.removeEventListener("exit",s),u=!0,window.setTimeout(function(){return o.close()},10),n(l.Util.Oauth.queryParamsFromUrl(t.url)),void 0}if("exit"===t.type){if(u)return;o.removeEventListener("loadstart",s),o.removeEventListener("loaderror",s),o.removeEventListener("loadstop",s),o.removeEventListener("exit",s),u=!0,n(new AuthError("error=access_denied&error_description=User+closed+browser+window"))}},o.addEventListener("loadstart",s),o.addEventListener("loaderror",s),o.addEventListener("loadstop",s),o.addEventListener("exit",s)},e}(l.AuthDriver.BrowserBase),l.AuthDriver.NodeServer=function(){function t(t){this._port=(null!=t?t.port:void 0)||8912,(null!=t?t.tls:void 0)?(this._tlsOptions=t.tls,("string"==typeof this._tlsOptions||this._tlsOptions instanceof Buffer)&&(this._tlsOptions={key:this._tlsOptions,cert:this._tlsOptions})):this._tlsOptions=null,this._fs=l.Env.require("fs"),this._http=l.Env.require("http"),this._https=l.Env.require("https"),this._open=l.Env.require("open"),this._callbacks={},this._nodeUrl=l.Env.require("url"),this.createApp()}return t.prototype.authType=function(){return"code"},t.prototype.url=function(){var t;return t=null===this._tlsOptions?"http":"https",""+t+"://localhost:"+this._port+"/oauth_callback"},t.prototype.doAuthorize=function(t,e,r,n){return this._callbacks[e]=n,this.openBrowser(t)},t.prototype.openBrowser=function(t){if(!t.match(/^https?:\/\//))throw new Error("Not a http/https URL: "+t);return"BROWSER"in process.env?this._open(t,process.env.BROWSER):this._open(t)},t.prototype.createApp=function(){var t=this;return this._app=this._tlsOptions?this._https.createServer(this._tlsOptions,function(e,r){return t.doRequest(e,r)}):this._http.createServer(function(e,r){return t.doRequest(e,r)}),this._app.listen(this._port)},t.prototype.closeServer=function(){return this._app.close()},t.prototype.doRequest=function(t,e){var r,n,i,o=this;return i=this._nodeUrl.parse(t.url,!0),"/oauth_callback"===i.pathname&&(n=i.query.state,this._callbacks[n]&&(this._callbacks[n](i.query),delete this._callbacks[n])),r="",t.on("data",function(t){return r+=t}),t.on("end",function(){return o.closeBrowser(e)})},t.prototype.closeBrowser=function(t){var e;return e='<!doctype html>\n<script type="text/javascript">window.close();</script>\n<p>Please close this window.</p>',t.writeHead(200,{"Content-Length":e.length,"Content-Type":"text/html"}),t.write(e),t.end()},t}(),l.AuthError=function(){function t(t){var e;if(!t.error)throw new Error("Not an OAuth 2.0 error: "+JSON.stringify(t));e="object"==typeof t.error&&t.error.error?t.error:t,this.code=e.error,this.description=e.error_description||null,this.uri=e.error_uri||null}return t.prototype.code=null,t.prototype.description=null,t.prototype.uri=null,t.ACCESS_DENIED="access_denied",t.INVALID_REQUEST="invalid_request",t.UNAUTHORIZED_CLIENT="unauthorized_client",t.INVALID_GRANT="invalid_grant",t.INVALID_SCOPE="invalid_scope",t.UNSUPPORTED_GRANT_TYPE="unsupported_grant_type",t.UNSUPPORTED_RESPONSE_TYPE="unsupported_response_type",t.SERVER_ERROR="server_error",t.TEMPORARILY_UNAVAILABLE="temporarily_unavailable",t.prototype.toString=function(){return"Dropbox OAuth error "+this.code+" :: "+this.description},t.prototype.inspect=function(){return this.toString()},t}(),l.Client=function(){function e(t){var e=this;this._serverRoot=t.server||this._defaultServerRoot(),this._maxApiServer="maxApiServer"in t?t.maxApiServer:this._defaultMaxApiServer(),this._authServer=t.authServer||this._defaultAuthServer(),this._fileServer=t.fileServer||this._defaultFileServer(),this._downloadServer=t.downloadServer||this._defaultDownloadServer(),this._notifyServer=t.notifyServer||this._defaultNotifyServer(),this.onXhr=new l.Util.EventSource({cancelable:!0}),this.onError=new l.Util.EventSource,this.onAuthStepChange=new l.Util.EventSource,this._xhrOnErrorHandler=function(t,r){return e._handleXhrError(t,r)},this._oauth=new l.Util.Oauth(t),this._uid=t.uid||null,this.authStep=this._oauth.step(),this._driver=null,this.authError=null,this._credentials=null,this.setupUrls()}return e.prototype.onXhr=null,e.prototype.onError=null,e.prototype.onAuthStepChange=null,e.prototype.authDriver=function(t){return this._driver=t,this},e.prototype.dropboxUid=function(){return this._uid},e.prototype.credentials=function(){return this._credentials||this._computeCredentials(),this._credentials},e.prototype.authenticate=function(e,r){var n,i,o,s,a,u=this;if(r||"function"!=typeof e||(r=e,e=null),n=e&&"interactive"in e?e.interactive:!0,!this._driver&&this.authStep!==t.DONE&&(l.AuthDriver.autoConfigure(this),!this._driver))throw new Error("OAuth driver auto-configuration failed. Call authDriver.");if(this.authStep===t.ERROR)throw new Error("Client got in an error state. Call reset() to reuse it!");return s=function(){return u.authStep=u._oauth.step(),u.authStep===t.ERROR&&(u.authError=u._oauth.error()),u._credentials=null,u.onAuthStepChange.dispatch(u),a()},o=function(){return u.authStep=t.ERROR,u._credentials=null,u.onAuthStepChange.dispatch(u),a()},i=null,a=function(){var e;if(i!==u.authStep&&(i=u.authStep,u._driver&&u._driver.onAuthStepChange))return u._driver.onAuthStepChange(u,a),void 0;switch(u.authStep){case t.RESET:return n?(u._driver.getStateParam&&u._driver.getStateParam(function(e){return u.client.authStep===t.RESET&&u._oauth.setAuthStateParam(e),s()}),u._oauth.setAuthStateParam(l.Util.Oauth.randomAuthStateParam()),s()):(r&&r(null,u),void 0);case t.PARAM_SET:return n?(e=u.authorizeUrl(),u._driver.doAuthorize(e,u._oauth.authStateParam(),u,function(t){return u._oauth.processRedirectParams(t),t.uid&&(u._uid=t.uid),s()})):(r&&r(null,u),void 0);case t.PARAM_LOADED:return u._driver.resumeAuthorize?u._driver.resumeAuthorize(u._oauth.authStateParam(),u,function(t){return u._oauth.processRedirectParams(t),t.uid&&(u._uid=t.uid),s()}):(u._oauth.setAuthStateParam(u._oauth.authStateParam()),s(),void 0);case t.AUTHORIZED:return u.getAccessToken(function(t,e){return t?(u.authError=t,o()):(u._oauth.processRedirectParams(e),u._uid=e.uid,s())});case t.DONE:r&&r(null,u);break;case t.SIGNED_OUT:return u.authStep=t.RESET,u.reset(),a();case t.ERROR:r&&r(u.authError,u)}},a(),this},e.prototype.isAuthenticated=function(){return this.authStep===t.DONE},e.prototype.signOut=function(e,r){var n,i,o=this;if(r||"function"!=typeof e||(r=e,e=null),n=e&&e.mustInvalidate,this.authStep!==t.DONE)throw new Error("This client doesn't have a user's token");return i=new l.Util.Xhr("POST",this._urls.signOut),i.signWithOauth(this._oauth),this._dispatchXhr(i,function(e){if(e)if(e.status===l.ApiError.INVALID_TOKEN)e=null;else if(n)return r&&r(e),void 0;return o.authStep=t.RESET,o.reset(),o.authStep=t.SIGNED_OUT,o.onAuthStepChange.dispatch(o),o._driver&&o._driver.onAuthStepChange?o._driver.onAuthStepChange(o,function(){return r?r(null):void 0}):r?r(null):void 0})},e.prototype.signOff=function(t,e){return this.signOut(t,e)},e.prototype.getAccountInfo=function(t,e){var r,n;return e||"function"!=typeof t||(e=t,t=null),r=!1,t&&t.httpCache&&(r=!0),n=new l.Util.Xhr("GET",this._urls.accountInfo),n.signWithOauth(this._oauth,r),this._dispatchXhr(n,function(t,r){return e(t,l.AccountInfo.parse(r),r)})},e.prototype.getUserInfo=function(t,e){return this.getAccountInfo(t,e)},e.prototype.readFile=function(t,e,r){var n,i,o,s,a,u,h;return r||"function"!=typeof e||(r=e,e=null),i={},u="text",s=null,n=!1,e&&(e.versionTag?i.rev=e.versionTag:e.rev&&(i.rev=e.rev),e.arrayBuffer?u="arraybuffer":e.blob?u="blob":e.buffer?u="buffer":e.binary&&(u="b"),e.length?(null!=e.start?(a=e.start,o=e.start+e.length-1):(a="",o=e.length),s="bytes="+a+"-"+o):null!=e.start&&(s="bytes="+e.start+"-"),e.httpCache&&(n=!0)),h=new l.Util.Xhr("GET",""+this._urls.getFile+"/"+this._urlEncodePath(t)),h.setParams(i).signWithOauth(this._oauth,n),h.setResponseType(u),s&&(s&&h.setHeader("Range",s),h.reportResponseHeaders()),this._dispatchXhr(h,function(t,e,n,i){var o;return o=i?l.Http.RangeInfo.parse(i["content-range"]):null,r(t,e,l.File.Stat.parse(n),o)})},e.prototype.writeFile=function(t,e,r,n){var i;return n||"function"!=typeof r||(n=r,r=null),i=l.Util.Xhr.canSendForms&&"object"==typeof e,i?this._writeFileUsingForm(t,e,r,n):this._writeFileUsingPut(t,e,r,n)},e.prototype._writeFileUsingForm=function(t,e,r,n){var i,o,s,a;return s=t.lastIndexOf("/"),-1===s?(i=t,t=""):(i=t.substring(s),t=t.substring(0,s)),o={file:i},r&&(r.noOverwrite&&(o.overwrite="false"),r.lastVersionTag?o.parent_rev=r.lastVersionTag:(r.parentRev||r.parent_rev)&&(o.parent_rev=r.parentRev||r.parent_rev)),a=new l.Util.Xhr("POST",""+this._urls.postFile+"/"+this._urlEncodePath(t)),a.setParams(o).signWithOauth(this._oauth).setFileField("file",i,e,"application/octet-stream"),delete o.file,this._dispatchXhr(a,function(t,e){return n?n(t,l.File.Stat.parse(e)):void 0})},e.prototype._writeFileUsingPut=function(t,e,r,n){var i,o;return i={},r&&(r.noOverwrite&&(i.overwrite="false"),r.lastVersionTag?i.parent_rev=r.lastVersionTag:(r.parentRev||r.parent_rev)&&(i.parent_rev=r.parentRev||r.parent_rev)),o=new l.Util.Xhr("POST",""+this._urls.putFile+"/"+this._urlEncodePath(t)),o.setBody(e).setParams(i).signWithOauth(this._oauth),this._dispatchXhr(o,function(t,e){return n?n(t,l.File.Stat.parse(e)):void 0})},e.prototype.resumableUploadStep=function(t,e,r){var n,i;return e?(n={offset:e.offset},e.tag&&(n.upload_id=e.tag)):n={offset:0},i=new l.Util.Xhr("POST",this._urls.chunkedUpload),i.setBody(t).setParams(n).signWithOauth(this._oauth),this._dispatchXhr(i,function(t,e){return t&&t.status===l.ApiError.INVALID_PARAM&&t.response&&t.response.upload_id&&t.response.offset?r(null,l.Http.UploadCursor.parse(t.response)):r(t,l.Http.UploadCursor.parse(e))})},e.prototype.resumableUploadFinish=function(t,e,r,n){var i,o;return n||"function"!=typeof r||(n=r,r=null),i={upload_id:e.tag},r&&(r.lastVersionTag?i.parent_rev=r.lastVersionTag:(r.parentRev||r.parent_rev)&&(i.parent_rev=r.parentRev||r.parent_rev),r.noOverwrite&&(i.overwrite="false")),o=new l.Util.Xhr("POST",""+this._urls.commitChunkedUpload+"/"+this._urlEncodePath(t)),o.setParams(i).signWithOauth(this._oauth),this._dispatchXhr(o,function(t,e){return n?n(t,l.File.Stat.parse(e)):void 0})},e.prototype.stat=function(t,e,r){var n,i,o;return r||"function"!=typeof e||(r=e,e=null),i={},n=!1,e&&(e.versionTag?i.rev=e.versionTag:e.rev&&(i.rev=e.rev),e.contentHash?i.hash=e.contentHash:e.hash&&(i.hash=e.hash),(e.removed||e.deleted)&&(i.include_deleted="true"),e.readDir&&(i.list="true",e.readDir!==!0&&(i.file_limit=e.readDir.toString())),e.cacheHash&&(i.hash=e.cacheHash),e.httpCache&&(n=!0)),i.include_deleted||(i.include_deleted="false"),i.list||(i.list="false"),o=new l.Util.Xhr("GET",""+this._urls.metadata+"/"+this._urlEncodePath(t)),o.setParams(i).signWithOauth(this._oauth,n),this._dispatchXhr(o,function(t,e){var n,i,o;return o=l.File.Stat.parse(e),n=(null!=e?e.contents:void 0)?function(){var t,r,n,o;for(n=e.contents,o=[],t=0,r=n.length;r>t;t++)i=n[t],o.push(l.File.Stat.parse(i));return o}():void 0,r(t,o,n)})},e.prototype.readdir=function(t,e,r){var n;return r||"function"!=typeof e||(r=e,e=null),n={readDir:!0},e&&(null!=e.limit&&(n.readDir=e.limit),e.versionTag?n.versionTag=e.versionTag:e.rev&&(n.versionTag=e.rev),e.contentHash?n.contentHash=e.contentHash:e.hash&&(n.contentHash=e.hash),(e.removed||e.deleted)&&(n.removed=e.removed||e.deleted),e.httpCache&&(n.httpCache=e.httpCache)),this.stat(t,n,function(t,e,n){var i,o;return i=n?function(){var t,e,r;for(r=[],t=0,e=n.length;e>t;t++)o=n[t],r.push(o.name);return r}():null,r(t,i,e,n)})},e.prototype.metadata=function(t,e,r){return this.stat(t,e,r)},e.prototype.makeUrl=function(t,e,r){var n,i,o,s,a,u=this;return r||"function"!=typeof e||(r=e,e=null),i=e&&(e["long"]||e.longUrl||e.downloadHack)?{short_url:"false"}:{},t=this._urlEncodePath(t),o=""+this._urls.shares+"/"+t,n=!1,s=!1,e&&(e.downloadHack?(n=!0,s=!0):e.download&&(n=!0,o=""+this._urls.media+"/"+t)),a=new l.Util.Xhr("POST",o).setParams(i).signWithOauth(this._oauth),this._dispatchXhr(a,function(t,e){return s&&(null!=e?e.url:void 0)&&(e.url=e.url.replace(u._authServer,u._downloadServer)),r(t,l.File.ShareUrl.parse(e,n))})},e.prototype.history=function(t,e,r){var n,i,o;return r||"function"!=typeof e||(r=e,e=null),i={},n=!1,e&&(null!=e.limit&&(i.rev_limit=e.limit),e.httpCache&&(n=!0)),o=new l.Util.Xhr("GET",""+this._urls.revisions+"/"+this._urlEncodePath(t)),o.setParams(i).signWithOauth(this._oauth,n),this._dispatchXhr(o,function(t,e){var n,i;return i=e?function(){var t,r,i;for(i=[],t=0,r=e.length;r>t;t++)n=e[t],i.push(l.File.Stat.parse(n));return i}():void 0,r(t,i)})},e.prototype.revisions=function(t,e,r){return this.history(t,e,r)},e.prototype.thumbnailUrl=function(t,e){var r;return r=this.thumbnailXhr(t,e),r.paramsToUrl().url},e.prototype.readThumbnail=function(t,e,r){var n,i;return r||"function"!=typeof e||(r=e,e=null),n="b",e&&(e.blob&&(n="blob"),e.arrayBuffer&&(n="arraybuffer"),e.buffer&&(n="buffer")),i=this.thumbnailXhr(t,e),i.setResponseType(n),this._dispatchXhr(i,function(t,e,n){return r(t,e,l.File.Stat.parse(n))})},e.prototype.thumbnailXhr=function(t,e){var r,n;return r={},e&&(e.format?r.format=e.format:e.png&&(r.format="png"),e.size&&(r.size=e.size)),n=new l.Util.Xhr("GET",""+this._urls.thumbnails+"/"+this._urlEncodePath(t)),n.setParams(r).signWithOauth(this._oauth)},e.prototype.revertFile=function(t,e,r){var n;return n=new l.Util.Xhr("POST",""+this._urls.restore+"/"+this._urlEncodePath(t)),n.setParams({rev:e}).signWithOauth(this._oauth),this._dispatchXhr(n,function(t,e){return r?r(t,l.File.Stat.parse(e)):void 0})},e.prototype.restore=function(t,e,r){return this.revertFile(t,e,r)},e.prototype.findByName=function(t,e,r,n){var i,o,s;return n||"function"!=typeof r||(n=r,r=null),o={query:e},i=!1,r&&(null!=r.limit&&(o.file_limit=r.limit),(r.removed||r.deleted)&&(o.include_deleted=!0),r.httpCache&&(i=!0)),s=new l.Util.Xhr("GET",""+this._urls.search+"/"+this._urlEncodePath(t)),s.setParams(o).signWithOauth(this._oauth,i),this._dispatchXhr(s,function(t,e){var r,i;return i=e?function(){var t,n,i;for(i=[],t=0,n=e.length;n>t;t++)r=e[t],i.push(l.File.Stat.parse(r));return i}():void 0,n(t,i)})},e.prototype.search=function(t,e,r,n){return this.findByName(t,e,r,n)},e.prototype.makeCopyReference=function(t,e){var r;return r=new l.Util.Xhr("GET",""+this._urls.copyRef+"/"+this._urlEncodePath(t)),r.signWithOauth(this._oauth),this._dispatchXhr(r,function(t,r){return e(t,l.File.CopyReference.parse(r))})},e.prototype.copyRef=function(t,e){return this.makeCopyReference(t,e)},e.prototype.pullChanges=function(t,e){var r,n;return e||"function"!=typeof t||(e=t,t=null),r=t?t.cursorTag?{cursor:t.cursorTag}:{cursor:t}:{},n=new l.Util.Xhr("POST",this._urls.delta),n.setParams(r).signWithOauth(this._oauth),this._dispatchXhr(n,function(t,r){return e(t,l.Http.PulledChanges.parse(r))})},e.prototype.delta=function(t,e){return this.pullChanges(t,e)},e.prototype.pollForChanges=function(t,e,r){var n,i;return r||"function"!=typeof e||(r=e,e=null),n=t.cursorTag?{cursor:t.cursorTag}:{cursor:t},e&&"timeout"in e&&(n.timeout=e.timeout),i=new l.Util.Xhr("GET",this._urls.longpollDelta),i.setParams(n),this._dispatchXhr(i,function(t,e){var n;if("string"==typeof e)try{e=JSON.parse(e)}catch(i){n=i,e=null}return r(t,l.Http.PollResult.parse(e))})},e.prototype.mkdir=function(t,e){var r;return r=new l.Util.Xhr("POST",this._urls.fileopsCreateFolder),r.setParams({root:"auto",path:this._normalizePath(t)}).signWithOauth(this._oauth),this._dispatchXhr(r,function(t,r){return e?e(t,l.File.Stat.parse(r)):void 0})},e.prototype.remove=function(t,e){var r;return r=new l.Util.Xhr("POST",this._urls.fileopsDelete),r.setParams({root:"auto",path:this._normalizePath(t)}).signWithOauth(this._oauth),this._dispatchXhr(r,function(t,r){return e?e(t,l.File.Stat.parse(r)):void 0})},e.prototype.unlink=function(t,e){return this.remove(t,e)},e.prototype["delete"]=function(t,e){return this.remove(t,e)},e.prototype.copy=function(t,e,r){var n,i,o;return r||"function"!=typeof n||(r=n,n=null),i={root:"auto",to_path:this._normalizePath(e)},t instanceof l.File.CopyReference?i.from_copy_ref=t.tag:i.from_path=this._normalizePath(t),o=new l.Util.Xhr("POST",this._urls.fileopsCopy),o.setParams(i).signWithOauth(this._oauth),this._dispatchXhr(o,function(t,e){return r?r(t,l.File.Stat.parse(e)):void 0})},e.prototype.move=function(t,e,r){var n,i;return r||"function"!=typeof n||(r=n,n=null),i=new l.Util.Xhr("POST",this._urls.fileopsMove),i.setParams({root:"auto",from_path:this._normalizePath(t),to_path:this._normalizePath(e)}).signWithOauth(this._oauth),this._dispatchXhr(i,function(t,e){return r?r(t,l.File.Stat.parse(e)):void 0})},e.prototype.appInfo=function(t,e){var r;return e||"function"!=typeof t||(e=t,t=this._oauth.credentials().key),r=new l.Util.Xhr("GET",this._urls.appsInfo),r.setParams({app_key:t}),this._dispatchXhr(r,function(r,n){return e(r,l.Http.AppInfo.parse(n,t))})},e.prototype.isAppDeveloper=function(t,e,r){var n;return"object"==typeof t&&"uid"in t&&(t=t.uid),r||"function"!=typeof e?"object"==typeof e&&"key"in e&&(e=e.key):(r=e,e=this._oauth.credentials().key),n=new l.Util.Xhr("GET",this._urls.appsCheckDeveloper),n.setParams({app_key:e,uid:t}),this._dispatchXhr(n,function(t,e){return e?r(t,e.is_developer):r(t)})},e.prototype.hasOauthRedirectUri=function(t,e,r){var n;return r||"function"!=typeof e?"object"==typeof e&&"key"in e&&(e=e.key):(r=e,e=this._oauth.credentials().key),n=new l.Util.Xhr("GET",this._urls.appsCheckRedirectUri),n.setParams({app_key:e,redirect_uri:t}),this._dispatchXhr(n,function(t,e){return e?r(t,e.has_redirect_uri):r(t)})},e.prototype.reset=function(){var t;return this._uid=null,this._oauth.reset(),t=this.authStep,this.authStep=this._oauth.step(),t!==this.authStep&&this.onAuthStepChange.dispatch(this),this.authError=null,this._credentials=null,this},e.prototype.setCredentials=function(t){var e;return e=this.authStep,this._oauth.setCredentials(t),this.authStep=this._oauth.step(),this._uid=t.uid||null,this.authError=null,this._credentials=null,e!==this.authStep&&this.onAuthStepChange.dispatch(this),this},e.prototype.appHash=function(){return this._oauth.appHash()},e.prototype.setupUrls=function(){return this._apiServer=this._chooseApiServer(),this._urls={authorize:""+this._authServer+"/1/oauth2/authorize",token:""+this._apiServer+"/1/oauth2/token",signOut:""+this._apiServer+"/1/unlink_access_token",accountInfo:""+this._apiServer+"/1/account/info",getFile:""+this._fileServer+"/1/files/auto",postFile:""+this._fileServer+"/1/files/auto",putFile:""+this._fileServer+"/1/files_put/auto",metadata:""+this._apiServer+"/1/metadata/auto",delta:""+this._apiServer+"/1/delta",longpollDelta:""+this._notifyServer+"/1/longpoll_delta",revisions:""+this._apiServer+"/1/revisions/auto",restore:""+this._apiServer+"/1/restore/auto",search:""+this._apiServer+"/1/search/auto",shares:""+this._apiServer+"/1/shares/auto",media:""+this._apiServer+"/1/media/auto",copyRef:""+this._apiServer+"/1/copy_ref/auto",thumbnails:""+this._fileServer+"/1/thumbnails/auto",chunkedUpload:""+this._fileServer+"/1/chunked_upload",commitChunkedUpload:""+this._fileServer+"/1/commit_chunked_upload/auto",fileopsCopy:""+this._apiServer+"/1/fileops/copy",fileopsCreateFolder:""+this._apiServer+"/1/fileops/create_folder",fileopsDelete:""+this._apiServer+"/1/fileops/delete",fileopsMove:""+this._apiServer+"/1/fileops/move",appsInfo:""+this._apiServer+"/1/apps/info",appsCheckDeveloper:""+this._apiServer+"/1/apps/check_developer",appsCheckRedirectUri:""+this._apiServer+"/1/apps/check_redirect_uri"}
},e.prototype._chooseApiServer=function(){var t,e;return e=Math.floor(Math.random()*(this._maxApiServer+1)),t=0===e?"":e.toString(),this._serverRoot.replace("$",t)},e.prototype.authStep=null,e.ERROR=0,e.RESET=1,e.PARAM_SET=2,e.PARAM_LOADED=3,e.AUTHORIZED=4,e.DONE=5,e.SIGNED_OUT=6,e.prototype._urlEncodePath=function(t){return l.Util.Xhr.urlEncodeValue(this._normalizePath(t)).replace(/%2F/gi,"/")},e.prototype._normalizePath=function(t){var e;if("/"===t.substring(0,1)){for(e=1;"/"===t.substring(e,e+1);)e+=1;return t.substring(e)}return t},e.prototype.authorizeUrl=function(){var t;return t=this._oauth.authorizeUrlParams(this._driver.authType(),this._driver.url()),this._urls.authorize+"?"+l.Util.Xhr.urlEncode(t)},e.prototype.getAccessToken=function(t){var e,r;return e=this._oauth.accessTokenParams(this._driver.url()),r=new l.Util.Xhr("POST",this._urls.token).setParams(e).addOauthParams(this._oauth),this._dispatchXhr(r,function(e,r){return e&&e.status===l.ApiError.INVALID_PARAM&&e.response&&e.response.error&&(e=new l.AuthError(e.response)),t(e,r)})},e.prototype._dispatchXhr=function(t,e){var r;return t.setCallback(e),t.onError=this._xhrOnErrorHandler,t.prepare(),r=t.xhr,this.onXhr.dispatch(t)&&t.send(),r},e.prototype._handleXhrError=function(e,r){var n=this;return e.status===l.ApiError.INVALID_TOKEN&&this.authStep===t.DONE&&(this.authError=e,this.authStep=t.ERROR,this.onAuthStepChange.dispatch(this),this._driver&&this._driver.onAuthStepChange)?(this._driver.onAuthStepChange(this,function(){return n.onError.dispatch(e),r(e)}),null):(this.onError.dispatch(e),r(e),void 0)},e.prototype._defaultServerRoot=function(){return"https://api$.dropbox.com"},e.prototype._defaultAuthServer=function(){return this._serverRoot.replace("api$","www")},e.prototype._defaultFileServer=function(){return this._serverRoot.replace("api$","api-content")},e.prototype._defaultDownloadServer=function(){return"https://dl.dropboxusercontent.com"},e.prototype._defaultNotifyServer=function(){return this._serverRoot.replace("api$","api-notify")},e.prototype._defaultMaxApiServer=function(){return 30},e.prototype._computeCredentials=function(){var t;t=this._oauth.credentials(),this._uid&&(t.uid=this._uid),this._serverRoot!==this._defaultServerRoot()&&(t.server=this._serverRoot),this._maxApiServer!==this._defaultMaxApiServer()&&(t.maxApiServer=this._maxApiServer),this._authServer!==this._defaultAuthServer()&&(t.authServer=this._authServer),this._fileServer!==this._defaultFileServer()&&(t.fileServer=this._fileServer),this._downloadServer!==this._defaultDownloadServer()&&(t.downloadServer=this._downloadServer),this._notifyServer!==this._defaultNotifyServer()&&(t.notifyServer=this._notifyServer),this._credentials=t},e}(),t=l.Client,l.File.ShareUrl=function(){function t(t,e){this.url=t.url,this.expiresAt=l.Util.parseDate(t.expires),this.isDirect=e===!0?!0:e===!1?!1:"direct"in t?t.direct:Date.now()-this.expiresAt<=864e5,this.isPreview=!this.isDirect,this._json=null}return t.parse=function(t,e){return t&&"object"==typeof t?new l.File.ShareUrl(t,e):t},t.prototype.url=null,t.prototype.expiresAt=null,t.prototype.isDirect=null,t.prototype.isPreview=null,t.prototype.json=function(){return this._json||(this._json={url:this.url,expires:this.expiresAt.toUTCString(),direct:this.isDirect})},t}(),l.File.CopyReference=function(){function t(t){"object"==typeof t?(this.tag=t.copy_ref,this.expiresAt=l.Util.parseDate(t.expires),this._json=t):(this.tag=t,this.expiresAt=new Date(1e3*Math.ceil(Date.now()/1e3)),this._json=null)}return t.parse=function(t){return!t||"object"!=typeof t&&"string"!=typeof t?t:new l.File.CopyReference(t)},t.prototype.tag=null,t.prototype.expiresAt=null,t.prototype.json=function(){return this._json||(this._json={copy_ref:this.tag,expires:this.expiresAt.toUTCString()})},t}(),l.File.Stat=function(){function t(t){var e,r,n,i;switch(this._json=t,this.path=t.path,"/"!==this.path.substring(0,1)&&(this.path="/"+this.path),e=this.path.length-1,e>=0&&"/"===this.path.substring(e)&&(this.path=this.path.substring(0,e)),r=this.path.lastIndexOf("/"),this.name=this.path.substring(r+1),this.isFolder=t.is_dir||!1,this.isFile=!this.isFolder,this.isRemoved=t.is_deleted||!1,this.typeIcon=t.icon,this.modifiedAt=(null!=(n=t.modified)?n.length:void 0)?l.Util.parseDate(t.modified):null,this.clientModifiedAt=(null!=(i=t.client_mtime)?i.length:void 0)?l.Util.parseDate(t.client_mtime):null,t.root){case"dropbox":this.inAppFolder=!1;break;case"app_folder":this.inAppFolder=!0;break;default:this.inAppFolder=null}this.size=t.bytes||0,this.humanSize=t.size||"",this.hasThumbnail=t.thumb_exists||!1,this.versionTag=t.rev,this.contentHash=t.hash||null,this.mimeType=this.isFolder?t.mime_type||"inode/directory":t.mime_type||"application/octet-stream"}return t.parse=function(t){return t&&"object"==typeof t?new l.File.Stat(t):t},t.prototype.path=null,t.prototype.name=null,t.prototype.inAppFolder=null,t.prototype.isFolder=null,t.prototype.isFile=null,t.prototype.isRemoved=null,t.prototype.typeIcon=null,t.prototype.versionTag=null,t.prototype.contentHash=null,t.prototype.mimeType=null,t.prototype.size=null,t.prototype.humanSize=null,t.prototype.hasThumbnail=null,t.prototype.modifiedAt=null,t.prototype.clientModifiedAt=null,t.prototype.json=function(){return this._json},t}(),l.Http.AppInfo=function(){function t(t,e){var r;this.name=t.name,this._icons=t.icons,r=t.permissions||{},this.canUseDatastores=!!r.datastores,this.canUseFiles=!!r.files,this.canUseFullDropbox="full_dropbox"===r.files,this.hasAppFolder="app_folder"===r.files,this.key=e?e:t.key||null}return t.parse=function(t,e){return t?new l.Http.AppInfo(t,e):t},t.prototype.name=void 0,t.prototype.key=void 0,t.prototype.canUseDatastores=void 0,t.prototype.canUseFiles=void 0,t.prototype.hasAppFolder=void 0,t.prototype.canUseFullDropbox=void 0,t.prototype.icon=function(t,e){return e||(e=t),this._icons[""+t+"x"+e]||null},t.ICON_SMALL=64,t.ICON_LARGE=256,t}(),l.Http.PulledChanges=function(){function t(t){var e;this.blankSlate=t.reset||!1,this.cursorTag=t.cursor,this.shouldPullAgain=t.has_more,this.shouldBackOff=!this.shouldPullAgain,this.changes=t.cursor&&t.cursor.length?function(){var r,n,i,o;for(i=t.entries,o=[],r=0,n=i.length;n>r;r++)e=i[r],o.push(l.Http.PulledChange.parse(e));return o}():[]}return t.parse=function(t){return t&&"object"==typeof t?new l.Http.PulledChanges(t):t},t.prototype.blankSlate=void 0,t.prototype.cursorTag=void 0,t.prototype.changes=void 0,t.prototype.shouldPullAgain=void 0,t.prototype.shouldBackOff=void 0,t.prototype.cursor=function(){return this.cursorTag},t}(),l.Http.PulledChange=function(){function t(t){this.path=t[0],this.stat=l.File.Stat.parse(t[1]),this.stat?this.wasRemoved=!1:(this.stat=null,this.wasRemoved=!0)}return t.parse=function(t){return t&&"object"==typeof t?new l.Http.PulledChange(t):t},t.prototype.path=void 0,t.prototype.wasRemoved=void 0,t.prototype.stat=void 0,t}(),l.Http.PollResult=function(){function t(t){this.hasChanges=t.changes,this.retryAfter=t.backoff||0}return t.parse=function(t){return t?new l.Http.PollResult(t):t},t.prototype.hasChanges=void 0,t.prototype.retryAfter=void 0,t}(),l.Http.RangeInfo=function(){function t(t){var e;(e=/^bytes (\d*)-(\d*)\/(.*)$/.exec(t))?(this.start=parseInt(e[1]),this.end=parseInt(e[2]),this.size="*"===e[3]?null:parseInt(e[3])):(this.start=0,this.end=0,this.size=null)}return t.parse=function(t){return"string"==typeof t?new l.Http.RangeInfo(t):t},t.prototype.start=null,t.prototype.size=null,t.prototype.end=null,t}(),l.Http.UploadCursor=function(){function t(t){this.replace(t)}return t.parse=function(t){return!t||"object"!=typeof t&&"string"!=typeof t?t:new l.Http.UploadCursor(t)},t.prototype.tag=null,t.prototype.offset=null,t.prototype.expiresAt=null,t.prototype.json=function(){return this._json||(this._json={upload_id:this.tag,offset:this.offset,expires:this.expiresAt.toUTCString()})},t.prototype.replace=function(t){return"object"==typeof t?(this.tag=t.upload_id||null,this.offset=t.offset||0,this.expiresAt=l.Util.parseDate(t.expires)||Date.now(),this._json=t):(this.tag=t||null,this.offset=0,this.expiresAt=new Date(1e3*Math.floor(Date.now()/1e3)),this._json=null),this},t}(),"function"==typeof l.Env.global.atob&&"function"==typeof l.Env.global.btoa?(l.Util.atob=function(t){return l.Env.global.atob(t)},l.Util.btoa=function(t){return l.Env.global.btoa(t)}):l.Env.global.require&&l.Env.global.Buffer?(l.Util.atob=function(t){var e,r;return e=new Buffer(t,"base64"),function(){var t,n,i;for(i=[],r=t=0,n=e.length;n>=0?n>t:t>n;r=n>=0?++t:--t)i.push(String.fromCharCode(e[r]));return i}().join("")},l.Util.btoa=function(t){var e,r;return e=new Buffer(function(){var e,n,i;for(i=[],r=e=0,n=t.length;n>=0?n>e:e>n;r=n>=0?++e:--e)i.push(t.charCodeAt(r));return i}()),e.toString("base64")}):!function(){var t,e,r;return e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r=function(t,r,n){var i,o;for(o=3-r,t<<=8*o,i=3;i>=o;)n.push(e.charAt(63&t>>6*i)),i-=1;for(i=r;3>i;)n.push("="),i+=1;return null},t=function(t,e,r){var n,i;for(i=4-e,t<<=6*i,n=2;n>=i;)r.push(String.fromCharCode(255&t>>8*n)),n-=1;return null},l.Util.btoa=function(t){var e,n,i,o,s,a;for(o=[],e=0,n=0,i=s=0,a=t.length;a>=0?a>s:s>a;i=a>=0?++s:--s)e=e<<8|t.charCodeAt(i),n+=1,3===n&&(r(e,n,o),e=n=0);return n>0&&r(e,n,o),o.join("")},l.Util.atob=function(r){var n,i,o,s,a,u,h;for(a=[],n=0,o=0,s=u=0,h=r.length;(h>=0?h>u:u>h)&&(i=r.charAt(s),"="!==i);s=h>=0?++u:--u)n=n<<6|e.indexOf(i),o+=1,4===o&&(t(n,o,a),n=o=0);return o>0&&t(n,o,a),a.join("")}}(),function(){var t,e,r,n,i,o,s,a,u,h,p;if(l.Util.hmac=function(e,n){return t(r(u(e),u(n),e.length,n.length))},l.Util.sha1=function(e){return t(i(u(e),e.length))},l.Util.sha256=function(e){return t(o(u(e),e.length))},l.Env.require)try{e=l.Env.require("crypto"),e.createHmac&&e.createHash&&(l.Util.hmac=function(t,r){var n;return n=e.createHmac("sha1",r),n.update(t),n.digest("base64")},l.Util.sha1=function(t){var r;return r=e.createHash("sha1"),r.update(t),r.digest("base64")},l.Util.sha256=function(t){var r;return r=e.createHash("sha256"),r.update(t),r.digest("base64")})}catch(c){n=c}return r=function(t,e,r,n){var o,s,a,u;return e.length>16&&(e=i(e,n)),a=function(){var t,r;for(r=[],s=t=0;16>t;s=++t)r.push(909522486^e[s]);return r}(),u=function(){var t,r;for(r=[],s=t=0;16>t;s=++t)r.push(1549556828^e[s]);return r}(),o=i(a.concat(t),64+r),i(u.concat(o),84)},i=function(t,e){var r,n,i,o,s,a,u,h,l,p,c,d,f,_,y,v,m;for(t[e>>2]|=1<<31-((3&e)<<3),t[(e+8>>6<<4)+15]=e<<3,y=Array(80),r=1732584193,i=4023233417,s=2562383102,u=271733878,l=3285377520,c=0,f=t.length;f>c;){for(n=r,o=i,a=s,h=u,p=l,d=m=0;80>m;d=++m)16>d?y[d]=0|t[c+d<<2>>2]:(_=(0|y[d-3<<2>>2])^(0|y[d-8<<2>>2])^(0|y[d-14<<2>>2])^(0|y[d-16<<2>>2]),y[d]=_<<1|_>>>31),v=0|(0|(r<<5|r>>>27)+l)+y[d<<2>>2],v=20>d?0|v+(0|(i&s|~i&u)+1518500249):40>d?0|v+(0|(i^s^u)+1859775393):60>d?0|(0|v+((i&s|i&u|s&u)-1894007588)):0|v+(0|(i^s^u)-899497514),l=u,u=s,s=i<<30|i>>>2,i=r,r=v;r=0|n+r,i=0|o+i,s=0|a+s,u=0|h+u,l=0|p+l,c=0|c+16}return[r,i,s,u,l]},o=function(t,e){var r,n,i,o,u,h,l,p,c,d,f,_,y,v,m,g,w,S,b,A,E,U,C,O,R,P,T,x,k,D,F,B;for(t[e>>2]|=1<<31-((3&e)<<3),t[(e+8>>6<<4)+15]=e<<3,k=Array(80),r=s[0],i=s[1],u=s[2],p=s[3],d=s[4],_=s[5],v=s[6],A=s[7],U=0,O=t.length;O>U;){for(n=r,o=i,h=u,c=p,f=d,y=_,m=v,E=A,C=B=0;64>B;C=++B)16>C?x=k[C]=0|t[U+C<<2>>2]:(w=0|k[C-15<<2>>2],g=(w<<25|w>>>7)^(w<<14|w>>>18)^w>>>3,b=0|k[C-2<<2>>2],S=(b<<15|b>>>17)^(b<<13|b>>>19)^b>>>10,x=k[C]=0|(0|g+(0|k[C-7<<2>>2]))+(0|S+(0|k[C-16<<2>>2]))),l=d&_^~d&v,R=r&i^r&u^i&u,P=(r<<30|r>>>2)^(r<<19|r>>>13)^(r<<10|r>>>22),T=(d<<26|d>>>6)^(d<<21|d>>>11)^(d<<7|d>>>25),D=0|(0|(0|A+T)+(0|l+x))+(0|a[C<<2>>2]),F=0|P+R,A=v,v=_,_=d,d=0|p+D,p=u,u=i,i=r,r=0|D+F;r=0|n+r,i=0|o+i,u=0|h+u,p=0|c+p,d=0|f+d,_=0|y+_,v=0|m+v,A=0|E+A,U+=16}return[r,i,u,p,d,_,v,A]},h=function(t){return 0>t&&(t=4*(1<<30)+t),t.toString(16)},s=[],a=[],function(){var t,e,r,n,i,o,u;for(e=function(t){return 0|4294967296*(t-Math.floor(t))},i=2,u=[],r=o=0;64>o;r=++o){for(;;){for(n=!0,t=2;i>=t*t;){if(0===i%t){n=!1;break}t+=1}if(n)break;i+=1}8>r&&(s[r]=e(Math.pow(i,.5))),a[r]=e(Math.pow(i,1/3)),u.push(i+=1)}return u}(),t=function(t){var e,r,n,i,o;for(i="",e=0,n=4*t.length;n>e;)r=e,o=(255&t[r>>2]>>(3-(3&r)<<3))<<16,r+=1,o|=(255&t[r>>2]>>(3-(3&r)<<3))<<8,r+=1,o|=255&t[r>>2]>>(3-(3&r)<<3),i+=p[63&o>>18],i+=p[63&o>>12],e+=1,i+=e>=n?"=":p[63&o>>6],e+=1,i+=e>=n?"=":p[63&o],e+=1;return i},p="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",u=function(t){var e,r,n,i,o;for(e=[],n=255,r=i=0,o=t.length;o>=0?o>i:i>o;r=o>=0?++i:--i)e[r>>2]|=(t.charCodeAt(r)&n)<<(3-(3&r)<<3);return e}}(),l.Util.Oauth=function(){function t(t){this._id=null,this._secret=null,this._stateParam=null,this._authCode=null,this._token=null,this._tokenKey=null,this._tokenKid=null,this._error=null,this._appHash=null,this._loaded=null,this.setCredentials(t)}return t.prototype.setCredentials=function(t){if(t.key)this._id=t.key;else{if(!t.token)throw new Error("No API key supplied");this._id=null}return this._secret=t.secret||null,this._appHash=null,this._error=null,this._loaded=!0,this.reset(),t.token?(this._token=t.token,t.tokenKey&&(this._tokenKey=t.tokenKey,this._tokenKid=t.tokenKid)):t.oauthCode?this._authCode=t.oauthCode:t.oauthStateParam&&(this._stateParam=t.oauthStateParam),this},t.prototype.credentials=function(){var t;return t={},this._id&&(t.key=this._id),this._secret&&(t.secret=this._secret),null!==this._token?(t.token=this._token,this._tokenKey&&(t.tokenKey=this._tokenKey,t.tokenKid=this._tokenKid)):null!==this._authCode?t.oauthCode=this._authCode:null!==this._stateParam&&(t.oauthStateParam=this._stateParam),t},t.prototype.step=function(){return null!==this._token?l.Client.DONE:null!==this._authCode?l.Client.AUTHORIZED:null!==this._stateParam?this._loaded?l.Client.PARAM_LOADED:l.Client.PARAM_SET:null!==this._error?l.Client.ERROR:l.Client.RESET},t.prototype.setAuthStateParam=function(t){if(null===this._id)throw new Error("No API key supplied, cannot do authorization");return this.reset(),this._loaded=!1,this._stateParam=t,this},t.prototype.checkAuthStateParam=function(t){return this._stateParam===t&&null!==this._stateParam},t.prototype.authStateParam=function(){return this._stateParam},t.prototype.error=function(){return this._error},t.prototype.processRedirectParams=function(t){var e;if(t.error){if(null===this._id)throw new Error("No API key supplied, cannot process errors");return this.reset(),this._error=new l.AuthError(t),!0}if(t.code){if(null===this._id)throw new Error("No API key supplied, cannot do Authorization Codes");return this.reset(),this._loaded=!1,this._authCode=t.code,!0}if(e=t.token_type){if(e=e.toLowerCase(),"bearer"!==e&&"mac"!==e)throw new Error("Unimplemented token type "+e);if(this.reset(),this._loaded=!1,"mac"===e){if("hmac-sha-1"!==t.mac_algorithm)throw new Error("Unimplemented MAC algorithms "+t.mac_algorithm);this._tokenKey=t.mac_key,this._tokenKid=t.kid}return this._token=t.access_token,!0}return!1},t.prototype.authHeader=function(t,e,r){var n,i;return null===this._token?(i=null===this._secret?l.Util.btoa(""+this._id+":"):l.Util.btoa(""+this._id+":"+this._secret),"Basic "+i):null===this._tokenKey?"Bearer "+this._token:(n=this.macParams(t,e,r),"MAC kid="+n.kid+" ts="+n.ts+" "+("access_token="+this._token+" mac="+n.mac))},t.prototype.addAuthParams=function(t,e,r){var n;return null===this._token?(r.client_id=this._id,null!==this._secret&&(r.client_secret=this._secret)):(null!==this._tokenKey&&(n=this.macParams(t,e,r),r.kid=n.kid,r.ts=n.ts,r.mac=n.mac),r.access_token=this._token),r},t.prototype.authorizeUrlParams=function(t,e){var r;if("token"!==t&&"code"!==t)throw new Error("Unimplemented /authorize response type "+t);return r={client_id:this._id,state:this._stateParam,response_type:t},e&&(r.redirect_uri=e),r},t.prototype.accessTokenParams=function(t){var e;return e={grant_type:"authorization_code",code:this._authCode},t&&(e.redirect_uri=t),e},t.queryParamsFromUrl=function(t){var e,r,n,i,o,s,a,u,h,l;if(i=/^[^?#]+(\?([^\#]*))?(\#(.*))?$/.exec(t),!i)return{};for(a=i[2]||"","/"===a.substring(0,1)&&(a=a.substring(1)),e=i[4]||"",r=e.indexOf("?"),-1!==r&&(e=e.substring(r+1)),"/"===e.substring(0,1)&&(e=e.substring(1)),s={},l=a.split("&").concat(e.split("&")),u=0,h=l.length;h>u;u++)n=l[u],o=n.indexOf("="),-1!==o&&(s[decodeURIComponent(n.substring(0,o))]=decodeURIComponent(n.substring(o+1)));return s},t.prototype.macParams=function(t,e,r){var n,i;return n={kid:this._tokenKid,ts:l.Util.Oauth.timestamp()},i=t.toUpperCase()+"&"+l.Util.Xhr.urlEncodeValue(e)+"&"+l.Util.Xhr.urlEncodeValue(l.Util.Xhr.urlEncode(r)),n.mac=l.Util.hmac(i,this._tokenKey),n},t.prototype.appHash=function(){return this._appHash?this._appHash:this._appHash=l.Util.sha1("oauth2-"+this._id).replace(/[\/+=]/g,"")},t.prototype.reset=function(){return this._stateParam=null,this._authCode=null,this._token=null,this._tokenKey=null,this._tokenKid=null,this._error=null,this},t.timestamp=function(){return Math.floor(Date.now()/1e3)},t.randomAuthStateParam=function(){return["oas",Date.now().toString(36),Math.random().toString(36)].join("_")},t}(),null==Date.now&&(l.Util.Oauth.timestamp=function(){return Math.floor((new Date).getTime()/1e3)}),2274814865e3===new Date("Fri, 31 Jan 2042 21:01:05 +0000").valueOf()?l.Util.parseDate=function(t){return new Date(t)}:2274814865e3===Date.parse("Fri, 31 Jan 2042 21:01:05 +0000")?l.Util.parseDate=function(t){return new Date(Date.parse(t))}:!function(){var t,e;return e=/^\w+\, (\d+) (\w+) (\d+) (\d+)\:(\d+)\:(\d+) (\+\d+|UTC|GMT)$/,t={Jan:0,Feb:1,Mar:2,Apr:3,May:4,Jun:5,Jul:6,Aug:7,Sep:8,Oct:9,Nov:10,Dec:11},l.Util.parseDate=function(r){var n;return(n=e.exec(r))?new Date(Date.UTC(parseInt(n[3]),t[n[2]],parseInt(n[1]),parseInt(n[4]),parseInt(n[5]),parseInt(n[6]),0)):0/0}}(),l.Env.global.XMLHttpRequest?(!l.Env.global.XDomainRequest||"withCredentials"in new XMLHttpRequest?(a=XMLHttpRequest,s=!1,i="undefined"!=typeof FormData&&-1===navigator.userAgent.indexOf("Firefox")):(a=XDomainRequest,s=!0,i=!1),o=!0):(a=l.Env.require("xhr2"),s=!1,i=!1,o=!1),l.Env.global.Uint8Array)if(Object.getPrototypeOf?n=Object.getPrototypeOf(Object.getPrototypeOf(new Uint8Array(0))).constructor:Object.__proto__&&(n=new Uint8Array(0).__proto__.__proto__.constructor),l.Env.global.Blob){try{!function(){return 2===new Blob([new Uint8Array(2)]).size?(h=!0,u=!0):(u=!1,h=2===new Blob([new ArrayBuffer(2)]).size)}()}catch(f){u=!1,h=!1,l.Env.global.WebKitBlobBuilder&&-1!==navigator.userAgent.indexOf("Android")&&(i=!1)}n===Object&&(u=!1)}else h=!1,u=!0;else n=null,h=!1,u=!1;l.Util.Xhr=function(){function t(t,e){this.method=t,this.isGet="GET"===this.method,this.url=e,this.wantHeaders=!1,this.headers={},this.params=null,this.body=null,this.preflight=!(this.isGet||"POST"===this.method),this.signed=!1,this.completed=!1,this.responseType=null,this.callback=null,this.xhr=null,this.onError=null}return t.Request=a,t.ieXdr=s,t.canSendForms=i,t.doesPreflight=o,t.ArrayBufferView=n,t.sendArrayBufferView=u,t.wrapBlob=h,t.prototype.xhr=null,t.prototype.onError=null,t.prototype.setParams=function(t){if(this.signed)throw new Error("setParams called after addOauthParams or addOauthHeader");if(this.params)throw new Error("setParams cannot be called twice");return this.params=t,this},t.prototype.setCallback=function(t){return this.callback=t,this},t.prototype.signWithOauth=function(t,e){return l.Util.Xhr.ieXdr?this.addOauthParams(t):this.preflight||!l.Util.Xhr.doesPreflight?this.addOauthHeader(t):this.isGet&&e?this.addOauthHeader(t):this.addOauthParams(t)},t.prototype.addOauthParams=function(t){if(this.signed)throw new Error("Request already has an OAuth signature");return this.params||(this.params={}),t.addAuthParams(this.method,this.url,this.params),this.signed=!0,this},t.prototype.addOauthHeader=function(t){if(this.signed)throw new Error("Request already has an OAuth signature");return this.params||(this.params={}),this.signed=!0,this.setHeader("Authorization",t.authHeader(this.method,this.url,this.params))},t.prototype.setBody=function(t){if(this.isGet)throw new Error("setBody cannot be called on GET requests");if(null!==this.body)throw new Error("Request already has a body");return"string"==typeof t||"undefined"!=typeof FormData&&t instanceof FormData||(this.headers["Content-Type"]="application/octet-stream",this.preflight=!0),this.body=t,this},t.prototype.setResponseType=function(t){return this.responseType=t,this},t.prototype.setHeader=function(t,e){var r;if(this.headers[t])throw r=this.headers[t],new Error("HTTP header "+t+" already set to "+r);if("Content-Type"===t)throw new Error("Content-Type is automatically computed based on setBody");return this.preflight=!0,this.headers[t]=e,this},t.prototype.reportResponseHeaders=function(){return this.wantHeaders=!0},t.prototype.setFileField=function(t,e,r,n){var i,o,s,a,u;if(null!==this.body)throw new Error("Request already has a body");if(this.isGet)throw new Error("setFileField cannot be called on GET requests");if("object"==typeof r){"undefined"!=typeof ArrayBuffer&&(r instanceof ArrayBuffer?l.Util.Xhr.sendArrayBufferView&&(r=new Uint8Array(r)):!l.Util.Xhr.sendArrayBufferView&&0===r.byteOffset&&r.buffer instanceof ArrayBuffer&&(r=r.buffer)),n||(n="application/octet-stream");try{r=new Blob([r],{type:n})}catch(h){o=h,window.WebKitBlobBuilder&&(a=new WebKitBlobBuilder,a.append(r),(i=a.getBlob(n))&&(r=i))}"undefined"!=typeof File&&r instanceof File&&(r=new Blob([r],{type:r.type})),u=r instanceof Blob}else u=!1;return u?(this.body=new FormData,this.body.append(t,r,e)):(n||(n="application/octet-stream"),s=this.multipartBoundary(),this.headers["Content-Type"]="multipart/form-data; boundary="+s,this.body=["--",s,"\r\n",'Content-Disposition: form-data; name="',t,'"; filename="',e,'"\r\n',"Content-Type: ",n,"\r\n","Content-Transfer-Encoding: binary\r\n\r\n",r,"\r\n","--",s,"--","\r\n"].join(""))},t.prototype.multipartBoundary=function(){return[Date.now().toString(36),Math.random().toString(36)].join("----")},t.prototype.paramsToUrl=function(){var t;return this.params&&(t=l.Util.Xhr.urlEncode(this.params),0!==t.length&&(this.url=[this.url,"?",t].join("")),this.params=null),this},t.prototype.paramsToBody=function(){if(this.params){if(null!==this.body)throw new Error("Request already has a body");if(this.isGet)throw new Error("paramsToBody cannot be called on GET requests");this.headers["Content-Type"]="application/x-www-form-urlencoded",this.body=l.Util.Xhr.urlEncode(this.params),this.params=null}return this},t.prototype.prepare=function(){var t,e,r,n,i=this;if(e=l.Util.Xhr.ieXdr,this.isGet||null!==this.body||e?(this.paramsToUrl(),null!==this.body&&"string"==typeof this.body&&(this.headers["Content-Type"]="text/plain; charset=utf8")):this.paramsToBody(),this.xhr=new l.Util.Xhr.Request,e?(this.xhr.onload=function(){return i.onXdrLoad()},this.xhr.onerror=function(){return i.onXdrError()},this.xhr.ontimeout=function(){return i.onXdrError()},this.xhr.onprogress=function(){}):this.xhr.onreadystatechange=function(){return i.onReadyStateChange()},this.xhr.open(this.method,this.url,!0),!e){n=this.headers;for(t in n)p.call(n,t)&&(r=n[t],this.xhr.setRequestHeader(t,r))}return this.responseType&&("b"===this.responseType?this.xhr.overrideMimeType&&this.xhr.overrideMimeType("text/plain; charset=x-user-defined"):this.xhr.responseType=this.responseType),this},t.prototype.send=function(t){var e,r;if(this.callback=t||this.callback,null!==this.body){e=this.body,l.Util.Xhr.sendArrayBufferView?e instanceof ArrayBuffer&&(e=new Uint8Array(e)):0===e.byteOffset&&e.buffer instanceof ArrayBuffer&&(e=e.buffer);try{this.xhr.send(e)}catch(n){if(r=n,l.Util.Xhr.sendArrayBufferView||!l.Util.Xhr.wrapBlob)throw r;e=new Blob([e],{type:"application/octet-stream"}),this.xhr.send(e)}}else this.xhr.send();return this},t.urlEncode=function(t){var e,r,n;e=[];for(r in t)n=t[r],e.push(this.urlEncodeValue(r)+"="+this.urlEncodeValue(n));return e.sort().join("&")},t.urlEncodeValue=function(t){return encodeURIComponent(t.toString()).replace(/\!/g,"%21").replace(/'/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/\*/g,"%2A")},t.urlDecode=function(t){var e,r,n,i,o,s;for(r={},s=t.split("&"),i=0,o=s.length;o>i;i++)n=s[i],e=n.split("="),r[decodeURIComponent(e[0])]=decodeURIComponent(e[1]);return r},t.prototype.onReadyStateChange=function(){var t,e,r,n,i,o,s,a,u,h,p,c,d,f,_;if(4!==this.xhr.readyState)return!0;if(this.completed)return!0;if(this.completed=!0,this.xhr.status<200||this.xhr.status>=300)return e=new l.ApiError(this.xhr,this.method,this.url),this.onError?this.onError(e,this.callback):this.callback(e),!0;if(this.wantHeaders?(t=this.xhr.getAllResponseHeaders(),s=t?l.Util.Xhr.parseResponseHeaders(t):this.guessResponseHeaders(),p=s["x-dropbox-metadata"]):(s=void 0,p=this.xhr.getResponseHeader("x-dropbox-metadata")),null!=p?p.length:void 0)try{h=JSON.parse(p)}catch(y){if(u=y,o=p.search(/\}\,\s*\{/),-1!==o)try{p=p.substring(0,o+1),h=JSON.parse(p)}catch(y){u=y,h=void 0}else h=void 0}else h=void 0;if(this.responseType){if("b"===this.responseType){for(i=null!=this.xhr.responseText?this.xhr.responseText:this.xhr.response,r=[],a=f=0,_=i.length;_>=0?_>f:f>_;a=_>=0?++f:--f)r.push(String.fromCharCode(255&i.charCodeAt(a)));d=r.join(""),this.callback(null,d,h,s)}else this.callback(null,this.xhr.response,h,s);return!0}switch(d=null!=this.xhr.responseText?this.xhr.responseText:this.xhr.response,n=this.xhr.getResponseHeader("Content-Type"),n&&(c=n.indexOf(";"),-1!==c&&(n=n.substring(0,c))),n){case"application/x-www-form-urlencoded":this.callback(null,l.Util.Xhr.urlDecode(d),h,s);break;case"application/json":case"text/javascript":this.callback(null,JSON.parse(d),h,s);break;default:this.callback(null,d,h,s)}return!0},t.parseResponseHeaders=function(t){var e,r,n,i,o,s,a,u;for(n={},r=t.split("\n"),a=0,u=r.length;u>a;a++)i=r[a],e=i.indexOf(":"),o=i.substring(0,e).trim().toLowerCase(),s=i.substring(e+1).trim(),n[o]=s;return n},t.prototype.guessResponseHeaders=function(){var t,e,r,n,i,o;for(t={},o=["cache-control","content-language","content-range","content-type","expires","last-modified","pragma","x-dropbox-metadata"],n=0,i=o.length;i>n;n++)e=o[n],r=this.xhr.getResponseHeader(e),r&&(t[e]=r);return t},t.prototype.onXdrLoad=function(){var t,e,r;if(this.completed)return!0;if(this.completed=!0,r=this.xhr.responseText,t=this.wantHeaders?{"content-type":this.xhr.contentType}:void 0,e=void 0,this.responseType)return this.callback(null,r,e,t),!0;switch(this.xhr.contentType){case"application/x-www-form-urlencoded":this.callback(null,l.Util.Xhr.urlDecode(r),e,t);break;case"application/json":case"text/javascript":this.callback(null,JSON.parse(r),e,t);break;default:this.callback(null,r,e,t)}return!0},t.prototype.onXdrError=function(){var t;return this.completed?!0:(this.completed=!0,t=new l.ApiError(this.xhr,this.method,this.url),this.onError?this.onError(t,this.callback):this.callback(t),!0)},t}()}).call(this);
//# sourceMappingURL=dropbox.min.map_application/javascriptUutf-8O
 bplist00‘
X$versionY$archiverT$topX$objects Ü†_NSKeyedArchiver—	_WebResourceResponseÄØ+'-.4567]^_`abcdefghijklmnopqrstuvwxyz{|ÄÅU$null› !"#$%&___nsurlrequest_proto_prop_obj_6___nsurlrequest_proto_prop_obj_3R$2___nsurlrequest_proto_prop_obj_0R$3___nsurlrequest_proto_prop_obj_4V$class___nsurlrequest_proto_prop_obj_1R$4R$0___nsurlrequest_proto_prop_obj_5___nsurlrequest_proto_prop_obj_2R$1Ä)ÄÄ	ÄÄ*ÄÄ Ä”()$+,WNS.base[NS.relativeÄ ÄÄ_Ghttps://cdnjs.cloudflare.com/ajax/libs/dropbox.js/0.10.2/dropbox.min.js“/012Z$classnameX$classesUNSURL¢13XNSObject#AƒS7x¶\â »”89:K\WNS.keysZNS.objectsØ;<=>?@ABCDEFGHIJÄ	Ä
ÄÄÄÄÄÄÄÄÄÄÄÄÄÄØLMNOPQRMTUVWXYZ[ÄÄÄÄÄÄÄÄÄ Ä!Ä"Ä#Ä$Ä%Ä&Ä'Ä(\Content-Type_Access-Control-Allow-Origin]Last-ModifiedSAge_Content-Encoding_Cross-Origin-Resource-PolicyWExpires_Timing-Allow-Origin]Cache-ControlTDate^Content-LengthX__hhaa___X-Content-Type-OptionsTEtag]Accept-RangesTVary_%application/javascript; charset=utf-8Q*_Mon, 04 May 2020 16:09:34 GMTX28717125Rbr\cross-origin_Tue, 01 Aug 2023 17:03:12 GMT_public, max-age=30672000_Thu, 11 Aug 2022 17:03:12 GMTU14287_x

YnBsaXN0MDDfEA8BAgMEBQYHCAkKCwwNDg8QEhQWGBocHh8hIyUnKStcQ29udGVudC1UeXBlVEV0YWdfEBtBY2Nlc3MtQ29udHJvbC1BbGxvdy1PcmlnaW5TQWdlXxAQQ29udGVudC1FbmNvZGluZ18QHENyb3NzLU9yaWdpbi1SZXNvdXJjZS1Qb2xpY3lXRXhwaXJlc18QE1RpbWluZy1BbGxvdy1PcmlnaW5dQ2FjaGUtQ29udHJvbFREYXRlXkNvbnRlbnQtTGVuZ3RoXxAWWC1Db250ZW50LVR5cGUtT3B0aW9uc11BY2NlcHQtUmFuZ2VzVFZhcnldTGFzdC1Nb2RpZmllZKERXxAlYXBwbGljYXRpb24vamF2YXNjcmlwdDsgY2hhcnNldD11dGYtOKETXxAPIjVlYjAzZTNlLWU5ZGIioRVRKqEXWDI4NzE3MTI1oRlSYnKhG1xjcm9zcy1vcmlnaW6hHV8QHVR1ZSwgMDEgQXVnIDIwMjMgMTc6MDM6MTIgR01UoRWhIF8QGHB1YmxpYywgbWF4LWFnZT0zMDY3MjAwMKEiXxAdVGh1LCAxMSBBdWcgMjAyMiAxNzowMzoxMiBHTVShJFUxNDI4N6EmV25vc25pZmahKFVieXRlc6EqXxAPQWNjZXB0LUVuY29kaW5noSxfEB1Nb24sIDA0IE1heSAyMDIwIDE2OjA5OjM0IEdNVAAIACkANgA7AFkAXQBwAI8AlwCtALsAwADPAOgA9gD7AQkBCwEzATUBRwFJAUsBTQFWAVgBWwFdAWoBbAGMAY4BkAGrAa0BzQHPAdUB1wHfAeEB5wHpAfsB/QAAAAAAAAIBAAAAAAAAAC0AAAAAAAAAAAAAAAAAAAIdWnosniff_"5eb03e3e-e9db"Ubytes_Accept-Encoding“/0}~_NSMutableDictionary£}3\NSDictionary_application/javascript“/0ÇÉ_NSHTTPURLResponse£ÑÖ3_NSHTTPURLResponse]NSURLResponse    $ ) 2 7 I L b d í ò ≥ ’ ˜ ˙AHjmpí¥∑πªΩø¡√≈«» ÃŒ–◊ﬂÎÌÔÒ;@KTZ]foqszÇç†¢§¶®™¨Æ∞≤¥∂∏∫ºæ¿”’◊Ÿ€›ﬂ·„ÂÁÈÎÌÔÒÛı .2EdlÇêï§≠∆ÀŸﬁ(14Aa|ú¢&8>PUko|ïöÆ≤∆             Ü              ‘_Ghttps://cdnjs.cloudflare.com/ajax/libs/dropbox.js/0.10.2/dropbox.min.js‘3456O&ß/* (c) 2007 - now() Ondrej Zara, 1.7 */
var OZ = {
	$:function(x) { return typeof(x) == "string" ? document.getElementById(x) : x; },
	select: function(x) { return document.querySelectorAll(x); },
	opera:!!window.opera,
	ie:!!document.attachEvent && !window.opera,
	gecko:!!document.getAnonymousElementByAttribute,
	webkit:!!navigator.userAgent.match(/webkit/i),
	khtml:!!navigator.userAgent.match(/khtml/i) || !!navigator.userAgent.match(/konqueror/i),
	Event:{
		_id:0,
		_byName:{},
		_byID:{},
		add:function(elm,event,cb) {
			var id = OZ.Event._id++;
			var element = OZ.$(elm);
			var fnc = (element && element.attachEvent ? function() { return cb.apply(element,arguments); } : cb);
			var rec = [element,event,fnc];
			var parts = event.split(" ");
			while (parts.length) {
				var e = parts.pop();
				if (element) {
					if (element.addEventListener) {
						element.addEventListener(e,fnc,false);
					} else if (element.attachEvent) {
						element.attachEvent("on"+e,fnc);
					}
				}
				if (!(e in OZ.Event._byName)) { OZ.Event._byName[e] = {}; }
				OZ.Event._byName[e][id] = rec;
			}
			OZ.Event._byID[id] = rec;
			return id;
		},
		remove:function(id) {
			var rec = OZ.Event._byID[id];
			if (!rec) { return; }
			var elm = rec[0];
			var parts = rec[1].split(" ");
			while (parts.length) {
				var e = parts.pop();
				if (elm) {
					if (elm.removeEventListener) {
						elm.removeEventListener(e,rec[2],false);
					} else if (elm.detachEvent) {
						elm.detachEvent("on"+e,rec[2]);
					}
				}
				delete OZ.Event._byName[e][id];
			}
			delete OZ.Event._byID[id];
		},
		stop:function(e) { e.stopPropagation ? e.stopPropagation() : e.cancelBubble = true; },
		prevent:function(e) { e.preventDefault ? e.preventDefault() : e.returnValue = false; },
		target:function(e) { return e.target || e.srcElement; }
	},
	Class:function() { 
		var c = function() {
			var init = arguments.callee.prototype.init;
			if (init) { init.apply(this,arguments); }
		};
		c.implement = function(parent) {
			for (var p in parent.prototype) { this.prototype[p] = parent.prototype[p]; }
			return this;
		};
		c.extend = function(parent) {
			var tmp = function(){};
			tmp.prototype = parent.prototype;
			this.prototype = new tmp();
			this.prototype.constructor = this;
			return this;
		};
		c.prototype.bind = function(fnc) { return fnc.bind(this); };
		c.prototype.dispatch = function(type, data) {
			var obj = {
				type:type,
				target:this,
				timeStamp:(new Date()).getTime(),
				data:data
			}
			var tocall = [];
			var list = OZ.Event._byName[type];
			for (var id in list) {
				var item = list[id];
				if (!item[0] || item[0] == this) { tocall.push(item[2]); }
			}
			var len = tocall.length;
			for (var i=0;i<len;i++) { tocall[i](obj); }
		}
		return c;
	},
	DOM:{
		elm:function(name, opts) {
			var elm = document.createElement(name);
			for (var p in opts) {
				var val = opts[p];
				if (p == "class") { p = "className"; }
				if (p in elm) { elm[p] = val; }
			}
			OZ.Style.set(elm, opts);
			return elm;
		},
		text:function(str) { return document.createTextNode(str); },
		clear:function(node) { while (node.firstChild) {node.removeChild(node.firstChild);} },
		pos:function(elm) { /* relative to _viewport_ */
			var cur = OZ.$(elm);
			var html = cur.ownerDocument.documentElement;
			var parent = cur.parentNode;
			var x = y = 0;
			if (cur == html) { return [x,y]; }
			while (1) {
				if (OZ.Style.get(cur,"position") == "fixed") {
					x += cur.offsetLeft;
					y += cur.offsetTop;
					return [x,y];
				}
				
				if (OZ.opera && (parent == html || OZ.Style.get(cur,"display") != "block")) { } else {
					x -= parent.scrollLeft;
					y -= parent.scrollTop;
				}
				if (parent == cur.offsetParent || cur.parentNode == html) {
					x += cur.offsetLeft;
					y += cur.offsetTop;
					cur = parent;
				}
				
				if (parent == html) { return [x,y]; }
				parent = parent.parentNode;
			}
		},
		scroll:function() { 
			var x = document.documentElement.scrollLeft || document.body.scrollLeft || 0;
			var y = document.documentElement.scrollTop || document.body.scrollTop || 0;
			return [x,y];
		},
		win:function(avail) {
			return (avail ? [window.innerWidth,window.innerHeight] : [document.documentElement.clientWidth,document.documentElement.clientHeight]);
		},
		hasClass:function(node, className) {
			var cn = OZ.$(node).className;
			var arr = (cn ? cn.split(" ") : []);
			return (arr.indexOf(className) != -1);
		},
		addClass:function(node,className) {
			if (OZ.DOM.hasClass(node, className)) { return; }
			var cn = OZ.$(node).className;
			var arr = (cn ? cn.split(" ") : []);
			arr.push(className);
			OZ.$(node).className = arr.join(" ");
		},
		removeClass:function(node, className) {
			if (!OZ.DOM.hasClass(node, className)) { return; }
			var cn = OZ.$(node).className;
			var arr = (cn ? cn.split(" ") : []);
			var arr = arr.filter(function($){ return $ != className; });
			OZ.$(node).className = arr.join(" ");
		},
		append:function() {
			if (arguments.length == 1) {
				var arr = arguments[0];
				var root = OZ.$(arr[0]);
				for (var i=1;i<arr.length;i++) { root.appendChild(OZ.$(arr[i])); }
			} else for (var i=0;i<arguments.length;i++) { OZ.DOM.append(arguments[i]); }
		}
	},
	Style:{
		get:function(elm, prop) {
			if (document.defaultView && document.defaultView.getComputedStyle) {
				try {
					var cs = elm.ownerDocument.defaultView.getComputedStyle(elm,"");
				} catch(e) {
					return false;
				}
				if (!cs) { return false; }
				return cs[prop];
			} else {
				return elm.currentStyle[prop];
			}
		},
		set:function(elm, obj) {
			for (var p in obj) { 
				var val = obj[p];
				if (p == "opacity" && OZ.ie) {
					p = "filter";
					val = "alpha(opacity="+Math.round(100*val)+")";
					elm.style.zoom = 1;
				} else if (p == "float") {
					p = (OZ.ie ? "styleFloat" : "cssFloat");
				}
				if (p in elm.style) { elm.style[p] = val; }
			}
		}
	},
	Request:function(url, callback, options) {
		var o = {data:false, method:"get", headers:{}, xml:false}
		for (var p in options) { o[p] = options[p]; }
		o.method = o.method.toUpperCase();
		
		var xhr = false;
		if (window.XMLHttpRequest) { xhr = new XMLHttpRequest(); }
		else if (window.ActiveXObject) { xhr = new ActiveXObject("Microsoft.XMLHTTP"); }
		else { return false; }
		xhr.open(o.method, url, true);
		xhr.onreadystatechange = function() {
			if (xhr.readyState != 4) { return; }
			if (!callback) { return; }
			var data = (o.xml ? xhr.responseXML : xhr.responseText);
			var headers = {};
			var h = xhr.getAllResponseHeaders();
			if (h) {
				h = h.split(/[\r\n]/);
				for (var i=0;i<h.length;i++) if (h[i]) {
					var v = h[i].match(/^([^:]+): *(.*)$/);
					headers[v[1]] = v[2];
				}
			}
			callback(data,xhr.status,headers);
		};
		if (o.method == "POST") { xhr.setRequestHeader("Content-Type","application/x-www-form-urlencoded"); }
		for (var p in o.headers) { xhr.setRequestHeader(p,o.headers[p]); }
		xhr.send(o.data || null);
		return xhr;
	}
}

if (!Function.prototype.bind) {
	Function.prototype.bind = function(thisObj) { 
		var fn = this;
		var args = Array.prototype.slice.call(arguments, 1); 
		return function() { 
			return fn.apply(thisObj, args.concat(Array.prototype.slice.call(arguments))); 
		}
	}
};

if (!Array.prototype.indexOf) { 
	Array.prototype.indexOf = function(item, from) {
	    var len = this.length;
	    var i = from || 0;
	    if (i < 0) { i += len; }
	    for (;i<len;i++) {
			if (i in this && this[i] === item) { return i; }
	    }
	    return -1;
	}
}
if (!Array.indexOf) {
	Array.indexOf = function(obj, item, from) { return Array.prototype.indexOf.call(obj, item, from); }
}

if (!Array.prototype.lastIndexOf) { 
	Array.prototype.lastIndexOf = function(item, from) {
	    var len = this.length;
		var i = from || len-1;
		if (i < 0) { i += len; }
	    for (;i>-1;i--) {
			if (i in this && this[i] === item) { return i; }
	    }
	    return -1;
	}
}
if (!Array.lastIndexOf) { 
	Array.lastIndexOf = function(obj, item, from) { return Array.prototype.lastIndexOf.call(obj, item, from); }
}

if (!Array.prototype.forEach) { 
	Array.prototype.forEach = function(cb, _this) {
	    var len = this.length;
	    for (var i=0;i<len;i++) { 
			if (i in this) { cb.call(_this, this[i], i, this); }
		}
	}
}
if (!Array.forEach) { 
	Array.forEach = function(obj, cb, _this) { Array.prototype.forEach.call(obj, cb, _this); }
}

if (!Array.prototype.every) { 
	Array.prototype.every = function(cb, _this) {
	    var len = this.length;
	    for (var i=0;i<len;i++) {
			if (i in this && !cb.call(_this, this[i], i, this)) { return false; }
	    }
	    return true;
	}
}
if (!Array.every) { 
	Array.every = function(obj, cb, _this) { return Array.prototype.every.call(obj, cb, _this); }
}

if (!Array.prototype.some) { 
	Array.prototype.some = function(cb, _this) {
		var len = this.length;
		for (var i=0;i<len;i++) {
			if (i in this && cb.call(_this, this[i], i, this)) { return true; }
		}
		return false;
	}
}
if (!Array.some) { 
	Array.some = function(obj, cb, _this) { return Array.prototype.some.call(obj, cb, _this); }
}

if (!Array.prototype.map) { 
	Array.prototype.map = function(cb, _this) {
		var len = this.length;
		var res = new Array(len);
		for (var i=0;i<len;i++) {
			if (i in this) { res[i] = cb.call(_this, this[i], i, this); }
		}
		return res;
	}
}
if (!Array.map) { 
	Array.map = function(obj, cb, _this) { return Array.prototype.map.call(obj, cb, _this); }
}

if (!Array.prototype.filter) { 
	Array.prototype.filter = function(cb, _this) {
		var len = this.length;
	    var res = [];
			for (var i=0;i<len;i++) {
				if (i in this) {
					var val = this[i];
					if (cb.call(_this, val, i, this)) { res.push(val); }
				}
			}
	    return res;
	}
}
if (!Array.filter) { 
	Array.filter = function(obj, cb, _this) { return Array.prototype.filter.call(obj, cb, _this); }
}
_application/javascriptO√bplist00‘
X$versionY$archiverT$topX$objects Ü†_NSKeyedArchiver—	_WebResourceResponseÄØ('-.4567YZ[\]^_`abcdefghijklmnopqrstuyzU$null› !"#$%&___nsurlrequest_proto_prop_obj_6___nsurlrequest_proto_prop_obj_3R$2___nsurlrequest_proto_prop_obj_0R$3___nsurlrequest_proto_prop_obj_4V$class___nsurlrequest_proto_prop_obj_1R$4R$0___nsurlrequest_proto_prop_obj_5___nsurlrequest_proto_prop_obj_2R$1Ä&ÄÄ	ÄÄ'ÄÄ Ä”()$+,WNS.base[NS.relativeÄ ÄÄ_*https://ondras.zarovi.cz/sql/demo/js/oz.js“/012Z$classnameX$classesUNSURL¢13XNSObject#AƒS7x¶gæ »”89:IXWNS.keysZNS.objectsÆ;<=>?@ABCDEFGHÄ	Ä
ÄÄÄÄÄÄÄÄÄÄÄÄÆJKLMNOPQRSTUVWÄÄÄÄÄÄÄÄÄÄ Ä!Ä"Ä#Ä$Ä%\Content-TypeZKeep-Alive]Accept-Ranges]Last-Modified_Content-EncodingVServerTDate^Content-LengthZConnectionX__hhaa___X-Content-Type-OptionsTEtag_X-Frame-OptionsTVary_application/javascript_timeout=5, max=100Ubytes_Thu, 26 May 2016 21:04:07 GMTTgzipVApache_Thu, 11 Aug 2022 17:02:56 GMTT2951ZKeep-Alive_‹

YnBsaXN0MDDdAQIDBAUGBwgJCgsMDQ4QEhQWGBocHiAiJCZcQ29udGVudC1UeXBlXxAPWC1GcmFtZS1PcHRpb25zWktlZXAtQWxpdmVUVmFyeV8QEENvbnRlbnQtRW5jb2RpbmdWU2VydmVyVERhdGVeQ29udGVudC1MZW5ndGhaQ29ubmVjdGlvbl8QFlgtQ29udGVudC1UeXBlLU9wdGlvbnNURXRhZ11BY2NlcHQtUmFuZ2VzXUxhc3QtTW9kaWZpZWShD18QFmFwcGxpY2F0aW9uL2phdmFzY3JpcHShEVpzYW1lb3JpZ2luoRNfEBJ0aW1lb3V0PTUsIG1heD0xMDChFV8QD0FjY2VwdC1FbmNvZGluZ6EXVGd6aXChGVZBcGFjaGWhG18QHVRodSwgMTEgQXVnIDIwMjIgMTc6MDI6NTYgR01UoR1UMjk1MaEfWktlZXAtQWxpdmWhIVdub3NuaWZmoSNfEBkiMjZhNy01MzNjNTIxODdjZDM5LWd6aXAioSVVYnl0ZXOhJ18QHVRodSwgMjYgTWF5IDIwMTYgMjE6MDQ6MDcgR01UAAgAIwAwAEIATQBSAGUAbABxAIAAiwCkAKkAtwDFAMcA4ADiAO0A7wEEAQYBGAEaAR8BIQEoASoBSgFMAVEBUwFeAWABaAFqAYYBiAGOAZAAAAAAAAACAQAAAAAAAAAoAAAAAAAAAAAAAAAAAAABsA==Wnosniff_"26a7-533c52187cd39-gzip"Zsameorigin_Accept-Encoding“/0vw_NSMutableDictionary£vx3\NSDictionary_application/javascript“/0{|_NSHTTPURLResponse£}~3_NSHTTPURLResponse]NSURLResponse    $ ) 2 7 I L b d è ï ∞ “ Ù ˜>Egjmè±¥∂∏∫ºæ¿¬ƒ≈«…ÀÕ‘‹ËÍÏÓ +4:=FOQSZbm|~ÄÇÑÜàäåéêíîñòß©´≠Ø±≥µ∑πªΩø¡√≈“›Î˘'2;TYkpâû§ƒ…–ı ‡Ë!&<@MfkÉó                           •_*https://ondras.zarovi.cz/sql/demo/js/oz.js‘89:;OFvar CONFIG = {
	AVAILABLE_DBS: ["mysql", "sqlite", "web2py", "mssql", "postgresql", "oracle", "sqlalchemy", "vfp9", "cubrid"],
	DEFAULT_DB: "mysql",

	AVAILABLE_LOCALES: ["ar", "cs", "de", "el", "en", "eo", "es", "fr", "hu", "it", "ja", "nl", "pl", "pt_BR", "ro", "ru", "sv", "zh"],
	DEFAULT_LOCALE: "en",
	
	AVAILABLE_BACKENDS: ["php-mysql"],
	DEFAULT_BACKEND: ["php-mysql"],

	RELATION_THICKNESS: 2,
	RELATION_SPACING: 15,
	RELATION_COLORS: ["#000", "#800", "#080", "#008", "#088", "#808", "#088"],
	
    RELATION_HIGHLIGHTED_COLOR: "#FF0000",                                                                                                                                                                                                             
    RELATION_HIGHLIGHTED_THICKNESS: 5,                                                                                                                                                                                                                 

	STYLES: ["material-inspired", "original"],
	MATERIAL_RELATION_COLORS: ["#323232", "#F44336", "#E91E63", "#9C27B0", "#3F51B5", "#673AB7", "#2196F3", "#03A9F4", "#00BCD4", "#009688", "#4CAF50", "#8BC34A", "#CDDC39", "#FFC107", "#FF5722", "#795548", "#607D8B"],
	
	STATIC_PATH: "",
	XHR_PATH: "",

	/*
	 * The key below needs to be set individually by you if you want to use the Dropbox load/save feature.
	 * To do that, first sign up with Dropbox (may require a specific developer / SDK sign-up), go to
	 * https://www.dropbox.com/developers/apps and use "Create app" to add a new "Dropbox API app".
	 * Limit the app to its own folder. Call it, for instance, "wwwsqldesigner".
	 * Under "OAuth 2", "Redirect URIs", add the URL to the "dropbox-oauth-receiver.html" file on your server.
	 * E.g, if you install wwwsqldesigner on your local web server under "http://localhost/sqldesigner/", then add
	 * http://localhost/sqldesigner/dropbox-oauth-receiver.html as a Redirection URI.
	 * Copy the shown "App key" and paste it here below instead of the null value:
	 */
	DROPBOX_KEY: null // such as: "d6stdscwewhl6sa"

}
_application/javascriptO¡bplist00‘
X$versionY$archiverT$topX$objects Ü†_NSKeyedArchiver—	_WebResourceResponseÄØ('-.4567YZ[\]^_`abcdefghijklmnopqrstuyzU$null› !"#$%&___nsurlrequest_proto_prop_obj_6___nsurlrequest_proto_prop_obj_3R$2___nsurlrequest_proto_prop_obj_0R$3___nsurlrequest_proto_prop_obj_4V$class___nsurlrequest_proto_prop_obj_1R$4R$0___nsurlrequest_proto_prop_obj_5___nsurlrequest_proto_prop_obj_2R$1Ä&ÄÄ	ÄÄ'ÄÄ Ä”()$+,WNS.base[NS.relativeÄ ÄÄ_.https://ondras.zarovi.cz/sql/demo/js/config.js“/012Z$classnameX$classesUNSURL¢13XNSObject#AƒS7x¶q÷ »”89:IXWNS.keysZNS.objectsÆ;<=>?@ABCDEFGHÄ	Ä
ÄÄÄÄÄÄÄÄÄÄÄÄÆJKLMNOPQRSTUVWÄÄÄÄÄÄÄÄÄÄ Ä!Ä"Ä#Ä$Ä%\Content-TypeZKeep-Alive]Accept-Ranges]Last-Modified_Content-EncodingVServerTDate^Content-LengthZConnectionX__hhaa___X-Content-Type-OptionsTEtag_X-Frame-OptionsTVary_application/javascript_timeout=5, max=100Ubytes_Mon, 04 Apr 2022 12:34:14 GMTTgzipVApache_Thu, 11 Aug 2022 17:02:56 GMTS939ZKeep-Alive_ÿ

YnBsaXN0MDDdAQIDBAUGBwgJCgsMDQ4QEhQWGBocHiAiJCZcQ29udGVudC1UeXBlXxAPWC1GcmFtZS1PcHRpb25zWktlZXAtQWxpdmVUVmFyeV8QEENvbnRlbnQtRW5jb2RpbmdWU2VydmVyVERhdGVeQ29udGVudC1MZW5ndGhaQ29ubmVjdGlvbl8QFlgtQ29udGVudC1UeXBlLU9wdGlvbnNURXRhZ11BY2NlcHQtUmFuZ2VzXUxhc3QtTW9kaWZpZWShD18QFmFwcGxpY2F0aW9uL2phdmFzY3JpcHShEVpzYW1lb3JpZ2luoRNfEBJ0aW1lb3V0PTUsIG1heD0xMDChFV8QD0FjY2VwdC1FbmNvZGluZ6EXVGd6aXChGVZBcGFjaGWhG18QHVRodSwgMTEgQXVnIDIwMjIgMTc6MDI6NTYgR01UoR1TOTM5oR9aS2VlcC1BbGl2ZaEhV25vc25pZmahI18QGCI4NDYtNWRiZDM1ODk4OWRiZi1nemlwIqElVWJ5dGVzoSdfEB1Nb24sIDA0IEFwciAyMDIyIDEyOjM0OjE0IEdNVAAIACMAMABCAE0AUgBlAGwAcQCAAIsApACpALcAxQDHAOAA4gDtAO8BBAEGARgBGgEfASEBKAEqAUoBTAFQAVIBXQFfAWcBaQGEAYYBjAGOAAAAAAAAAgEAAAAAAAAAKAAAAAAAAAAAAAAAAAAAAa4=Wnosniff_"846-5dbd358989dbf-gzip"Zsameorigin_Accept-Encoding“/0vw_NSMutableDictionary£vx3\NSDictionary_application/javascript“/0{|_NSHTTPURLResponse£}~3_NSHTTPURLResponse]NSURLResponse    $ ) 2 7 I L b d è ï ∞ “ Ù ˜>Egjmè±¥∂∏∫ºæ¿¬ƒ≈«…ÀÕ‘‹ËÍÏÓ$/8>AJSUW^fqÄÇÑÜàäåéêíîñòöú´≠Ø±≥µ∑πªΩø¡√≈«…÷·Ô˝+6?X]otç¢®»Õ‘Ù¯ﬂÁ$:>Kdi}Åï                           £_.https://ondras.zarovi.cz/sql/demo/js/config.js‘=>?@O†function _(str) { /* getText */
	if (!(str in window.LOCALE)) { return str; }
	return window.LOCALE[str];
}

if (typeof String.prototype.endsWith !== 'function') {
	String.prototype.endsWith = function(suffix) {
		return this.indexOf(suffix, this.length - suffix.length) !== -1;
	};
}

if (!String.prototype.trim) {
	String.prototype.trim = function() {
		return this.match(/^\s*([\s\S]*?)\s*$/)[1];
	}
}

if (!String.trim) {
	String.trim = function(obj) { return String.prototype.trim.call(obj);}
}

if (!Object.create) {
	Object.create = function (o) {
		if (arguments.length > 1) { throw new Error("Object.create polyfill only accepts the first parameter"); }
		var tmp = function() {};
		tmp.prototype = o;
		return new tmp();
	};
}

var DATATYPES = false;
var LOCALE = {};
var SQL = {
	_subscribers: {},
	
	publish: function(message, publisher, data) {
		var subscribers = this._subscribers[message] || [];
		var obj = {
			target: publisher,
			data: data
		}
		subscribers.forEach(function(subscriber) { subscriber(obj); });
	},
	
	subscribe: function(message, subscriber) {
		if (!(message in this._subscribers)) {
			this._subscribers[message] = [];
		}
		var index = this._subscribers[message].indexOf(subscriber);
		if (index == -1) { this._subscribers[message].push(subscriber); }
	},
	
	unsubscribe: function(message, subscriber) {
		var index = this._subscribers[message].indexOf(subscriber);
		if (index > -1) { this._subscribers[message].splice(index, 1); }
	},

	escape: function(str) {
		return str.replace(/&/g, "&amp;").replace(/>/g, "&gt;").replace(/</g, "&lt;");
	}
}

window.onbeforeunload = function(e) {
	return ""; /* some browsers will show this text, some won't. */
}
_application/javascriptO¬bplist00‘
X$versionY$archiverT$topX$objects Ü†_NSKeyedArchiver—	_WebResourceResponseÄØ('-.4567YZ[\]^_`abcdefghijklmnopqrstuyzU$null› !"#$%&___nsurlrequest_proto_prop_obj_6___nsurlrequest_proto_prop_obj_3R$2___nsurlrequest_proto_prop_obj_0R$3___nsurlrequest_proto_prop_obj_4V$class___nsurlrequest_proto_prop_obj_1R$4R$0___nsurlrequest_proto_prop_obj_5___nsurlrequest_proto_prop_obj_2R$1Ä&ÄÄ	ÄÄ'ÄÄ Ä”()$+,WNS.base[NS.relativeÄ ÄÄ_/https://ondras.zarovi.cz/sql/demo/js/globals.js“/012Z$classnameX$classesUNSURL¢13XNSObject#AƒS7x¶z∑ »”89:IXWNS.keysZNS.objectsÆ;<=>?@ABCDEFGHÄ	Ä
ÄÄÄÄÄÄÄÄÄÄÄÄÆJKLMNOPQRSTUVWÄÄÄÄÄÄÄÄÄÄ Ä!Ä"Ä#Ä$Ä%\Content-TypeZKeep-Alive]Accept-Ranges]Last-Modified_Content-EncodingVServerTDate^Content-LengthZConnectionX__hhaa___X-Content-Type-OptionsTEtag_X-Frame-OptionsTVary_application/javascript_timeout=5, max=100Ubytes_Thu, 26 May 2016 21:04:07 GMTTgzipVApache_Thu, 11 Aug 2022 17:02:56 GMTS691ZKeep-Alive_ÿ

YnBsaXN0MDDdAQIDBAUGBwgJCgsMDQ4QEhQWGBocHiAiJCZcQ29udGVudC1UeXBlXxAPWC1GcmFtZS1PcHRpb25zWktlZXAtQWxpdmVUVmFyeV8QEENvbnRlbnQtRW5jb2RpbmdWU2VydmVyVERhdGVeQ29udGVudC1MZW5ndGhaQ29ubmVjdGlvbl8QFlgtQ29udGVudC1UeXBlLU9wdGlvbnNURXRhZ11BY2NlcHQtUmFuZ2VzXUxhc3QtTW9kaWZpZWShD18QFmFwcGxpY2F0aW9uL2phdmFzY3JpcHShEVpzYW1lb3JpZ2luoRNfEBJ0aW1lb3V0PTUsIG1heD0xMDChFV8QD0FjY2VwdC1FbmNvZGluZ6EXVGd6aXChGVZBcGFjaGWhG18QHVRodSwgMTEgQXVnIDIwMjIgMTc6MDI6NTYgR01UoR1TNjkxoR9aS2VlcC1BbGl2ZaEhV25vc25pZmahI18QGCI2YTAtNTMzYzUyMTg3YmQ5OS1nemlwIqElVWJ5dGVzoSdfEB1UaHUsIDI2IE1heSAyMDE2IDIxOjA0OjA3IEdNVAAIACMAMABCAE0AUgBlAGwAcQCAAIsApACpALcAxQDHAOAA4gDtAO8BBAEGARgBGgEfASEBKAEqAUoBTAFQAVIBXQFfAWcBaQGEAYYBjAGOAAAAAAAAAgEAAAAAAAAAKAAAAAAAAAAAAAAAAAAAAa4=Wnosniff_"6a0-533c52187bd99-gzip"Zsameorigin_Accept-Encoding“/0vw_NSMutableDictionary£vx3\NSDictionary_application/javascript“/0{|_NSHTTPURLResponse£}~3_NSHTTPURLResponse]NSURLResponse    $ ) 2 7 I L b d è ï ∞ “ Ù ˜>Egjmè±¥∂∏∫ºæ¿¬ƒ≈«…ÀÕ‘‹ËÍÏÓ %09?BKTVX_grÅÉÖáâãçèëìïóôõù¨Æ∞≤¥∂∏∫ºæ¿¬ƒ∆» ◊‚˛,7@Y^pué£©…Œ’ı˘‡Ë %;?Lej~Çñ                           §_/https://ondras.zarovi.cz/sql/demo/js/globals.js‘BCDEO3/* -------------------- base visual element -------------------- */
SQL.Visual = function() {
	this._init();
	this._build();
}

SQL.Visual.prototype._init = function() {
	this.dom = {
		container: null,
		title: null
	};
	this.data = {
		title:""
	}
}

SQL.Visual.prototype._build = function() {}

SQL.Visual.prototype.toXML = function() {}

SQL.Visual.prototype.fromXML = function(node) {}

SQL.Visual.prototype.destroy = function() { /* "destructor" */
	var p = this.dom.container.parentNode;
	if (p && p.nodeType == 1) {
		p.removeChild(this.dom.container);
	}
}

SQL.Visual.prototype.setTitle = function(text) {
	if (!text) { return; }
	this.data.title = text;
	this.dom.title.innerHTML = text;
}

SQL.Visual.prototype.getTitle = function() {
	return this.data.title;
}

SQL.Visual.prototype.redraw = function() {}
_application/javascriptO¿bplist00‘
X$versionY$archiverT$topX$objects Ü†_NSKeyedArchiver—	_WebResourceResponseÄØ('-.4567YZ[\]^_`abcdefghijklmnopqrstuyzU$null› !"#$%&___nsurlrequest_proto_prop_obj_6___nsurlrequest_proto_prop_obj_3R$2___nsurlrequest_proto_prop_obj_0R$3___nsurlrequest_proto_prop_obj_4V$class___nsurlrequest_proto_prop_obj_1R$4R$0___nsurlrequest_proto_prop_obj_5___nsurlrequest_proto_prop_obj_2R$1Ä&ÄÄ	ÄÄ'ÄÄ Ä”()$+,WNS.base[NS.relativeÄ ÄÄ_.https://ondras.zarovi.cz/sql/demo/js/visual.js“/012Z$classnameX$classesUNSURL¢13XNSObject#AƒS7x¶Ñ‡ »”89:IXWNS.keysZNS.objectsÆ;<=>?@ABCDEFGHÄ	Ä
ÄÄÄÄÄÄÄÄÄÄÄÄÆJKLMNOPQRSTUVWÄÄÄÄÄÄÄÄÄÄ Ä!Ä"Ä#Ä$Ä%\Content-TypeZKeep-Alive]Accept-Ranges]Last-Modified_Content-EncodingVServerTDate^Content-LengthZConnectionX__hhaa___X-Content-Type-OptionsTEtag_X-Frame-OptionsTVary_application/javascript_timeout=5, max=97Ubytes_Thu, 26 May 2016 21:04:07 GMTTgzipVApache_Thu, 11 Aug 2022 17:02:55 GMTS327ZKeep-Alive_ÿ

YnBsaXN0MDDdAQIDBAUGBwgJCgsMDQ4QEhQWGBocHiAiJCZcQ29udGVudC1UeXBlXxAPWC1GcmFtZS1PcHRpb25zWktlZXAtQWxpdmVUVmFyeV8QEENvbnRlbnQtRW5jb2RpbmdWU2VydmVyVERhdGVeQ29udGVudC1MZW5ndGhaQ29ubmVjdGlvbl8QFlgtQ29udGVudC1UeXBlLU9wdGlvbnNURXRhZ11BY2NlcHQtUmFuZ2VzXUxhc3QtTW9kaWZpZWShD18QFmFwcGxpY2F0aW9uL2phdmFzY3JpcHShEVpzYW1lb3JpZ2luoRNfEBF0aW1lb3V0PTUsIG1heD05N6EVXxAPQWNjZXB0LUVuY29kaW5noRdUZ3ppcKEZVkFwYWNoZaEbXxAdVGh1LCAxMSBBdWcgMjAyMiAxNzowMjo1NSBHTVShHVMzMjehH1pLZWVwLUFsaXZloSFXbm9zbmlmZqEjXxAYIjMzMy01MzNjNTIxODdjZDM5LWd6aXAioSVVYnl0ZXOhJ18QHVRodSwgMjYgTWF5IDIwMTYgMjE6MDQ6MDcgR01UAAgAIwAwAEIATQBSAGUAbABxAIAAiwCkAKkAtwDFAMcA4ADiAO0A7wEDAQUBFwEZAR4BIAEnASkBSQFLAU8BUQFcAV4BZgFoAYMBhQGLAY0AAAAAAAACAQAAAAAAAAAoAAAAAAAAAAAAAAAAAAABrQ==Wnosniff_"333-533c52187cd39-gzip"Zsameorigin_Accept-Encoding“/0vw_NSMutableDictionary£vx3\NSDictionary_application/javascript“/0{|_NSHTTPURLResponse£}~3_NSHTTPURLResponse]NSURLResponse    $ ) 2 7 I L b d è ï ∞ “ Ù ˜>Egjmè±¥∂∏∫ºæ¿¬ƒ≈«…ÀÕ‘‹ËÍÏÓ$/8>AJSUW^fqÄÇÑÜàäåéêíîñòöú´≠Ø±≥µ∑πªΩø¡√≈«…÷·Ô˝+6?X]otç°ß«Ã”Û˜ﬁÊ#9=Jch|Äî                           ¢_.https://ondras.zarovi.cz/sql/demo/js/visual.js‘GHIJO.p/* --------------------- table row ( = db column) ------------ */
SQL.Row = function(owner, title, data) {
	this.owner = owner;
	this.relations = [];
	this.keys = [];
	this.selected = false;
	this.expanded = false;

	SQL.Visual.apply(this);

	this.data.type = 0;
	this.data.size = "";
	this.data.def = null;
	this.data.nll = true;
	this.data.ai = false;
	this.data.comment = "";

	if (data) { this.update(data); }
	this.setTitle(title);
}
SQL.Row.prototype = Object.create(SQL.Visual.prototype);

SQL.Row.prototype._build = function() {
	this.dom.container = OZ.DOM.elm("tbody");

	this.dom.content = OZ.DOM.elm("tr");
	this.dom.selected = OZ.DOM.elm("div", {className:"selected",innerHTML:"&raquo;&nbsp;"});
	this.dom.title = OZ.DOM.elm("div", {className:"title"});
	var td1 = OZ.DOM.elm("td");
	var td2 = OZ.DOM.elm("td", {className:"typehint"});
	this.dom.typehint = td2;

	OZ.DOM.append(
		[this.dom.container, this.dom.content],
		[this.dom.content, td1, td2],
		[td1, this.dom.selected, this.dom.title]
	);
	
	this.enter = this.enter.bind(this);
	this.changeComment = this.changeComment.bind(this);

	OZ.Event.add(this.dom.container, "click",this.click.bind(this));
	OZ.Event.add(this.dom.container, "dblclick",this.dblclick.bind(this));
}

SQL.Row.prototype.select = function() {
	if (this.selected) { return; }
	this.selected = true;
	for (var i = 0; i < this.relations.length; i++) { this.relations[i].highlight(); }
	this.redraw();
}

SQL.Row.prototype.deselect = function() {
	if (!this.selected) { return; }
	this.selected = false;
	for (var i = 0; i < this.relations.length; i++) { this.relations[i].dehighlight(); }
	this.redraw();
	this.collapse();
}

SQL.Row.prototype.setTitle = function(t) {
	var old = this.getTitle();
	for (var i=0;i<this.relations.length;i++) {
		var r = this.relations[i];
		if (r.row1 != this) { continue; }
		var tt = r.row2.getTitle().replace(new RegExp(old,"g"),t);
		if (tt != r.row2.getTitle()) { r.row2.setTitle(tt); }
	}

	SQL.Visual.prototype.setTitle.apply(this, [t]);
}

SQL.Row.prototype.click = function(e) { /* clicked on row */
	SQL.publish("rowclick", this);
	this.owner.owner.rowManager.select(this);
}

SQL.Row.prototype.dblclick = function(e) { /* dblclicked on row */
	OZ.Event.prevent(e);
	OZ.Event.stop(e);
	this.expand();
}

SQL.Row.prototype.update = function(data) { /* update subset of row data */
	var des = SQL.Designer;
	if (data.nll && data.def && data.def.match(/^null$/i)) { data.def = null; }

	for (var p in data) { this.data[p] = data[p]; }
	if (!this.data.nll && this.data.def === null) { this.data.def = ""; }

	var elm = this.getDataType();
	for (var i=0;i<this.relations.length;i++) {
		var r = this.relations[i];
		if (r.row1 == this) { r.row2.update({type:des.getFKTypeFor(this.data.type),size:this.data.size}); }
	}
	this.redraw();
}

SQL.Row.prototype.up = function() { /* shift up */
	var r = this.owner.rows;
	var idx = r.indexOf(this);
	if (!idx) { return; }
	r[idx-1].dom.container.parentNode.insertBefore(this.dom.container,r[idx-1].dom.container);
	r.splice(idx,1);
	r.splice(idx-1,0,this);
	this.redraw();
}

SQL.Row.prototype.down = function() { /* shift down */
	var r = this.owner.rows;
	var idx = r.indexOf(this);
	if (idx+1 == this.owner.rows.length) { return; }
	r[idx].dom.container.parentNode.insertBefore(this.dom.container,r[idx+1].dom.container.nextSibling);
	r.splice(idx,1);
	r.splice(idx+1,0,this);
	this.redraw();
}

SQL.Row.prototype.buildEdit = function() {
	OZ.DOM.clear(this.dom.container);

	var elms = [];
	this.dom.name = OZ.DOM.elm("input");
	this.dom.name.type = "text";
	elms.push(["name",this.dom.name]);
	OZ.Event.add(this.dom.name, "keypress", this.enter);

	this.dom.type = this.buildTypeSelect(this.data.type);
	elms.push(["type",this.dom.type]);

	this.dom.size = OZ.DOM.elm("input");
	this.dom.size.type = "text";
	elms.push(["size",this.dom.size]);

	this.dom.def = OZ.DOM.elm("input");
	this.dom.def.type = "text";
	elms.push(["def",this.dom.def]);

	this.dom.ai = OZ.DOM.elm("input");
	this.dom.ai.type = "checkbox";
	elms.push(["ai",this.dom.ai]);

	this.dom.nll = OZ.DOM.elm("input");
	this.dom.nll.type = "checkbox";
	elms.push(["null",this.dom.nll]);

	this.dom.comment = OZ.DOM.elm("span",{className:"comment"});
	this.dom.comment.innerHTML = "";
	this.dom.comment.appendChild(document.createTextNode(this.data.comment));

	this.dom.commentbtn = OZ.DOM.elm("input");
	this.dom.commentbtn.type = "button";
	this.dom.commentbtn.id = "commentbtn"
	this.dom.commentbtn.value = _("comment");

	OZ.Event.add(this.dom.commentbtn, "click", this.changeComment);

	for (var i=0;i<elms.length;i++) {
		var row = elms[i];
		var tr = OZ.DOM.elm("tr");
		var td1 = OZ.DOM.elm("td");
		var td2 = OZ.DOM.elm("td");
		var l = OZ.DOM.text(_(row[0])+": ");
		OZ.DOM.append(
			[tr, td1, td2],
			[td1, l],
			[td2, row[1]]
		);
		this.dom.container.appendChild(tr);
	}

	var tr = OZ.DOM.elm("tr");
	var td1 = OZ.DOM.elm("td");
	var td2 = OZ.DOM.elm("td");
	OZ.DOM.append(
		[tr, td1, td2],
		[td1, this.dom.comment],
		[td2, this.dom.commentbtn]
	);
	this.dom.container.appendChild(tr);
}

SQL.Row.prototype.changeComment = function(e) {
	var c = prompt(_("commenttext"),this.data.comment);
	if (c === null) { return; }
	this.data.comment = c;
	this.dom.comment.innerHTML = "";
	this.dom.comment.appendChild(document.createTextNode(this.data.comment));
}

SQL.Row.prototype.expand = function() {
	if (this.expanded) { return; }
	this.expanded = true;
	this.buildEdit();
	this.load();
	this.redraw();
	this.dom.container.classList.add('expanded');
	this.dom.name.focus();
	this.dom.name.select();
}

SQL.Row.prototype.collapse = function() {
	if (!this.expanded) { return; }
	this.expanded = false;
	this.dom.container.classList.remove('expanded');

	var data = {
		type: this.dom.type.selectedIndex,
		def: this.dom.def.value,
		size: this.dom.size.value,
		nll: this.dom.nll.checked,
		ai: this.dom.ai.checked
	}

	OZ.DOM.clear(this.dom.container);
	this.dom.container.appendChild(this.dom.content);

	this.update(data);
	this.setTitle(this.dom.name.value);
}

SQL.Row.prototype.load = function() { /* put data to expanded form */
	this.dom.name.value = this.getTitle();
	var def = this.data.def;
	if (def === null) { def = "NULL"; }

	this.dom.def.value = def;
	this.dom.size.value = this.data.size;
	this.dom.nll.checked = this.data.nll;
	this.dom.ai.checked = this.data.ai;
}

SQL.Row.prototype.redraw = function() {
	var color = this.getColor();
	this.dom.container.style.backgroundColor = color;
	this.dom.container.style.borderColor = color;
	OZ.DOM.removeClass(this.dom.title, "primary");
	OZ.DOM.removeClass(this.dom.title, "key");
	if (this.isPrimary()) { OZ.DOM.addClass(this.dom.title, "primary"); }
	if (this.isKey()) { OZ.DOM.addClass(this.dom.title, "key"); }
	this.dom.selected.style.display = (this.selected ? "" : "none");
	this.dom.container.title = this.data.comment;

	var typehint = [];
	if (this.owner.owner.getOption("showtype")) {
		var elm = this.getDataType();
		typehint.push(elm.getAttribute("sql"));
	}

	if (this.owner.owner.getOption("showsize") && this.data.size) {
		typehint.push("(" + this.data.size + ")");
	}

	this.dom.typehint.innerHTML = typehint.join(" ");
	this.owner.redraw();
	this.owner.owner.rowManager.redraw();
}

SQL.Row.prototype.addRelation = function(r) {
	this.relations.push(r);
}

SQL.Row.prototype.removeRelation = function(r) {
	var idx = this.relations.indexOf(r);
	if (idx == -1) { return; }
	this.relations.splice(idx,1);
}

SQL.Row.prototype.addKey = function(k) {
	this.keys.push(k);
	this.redraw();
}

SQL.Row.prototype.removeKey = function(k) {
	var idx = this.keys.indexOf(k);
	if (idx == -1) { return; }
	this.keys.splice(idx,1);
	this.redraw();
}

SQL.Row.prototype.getDataType = function() {
	var type = this.data.type;
	var elm = DATATYPES.getElementsByTagName("type")[type];
	return elm;
}

SQL.Row.prototype.getColor = function() {
	var elm = this.getDataType();
	var g = this.getDataType().parentNode;
	return elm.getAttribute("color") || g.getAttribute("color") || "#fff";
}

SQL.Row.prototype.buildTypeSelect = function(id) { /* build selectbox with avail datatypes */
	var s = OZ.DOM.elm("select");
	var gs = DATATYPES.getElementsByTagName("group");
	for (var i=0;i<gs.length;i++) {
		var g = gs[i];
		var og = OZ.DOM.elm("optgroup");
		og.style.backgroundColor = g.getAttribute("color") || "#fff";
		og.label = g.getAttribute("label");
		s.appendChild(og);
		var ts = g.getElementsByTagName("type");
		for (var j=0;j<ts.length;j++) {
			var t = ts[j];
			var o = OZ.DOM.elm("option");
			if (t.getAttribute("color")) { o.style.backgroundColor = t.getAttribute("color"); }
			if (t.getAttribute("note")) { o.title = t.getAttribute("note"); }
			o.innerHTML = t.getAttribute("label");
			og.appendChild(o);
		}
	}
	s.selectedIndex = id;
	return s;
}

SQL.Row.prototype.destroy = function() {
	SQL.Visual.prototype.destroy.apply(this);
	while (this.relations.length) {
		this.owner.owner.removeRelation(this.relations[0]);
	}
	for (var i=0;i<this.keys.length;i++){ 
		this.keys[i].removeRow(this);
	}
}

SQL.Row.prototype.toXML = function() {
	var xml = "";

	var t = this.getTitle().replace(/"/g,"&quot;");
	var nn = (this.data.nll ? "1" : "0");
	var ai = (this.data.ai ? "1" : "0");
	xml += '<row name="'+t+'" null="'+nn+'" autoincrement="'+ai+'">\n';

	var elm = this.getDataType();
	var t = elm.getAttribute("sql");
	if (this.data.size.length) { t += "("+this.data.size+")"; }
	xml += "<datatype>"+t+"</datatype>\n";

	if (this.data.def || this.data.def === null) {
		var q = elm.getAttribute("quote");
		var d = this.data.def;
		if (d === null) { 
			d = "NULL"; 
		} else if (d != "CURRENT_TIMESTAMP") { 
			d = q+d+q; 
		}
		xml += "<default>"+SQL.escape(d)+"</default>";
	}

	for (var i=0;i<this.relations.length;i++) {
		var r = this.relations[i];
		if (r.row2 != this) { continue; }
		xml += '<relation table="'+r.row1.owner.getTitle()+'" row="'+r.row1.getTitle()+'" />\n';
	}

	if (this.data.comment) { 
		xml += "<comment>"+SQL.escape(this.data.comment)+"</comment>\n"; 
	}

	xml += "</row>\n";
	return xml;
}

SQL.Row.prototype.fromXML = function(node) {
	var name = node.getAttribute("name");

	var obj = { type:0, size:"" };
	obj.nll = (node.getAttribute("null") == "1");
	obj.ai = (node.getAttribute("autoincrement") == "1");

	var cs = node.getElementsByTagName("comment");
	if (cs.length && cs[0].firstChild) { obj.comment = cs[0].firstChild.nodeValue; }

	var d = node.getElementsByTagName("datatype");
	if (d.length && d[0].firstChild) {
		var s = d[0].firstChild.nodeValue;
		var r = s.match(/^([^\(]+)(\((.*)\))?.*$/);
		var type = r[1];
		if (r[3]) { obj.size = r[3]; }
		var types = window.DATATYPES.getElementsByTagName("type");
		for (var i=0;i<types.length;i++) {
			var sql = types[i].getAttribute("sql");
			var re = types[i].getAttribute("re");
			if (sql == type || (re && new RegExp(re).exec(type)) ) { obj.type = i; }
		}
	}

	var elm = DATATYPES.getElementsByTagName("type")[obj.type];
	var d = node.getElementsByTagName("default");
	if (d.length && d[0].firstChild) { 
		var def = d[0].firstChild.nodeValue;
		obj.def = def;
		var q = elm.getAttribute("quote");
		if (q) {
			var re = new RegExp("^"+q+"(.*)"+q+"$");
			var r = def.match(re);
			if (r) { obj.def = r[1]; }
		}
	}

	this.update(obj);
	this.setTitle(name);
}

SQL.Row.prototype.isPrimary = function() {
	for (var i=0;i<this.keys.length;i++) {
		var k = this.keys[i];
		if (k.getType() == "PRIMARY") { return true; }
	}
	return false;
}

SQL.Row.prototype.isUnique = function() {
	for (var i=0;i<this.keys.length;i++) {
		var k = this.keys[i];
		var t = k.getType();
		if (t == "PRIMARY" || t == "UNIQUE") { return true; }
	}
	return false;
}

SQL.Row.prototype.isKey = function() {
	return this.keys.length > 0;
}

SQL.Row.prototype.enter = function(e) {
	if (e.keyCode == 13) { 
		this.collapse();
	}
}
_application/javascriptOøbplist00‘
X$versionY$archiverT$topX$objects Ü†_NSKeyedArchiver—	_WebResourceResponseÄØ('-.4567YZ[\]^_`abcdefghijklmnopqrstuyzU$null› !"#$%&___nsurlrequest_proto_prop_obj_6___nsurlrequest_proto_prop_obj_3R$2___nsurlrequest_proto_prop_obj_0R$3___nsurlrequest_proto_prop_obj_4V$class___nsurlrequest_proto_prop_obj_1R$4R$0___nsurlrequest_proto_prop_obj_5___nsurlrequest_proto_prop_obj_2R$1Ä&ÄÄ	ÄÄ'ÄÄ Ä”()$+,WNS.base[NS.relativeÄ ÄÄ_+https://ondras.zarovi.cz/sql/demo/js/row.js“/012Z$classnameX$classesUNSURL¢13XNSObject#AƒS7x¶èT »”89:IXWNS.keysZNS.objectsÆ;<=>?@ABCDEFGHÄ	Ä
ÄÄÄÄÄÄÄÄÄÄÄÄÆJKLMNOPQRSTUVWÄÄÄÄÄÄÄÄÄÄ Ä!Ä"Ä#Ä$Ä%\Content-TypeZKeep-Alive]Accept-Ranges]Last-Modified_Content-EncodingVServerTDate^Content-LengthZConnectionX__hhaa___X-Content-Type-OptionsTEtag_X-Frame-OptionsTVary_application/javascript_timeout=5, max=96Ubytes_Mon, 04 Apr 2022 12:24:54 GMTTgzipVApache_Thu, 11 Aug 2022 17:02:56 GMTT3191ZKeep-Alive_ÿ

YnBsaXN0MDDdAQIDBAUGBwgJCgsMDQ4QEhQWGBocHiAiJCZcQ29udGVudC1UeXBlXxAPWC1GcmFtZS1PcHRpb25zWktlZXAtQWxpdmVUVmFyeV8QEENvbnRlbnQtRW5jb2RpbmdWU2VydmVyVERhdGVeQ29udGVudC1MZW5ndGhaQ29ubmVjdGlvbl8QFlgtQ29udGVudC1UeXBlLU9wdGlvbnNURXRhZ11BY2NlcHQtUmFuZ2VzXUxhc3QtTW9kaWZpZWShD18QFmFwcGxpY2F0aW9uL2phdmFzY3JpcHShEVpzYW1lb3JpZ2luoRNfEBF0aW1lb3V0PTUsIG1heD05NqEVXxAPQWNjZXB0LUVuY29kaW5noRdUZ3ppcKEZVkFwYWNoZaEbXxAdVGh1LCAxMSBBdWcgMjAyMiAxNzowMjo1NiBHTVShHVQzMTkxoR9aS2VlcC1BbGl2ZaEhV25vc25pZmahI18QGSIyZTcwLTVkYmQzMzczYTUxYmQtZ3ppcCKhJVVieXRlc6EnXxAdTW9uLCAwNCBBcHIgMjAyMiAxMjoyNDo1NCBHTVQACAAjADAAQgBNAFIAZQBsAHEAgACLAKQAqQC3AMUAxwDgAOIA7QDvAQMBBQEXARkBHgEgAScBKQFJAUsBUAFSAV0BXwFnAWkBhQGHAY0BjwAAAAAAAAIBAAAAAAAAACgAAAAAAAAAAAAAAAAAAAGvWnosniff_"2e70-5dbd3373a51bd-gzip"Zsameorigin_Accept-Encoding“/0vw_NSMutableDictionary£vx3\NSDictionary_application/javascript“/0{|_NSHTTPURLResponse£}~3_NSHTTPURLResponse]NSURLResponse    $ ) 2 7 I L b d è ï ∞ “ Ù ˜>Egjmè±¥∂∏∫ºæ¿¬ƒ≈«…ÀÕ‘‹ËÍÏÓ!,5;>GPRT[cn}ÅÉÖáâãçèëìïóô®™¨Æ∞≤¥∂∏∫ºæ¿¬ƒ∆”ﬁÏ˙(3<UZlqäû§ƒ…–ı ‹‰ "8<Ibg{ì                           °_+https://ondras.zarovi.cz/sql/demo/js/row.js‘LMNOO"‘/* --------------------- db table ------------ */
SQL.Table = function(owner, name, x, y, z) {
	this.owner = owner;
	this.rows = [];
	this.keys = [];
	this.zIndex = 0;
	this._ec = [];

	this.flag = false;
	this.selected = false;
	SQL.Visual.apply(this);
	this.data.comment = "";
	
	this.setTitle(name);
	this.x = x || 0;
	this.y = y || 0;
	this.setZ(z);
	this.snap();
}
SQL.Table.prototype = Object.create(SQL.Visual.prototype);

SQL.Table.prototype._build = function() {
	this.dom.container = OZ.DOM.elm("div", {className:"table"});
	this.dom.content = OZ.DOM.elm("table");
	var thead = OZ.DOM.elm("thead");
	var tr = OZ.DOM.elm("tr");
	this.dom.title = OZ.DOM.elm("td", {className:"title", colSpan:2});

	OZ.DOM.append(
		[this.dom.container, this.dom.content],
		[this.dom.content, thead],
		[thead, tr],
		[tr, this.dom.title]
	);
	
	this.dom.mini = OZ.DOM.elm("div", {className:"mini"});
	this.owner.map.dom.container.appendChild(this.dom.mini);

	this._ec.push(OZ.Event.add(this.dom.container, "click", this.click.bind(this)));
	this._ec.push(OZ.Event.add(this.dom.container, "dblclick", this.dblclick.bind(this)));
	this._ec.push(OZ.Event.add(this.dom.container, "mousedown", this.down.bind(this)));
	this._ec.push(OZ.Event.add(this.dom.container, "touchstart", this.down.bind(this)));
	this._ec.push(OZ.Event.add(this.dom.container, "touchmove", OZ.Event.prevent));
}

SQL.Table.prototype.setTitle = function(t) {
	var old = this.getTitle();
	for (var i=0;i<this.rows.length;i++) {
		var row = this.rows[i];
		for (var j=0;j<row.relations.length;j++) {
			var r = row.relations[j];
			if (r.row1 != row) { continue; }
			var tt = row.getTitle().replace(new RegExp(old,"g"),t);
			if (tt != row.getTitle()) { row.setTitle(tt); }
		}
	}
	SQL.Visual.prototype.setTitle.apply(this, [t]);
}

SQL.Table.prototype.getRelations = function() {
	var arr = [];
	for (var i=0;i<this.rows.length;i++) {
		var row = this.rows[i];
		for (var j=0;j<row.relations.length;j++) {
			var r = row.relations[j];
			if (arr.indexOf(r) == -1) { arr.push(r); }
		}
	}
	return arr;
}

SQL.Table.prototype.showRelations = function() {
	var rs = this.getRelations();
	for (var i=0;i<rs.length;i++) { rs[i].show(); }
}

SQL.Table.prototype.hideRelations = function() {
	var rs = this.getRelations();
	for (var i=0;i<rs.length;i++) { rs[i].hide(); }
}

SQL.Table.prototype.click = function(e) {
	OZ.Event.stop(e);
	var t = OZ.Event.target(e);
	this.owner.tableManager.select(this);
	
	if (t != this.dom.title) { return; } /* click on row */

	SQL.publish("tableclick", this);
	this.owner.rowManager.select(false);
}

SQL.Table.prototype.dblclick = function(e) {
	var t = OZ.Event.target(e);
	if (t == this.dom.title) { this.owner.tableManager.edit(); }
}

SQL.Table.prototype.select = function() { 
	if (this.selected) { return; }
	this.selected = true;
	OZ.DOM.addClass(this.dom.container, "selected");
	OZ.DOM.addClass(this.dom.mini, "mini_selected");
	this.redraw();
}

SQL.Table.prototype.deselect = function() { 
	if (!this.selected) { return; }
	this.selected = false;
	OZ.DOM.removeClass(this.dom.container, "selected");
	OZ.DOM.removeClass(this.dom.mini, "mini_selected");
	this.redraw();
}

SQL.Table.prototype.addRow = function(title, data) {
	var r = new SQL.Row(this, title, data);
	this.rows.push(r);
	this.dom.content.appendChild(r.dom.container);
	this.redraw();
	return r;
}

SQL.Table.prototype.removeRow = function(r) {
	var idx = this.rows.indexOf(r);
	if (idx == -1) { return; } 
	r.destroy();
	this.rows.splice(idx,1);
	this.redraw();
}

SQL.Table.prototype.addKey = function(name) {
	var k = new SQL.Key(this, name);
	this.keys.push(k);
	return k;
}

SQL.Table.prototype.removeKey = function(k) {
	var idx = this.keys.indexOf(k);
	if (idx == -1) { return; }
	k.destroy();
	this.keys.splice(idx,1);
}

SQL.Table.prototype.redraw = function() {
	var x = this.x;
	var y = this.y;
	if (this.selected) { x--; y--; }
	this.dom.container.style.left = x+"px";
	this.dom.container.style.top = y+"px";
	
	var ratioX = this.owner.map.width / this.owner.width;
	var ratioY = this.owner.map.height / this.owner.height;
	
	var w = this.dom.container.offsetWidth * ratioX;
	var h = this.dom.container.offsetHeight * ratioY;
	var x = this.x * ratioX;
	var y = this.y * ratioY;
	
	this.dom.mini.style.width = Math.round(w)+"px";
	this.dom.mini.style.height = Math.round(h)+"px";
	this.dom.mini.style.left = Math.round(x)+"px";
	this.dom.mini.style.top = Math.round(y)+"px";

	this.width = this.dom.container.offsetWidth;
	this.height = this.dom.container.offsetHeight;
	
	var rs = this.getRelations();
	for (var i=0;i<rs.length;i++) { rs[i].redraw(); }
}

SQL.Table.prototype.moveBy = function(dx, dy) {
	this.x += dx;
	this.y += dy;
	
	this.snap();
	this.redraw();
}

SQL.Table.prototype.moveTo = function(x, y) {
	this.x = x;
	this.y = y;

	this.snap();
	this.redraw();
}

SQL.Table.prototype.snap = function() {
	var snap = parseInt(SQL.Designer.getOption("snap"));
	if (snap) {
		this.x = Math.round(this.x / snap) * snap;
		this.y = Math.round(this.y / snap) * snap;
	}
}

SQL.Table.prototype.down = function(e) { /* mousedown - start drag */
	OZ.Event.stop(e);
	var t = OZ.Event.target(e);
	if (t != this.dom.title) { return; } /* on a row */
	
	/* touch? */
	if (e.type == "touchstart") {
		var event = e.touches[0];
		var moveEvent = "touchmove";
		var upEvent = "touchend";
	} else {
		var event = e;
		var moveEvent = "mousemove";
		var upEvent = "mouseup";
	}
	
	/* a non-shift click within a selection preserves the selection */
	if (e.shiftKey || ! this.selected) {
		this.owner.tableManager.select(this, e.shiftKey);
	}

	var t = SQL.Table;
	t.active = this.owner.tableManager.selection;
	var n = t.active.length;
	t.x = new Array(n);
	t.y = new Array(n);
	for (var i=0;i<n;i++) {
		/* position relative to mouse cursor */ 
		t.x[i] = t.active[i].x - event.clientX;
		t.y[i] = t.active[i].y - event.clientY;
	}
	
	if (this.owner.getOption("hide")) { 
		for (var i=0;i<n;i++) {
			t.active[i].hideRelations();
		}
	}
	
	this.documentMove = OZ.Event.add(document, moveEvent, this.move.bind(this));
	this.documentUp = OZ.Event.add(document, upEvent, this.up.bind(this));
}

SQL.Table.prototype.toXML = function() {
	var t = this.getTitle().replace(/"/g,"&quot;");
	var xml = "";
	xml += '<table x="'+this.x+'" y="'+this.y+'" name="'+t+'">\n';
	for (var i=0;i<this.rows.length;i++) {
		xml += this.rows[i].toXML();
	}
	for (var i=0;i<this.keys.length;i++) {
		xml += this.keys[i].toXML();
	}
	var c = this.getComment();
	if (c) { 
		xml += "<comment>"+SQL.escape(c)+"</comment>\n"; 
	}
	xml += "</table>\n";
	return xml;
}

SQL.Table.prototype.fromXML = function(node) {
	var name = node.getAttribute("name");
	this.setTitle(name);
	var x = parseInt(node.getAttribute("x")) || 0;
	var y = parseInt(node.getAttribute("y")) || 0;
	this.moveTo(x, y);
	var rows = node.getElementsByTagName("row");
	for (var i=0;i<rows.length;i++) {
		var row = rows[i];
		var r = this.addRow("");
		r.fromXML(row);
	}
	var keys = node.getElementsByTagName("key");
	for (var i=0;i<keys.length;i++) {
		var key = keys[i];
		var k = this.addKey();
		k.fromXML(key);
	}
	for (var i=0;i<node.childNodes.length;i++) {
		var ch = node.childNodes[i];
		if (ch.tagName && ch.tagName.toLowerCase() == "comment" && ch.firstChild) {
			this.setComment(ch.firstChild.nodeValue);
		}
	}
}

SQL.Table.prototype.getZ = function() {
	return this.zIndex;
}

SQL.Table.prototype.setZ = function(z) {
	this.zIndex = z;
	this.dom.container.style.zIndex = z;
}

SQL.Table.prototype.findNamedRow = function(n) { /* return row with a given name */
	for (var i=0;i<this.rows.length;i++) {
		if (this.rows[i].getTitle() == n) { return this.rows[i]; }
	}
	return false;
}

SQL.Table.prototype.setComment = function(c) {
	this.data.comment = c;
	this.dom.title.title = this.data.comment;
}

SQL.Table.prototype.getComment = function() {
	return this.data.comment;
}

SQL.Table.prototype.move = function(e) { /* mousemove */
	var t = SQL.Table;
	SQL.Designer.removeSelection();
	if (e.type == "touchmove") {
		if (e.touches.length > 1) { return; }
		var event = e.touches[0];
	} else {
		var event = e;
	}

	for (var i=0;i<t.active.length;i++) {
		var x = t.x[i] + event.clientX;
		var y = t.y[i] + event.clientY;
		x = Math.max(x, 0);
		y = Math.max(y, 0);
		t.active[i].moveTo(x,y);
	}
}

SQL.Table.prototype.up = function(e) {
	var t = SQL.Table;
	var d = SQL.Designer;
	if (d.getOption("hide")) { 
		for (var i=0;i<t.active.length;i++) {
			t.active[i].showRelations(); 
			t.active[i].redraw();
		}
	}
	t.active = false;
	OZ.Event.remove(this.documentMove);
	OZ.Event.remove(this.documentUp);
	this.owner.sync();
}

SQL.Table.prototype.destroy = function() {
	SQL.Visual.prototype.destroy.apply(this);
	this.dom.mini.parentNode.removeChild(this.dom.mini);
	while (this.rows.length) {
		this.removeRow(this.rows[0]);
	}
	this._ec.forEach(OZ.Event.remove, OZ.Event);
}
_application/javascriptO¡bplist00‘
X$versionY$archiverT$topX$objects Ü†_NSKeyedArchiver—	_WebResourceResponseÄØ('-.4567YZ[\]^_`abcdefghijklmnopqrstuyzU$null› !"#$%&___nsurlrequest_proto_prop_obj_6___nsurlrequest_proto_prop_obj_3R$2___nsurlrequest_proto_prop_obj_0R$3___nsurlrequest_proto_prop_obj_4V$class___nsurlrequest_proto_prop_obj_1R$4R$0___nsurlrequest_proto_prop_obj_5___nsurlrequest_proto_prop_obj_2R$1Ä&ÄÄ	ÄÄ'ÄÄ Ä”()$+,WNS.base[NS.relativeÄ ÄÄ_-https://ondras.zarovi.cz/sql/demo/js/table.js“/012Z$classnameX$classesUNSURL¢13XNSObject#AƒS7x¶ô  »”89:IXWNS.keysZNS.objectsÆ;<=>?@ABCDEFGHÄ	Ä
ÄÄÄÄÄÄÄÄÄÄÄÄÆJKLMNOPQRSTUVWÄÄÄÄÄÄÄÄÄÄ Ä!Ä"Ä#Ä$Ä%\Content-TypeZKeep-Alive]Accept-Ranges]Last-Modified_Content-EncodingVServerTDate^Content-LengthZConnectionX__hhaa___X-Content-Type-OptionsTEtag_X-Frame-OptionsTVary_application/javascript_timeout=5, max=99Ubytes_Thu, 05 Sep 2019 08:49:12 GMTTgzipVApache_Thu, 11 Aug 2022 17:02:56 GMTT2415ZKeep-Alive_ÿ

YnBsaXN0MDDdAQIDBAUGBwgJCgsMDQ4QEhQWGBocHiAiJCZcQ29udGVudC1UeXBlXxAPWC1GcmFtZS1PcHRpb25zWktlZXAtQWxpdmVUVmFyeV8QEENvbnRlbnQtRW5jb2RpbmdWU2VydmVyVERhdGVeQ29udGVudC1MZW5ndGhaQ29ubmVjdGlvbl8QFlgtQ29udGVudC1UeXBlLU9wdGlvbnNURXRhZ11BY2NlcHQtUmFuZ2VzXUxhc3QtTW9kaWZpZWShD18QFmFwcGxpY2F0aW9uL2phdmFzY3JpcHShEVpzYW1lb3JpZ2luoRNfEBF0aW1lb3V0PTUsIG1heD05OaEVXxAPQWNjZXB0LUVuY29kaW5noRdUZ3ppcKEZVkFwYWNoZaEbXxAdVGh1LCAxMSBBdWcgMjAyMiAxNzowMjo1NiBHTVShHVQyNDE1oR9aS2VlcC1BbGl2ZaEhV25vc25pZmahI18QGSIyMmQ0LTU5MWNhNjU1MTM1ZWMtZ3ppcCKhJVVieXRlc6EnXxAdVGh1LCAwNSBTZXAgMjAxOSAwODo0OToxMiBHTVQACAAjADAAQgBNAFIAZQBsAHEAgACLAKQAqQC3AMUAxwDgAOIA7QDvAQMBBQEXARkBHgEgAScBKQFJAUsBUAFSAV0BXwFnAWkBhQGHAY0BjwAAAAAAAAIBAAAAAAAAACgAAAAAAAAAAAAAAAAAAAGvWnosniff_"22d4-591ca655135ec-gzip"Zsameorigin_Accept-Encoding“/0vw_NSMutableDictionary£vx3\NSDictionary_application/javascript“/0{|_NSHTTPURLResponse£}~3_NSHTTPURLResponse]NSURLResponse    $ ) 2 7 I L b d è ï ∞ “ Ù ˜>Egjmè±¥∂∏∫ºæ¿¬ƒ≈«…ÀÕ‘‹ËÍÏÓ#.7=@IRTV]epÅÉÖáâãçèëìïóôõ™¨Æ∞≤¥∂∏∫ºæ¿¬ƒ∆»’‡Ó¸*5>W\nså†¶∆À“Ú˜ﬁÊ$:>Kdi}Åï                           £_-https://ondras.zarovi.cz/sql/demo/js/table.js‘QRSTO#/* --------------------------- relation (connector) ----------- */

SQL.Relation = function(owner, row1, row2) {
	this.owner = owner;
	this.row1 = row1;
	this.row2 = row2;
	this.color = "#000";
	this.hidden = false;
	this.relationColors = CONFIG.RELATION_COLORS;
	this.highlighted = null;
	SQL.Visual.apply(this);

	this.style = SQL.Designer.getOption("style");
	switch (this.style) {
		case "material-inspired": 
			this.relationColors = CONFIG.MATERIAL_RELATION_COLORS;
			break;
		case "original": 
		default:
			this.relationColors = CONFIG.RELATION_COLORS;
	}

	/* if one of the rows already has relations, inherit color */
	var all = row1.relations.concat(row2.relations);
	if (all.length) { /* inherit */
		this.color = all[0].getColor();
	} else if (this.relationColors) { /* pick next */
		SQL.Relation._counter++;
		var colorIndex = (SQL.Relation._counter - 1) % this.relationColors.length;
		this.color = this.relationColors[colorIndex];
	}

	this.row1.addRelation(this);
	this.row2.addRelation(this);
	this.dom = [];
	
	if (this.owner.vector) {
		var path = document.createElementNS(this.owner.svgNS, "path");
		path.setAttribute("stroke", this.color);
		path.setAttribute("stroke-width", CONFIG.RELATION_THICKNESS);
		path.setAttribute("fill", "none");
		this.owner.dom.svg.appendChild(path);
		this.dom.push(path);
	} else {
		for (var i=0;i<3;i++) {
			var div = OZ.DOM.elm("div",{position:"absolute",className:"relation",backgroundColor:this.color});
			this.dom.push(div);
			if (i & 1) { /* middle */
				OZ.Style.set(div, {width:CONFIG.RELATION_THICKNESS+"px"});
			} else { /* first & last */
				OZ.Style.set(div, {height:CONFIG.RELATION_THICKNESS+"px"});
			}
			this.owner.dom.container.appendChild(div);
		}
	}
	
	this.redraw();
}
SQL.Relation._counter = 0;
SQL.Relation.prototype = Object.create(SQL.Visual.prototype);

SQL.Relation.prototype.getColor = function() {
	return this.color;
}

SQL.Relation.prototype.highlight = function() {
	if (this.highlighted) { return; }
	this.highlighted = true;
	this.dom[0].setAttribute("stroke", CONFIG.RELATION_HIGHLIGHTED_COLOR);
	this.dom[0].setAttribute("stroke-width", CONFIG.RELATION_HIGHLIGHTED_THICKNESS);
	this.redraw();
}

SQL.Relation.prototype.dehighlight = function() {
	if (!this.highlighted) { return; }
	this.highlighted = false;
	this.dom[0].setAttribute("stroke", this.color);
	this.dom[0].setAttribute("stroke-width", CONFIG.RELATION_THICKNESS);
	this.redraw();
}

SQL.Relation.prototype.show = function() {
	this.hidden = false;
	for (var i=0;i<this.dom.length;i++) {
		this.dom[i].style.visibility = "";
	}
}

SQL.Relation.prototype.hide = function() {
	this.hidden = true;
	for (var i=0;i<this.dom.length;i++) {
		this.dom[i].style.visibility = "hidden";
	}
}

SQL.Relation.prototype.redrawNormal = function(p1, p2, half) {
	if (this.owner.vector) {
		var str = "M "+p1[0]+" "+p1[1]+" C "+(p1[0] + half)+" "+p1[1]+" ";
		str += (p2[0]-half)+" "+p2[1]+" "+p2[0]+" "+p2[1];
		this.dom[0].setAttribute("d",str);
	} else {
		this.dom[0].style.left = p1[0]+"px";
		this.dom[0].style.top = p1[1]+"px";
		this.dom[0].style.width = half+"px";

		this.dom[1].style.left = (p1[0] + half) + "px";
		this.dom[1].style.top = Math.min(p1[1],p2[1]) + "px";
		this.dom[1].style.height = (Math.abs(p1[1] - p2[1])+CONFIG.RELATION_THICKNESS)+"px";

		this.dom[2].style.left = (p1[0]+half+1)+"px";
		this.dom[2].style.top = p2[1]+"px";
		this.dom[2].style.width = half+"px";
	}
}

SQL.Relation.prototype.redrawSide = function(p1, p2, x) {
	if (this.owner.vector) {
		var str = "M "+p1[0]+" "+p1[1]+" C "+x+" "+p1[1]+" ";
		str += x+" "+p2[1]+" "+p2[0]+" "+p2[1];
		this.dom[0].setAttribute("d",str);
	} else {
		this.dom[0].style.left = Math.min(x,p1[0])+"px";
		this.dom[0].style.top = p1[1]+"px";
		this.dom[0].style.width = Math.abs(p1[0]-x)+"px";
		
		this.dom[1].style.left = x+"px";
		this.dom[1].style.top = Math.min(p1[1],p2[1]) + "px";
		this.dom[1].style.height = (Math.abs(p1[1] - p2[1])+CONFIG.RELATION_THICKNESS)+"px";
		
		this.dom[2].style.left = Math.min(x,p2[0])+"px";
		this.dom[2].style.top = p2[1]+"px";
		this.dom[2].style.width = Math.abs(p2[0]-x)+"px";
	}
}

SQL.Relation.prototype.redraw = function() { /* draw connector */
	if (this.hidden) { return; }
	var t1 = this.row1.owner.dom.container;
	var t2 = this.row2.owner.dom.container;

	var l1 = t1.offsetLeft;
	var l2 = t2.offsetLeft;
	var r1 = l1 + t1.offsetWidth;
	var r2 = l2 + t2.offsetWidth;
	var t1 = t1.offsetTop + this.row1.dom.container.offsetTop + Math.round(this.row1.dom.container.offsetHeight/2);
	var t2 = t2.offsetTop + this.row2.dom.container.offsetTop + Math.round(this.row2.dom.container.offsetHeight/2);
	
	if (this.row1.owner.selected) { t1++; l1++; r1--; }
	if (this.row2.owner.selected) { t2++; l2++; r2--; }
	
	var p1 = [0,0];
	var p2 = [0,0];
	
	if (r1 < l2 || r2 < l1) { /* between tables */
		if (Math.abs(r1 - l2) < Math.abs(r2 - l1)) {
			p1 = [r1,t1];
			p2 = [l2,t2];
		} else {
			p1 = [r2,t2];
			p2 = [l1,t1];
		}
		var half = Math.floor((p2[0] - p1[0])/2);
		this.redrawNormal(p1, p2, half);
	} else { /* next to tables */
		var x = 0;
		var l = 0;
		if (Math.abs(l1 - l2) < Math.abs(r1 - r2)) { /* left of tables */
			p1 = [l1,t1];
			p2 = [l2,t2];
			x = Math.min(l1,l2) - CONFIG.RELATION_SPACING;
		} else { /* right of tables */
			p1 = [r1,t1];
			p2 = [r2,t2];
			x = Math.max(r1,r2) + CONFIG.RELATION_SPACING;
		}
		this.redrawSide(p1, p2, x);
	} /* line next to tables */
}

SQL.Relation.prototype.destroy = function() {
	this.row1.removeRelation(this);
	this.row2.removeRelation(this);
	for (var i=0;i<this.dom.length;i++) {
		this.dom[i].parentNode.removeChild(this.dom[i]);
	}
}
_application/javascriptOƒbplist00‘
X$versionY$archiverT$topX$objects Ü†_NSKeyedArchiver—	_WebResourceResponseÄØ('-.4567YZ[\]^_`abcdefghijklmnopqrstuyzU$null› !"#$%&___nsurlrequest_proto_prop_obj_6___nsurlrequest_proto_prop_obj_3R$2___nsurlrequest_proto_prop_obj_0R$3___nsurlrequest_proto_prop_obj_4V$class___nsurlrequest_proto_prop_obj_1R$4R$0___nsurlrequest_proto_prop_obj_5___nsurlrequest_proto_prop_obj_2R$1Ä&ÄÄ	ÄÄ'ÄÄ Ä”()$+,WNS.base[NS.relativeÄ ÄÄ_0https://ondras.zarovi.cz/sql/demo/js/relation.js“/012Z$classnameX$classesUNSURL¢13XNSObject#AƒS7x¶°˘ »”89:IXWNS.keysZNS.objectsÆ;<=>?@ABCDEFGHÄ	Ä
ÄÄÄÄÄÄÄÄÄÄÄÄÆJKLMNOPQRSTUVWÄÄÄÄÄÄÄÄÄÄ Ä!Ä"Ä#Ä$Ä%\Content-TypeZKeep-Alive]Accept-Ranges]Last-Modified_Content-EncodingVServerTDate^Content-LengthZConnectionX__hhaa___X-Content-Type-OptionsTEtag_X-Frame-OptionsTVary_application/javascript_timeout=5, max=95Ubytes_Mon, 04 Apr 2022 12:24:54 GMTTgzipVApache_Thu, 11 Aug 2022 17:02:56 GMTT1622ZKeep-Alive_ÿ

YnBsaXN0MDDdAQIDBAUGBwgJCgsMDQ4QEhQWGBocHiAiJCZcQ29udGVudC1UeXBlXxAPWC1GcmFtZS1PcHRpb25zWktlZXAtQWxpdmVUVmFyeV8QEENvbnRlbnQtRW5jb2RpbmdWU2VydmVyVERhdGVeQ29udGVudC1MZW5ndGhaQ29ubmVjdGlvbl8QFlgtQ29udGVudC1UeXBlLU9wdGlvbnNURXRhZ11BY2NlcHQtUmFuZ2VzXUxhc3QtTW9kaWZpZWShD18QFmFwcGxpY2F0aW9uL2phdmFzY3JpcHShEVpzYW1lb3JpZ2luoRNfEBF0aW1lb3V0PTUsIG1heD05NaEVXxAPQWNjZXB0LUVuY29kaW5noRdUZ3ppcKEZVkFwYWNoZaEbXxAdVGh1LCAxMSBBdWcgMjAyMiAxNzowMjo1NiBHTVShHVQxNjIyoR9aS2VlcC1BbGl2ZaEhV25vc25pZmahI18QGSIxNjIzLTVkYmQzMzczYTUxYmQtZ3ppcCKhJVVieXRlc6EnXxAdTW9uLCAwNCBBcHIgMjAyMiAxMjoyNDo1NCBHTVQACAAjADAAQgBNAFIAZQBsAHEAgACLAKQAqQC3AMUAxwDgAOIA7QDvAQMBBQEXARkBHgEgAScBKQFJAUsBUAFSAV0BXwFnAWkBhQGHAY0BjwAAAAAAAAIBAAAAAAAAACgAAAAAAAAAAAAAAAAAAAGvWnosniff_"1623-5dbd3373a51bd-gzip"Zsameorigin_Accept-Encoding“/0vw_NSMutableDictionary£vx3\NSDictionary_application/javascript“/0{|_NSHTTPURLResponse£}~3_NSHTTPURLResponse]NSURLResponse    $ ) 2 7 I L b d è ï ∞ “ Ù ˜>Egjmè±¥∂∏∫ºæ¿¬ƒ≈«…ÀÕ‘‹ËÍÏÓ!&1:@CLUWY`hsÇÑÜàäåéêíîñòöúû≠Ø±≥µ∑πªΩø¡√≈«…Àÿ„Òˇ-8AZ_qvè£©…Œ’ı˙·È"'=ANglÄÑò                           ¶_0https://ondras.zarovi.cz/sql/demo/js/relation.js‘VWXYOÜ/* --------------------- db index ------------ */
SQL.Key = function(owner, type, name) {
	this.owner = owner;
	this.rows = [];
	this.type = type || "INDEX";
	this.name = name || "";
	SQL.Visual.apply(this);
}
SQL.Key.prototype = Object.create(SQL.Visual.prototype);

SQL.Key.prototype.setName = function(n) {
	this.name = n;
}

SQL.Key.prototype.getName = function() {
	return this.name;
}

SQL.Key.prototype.setType = function(t) {
	if (!t) { return; }
	this.type = t;
	for (var i=0;i<this.rows.length;i++) { this.rows[i].redraw(); }
}

SQL.Key.prototype.getType = function() {
	return this.type;
}

SQL.Key.prototype.addRow = function(r) {
	if (r.owner != this.owner) { return; }
	this.rows.push(r);
	r.addKey(this);
}

SQL.Key.prototype.removeRow = function(r) {
	var idx = this.rows.indexOf(r);
	if (idx == -1) { return; }
	r.removeKey(this);
	this.rows.splice(idx,1);
}

SQL.Key.prototype.destroy = function() {
	for (var i=0;i<this.rows.length;i++) {
		this.rows[i].removeKey(this);
	}
}

SQL.Key.prototype.getLabel = function() {
	return this.name || this.type;
}

SQL.Key.prototype.toXML = function() {
	var xml = "";
	xml += '<key type="'+this.getType()+'" name="'+this.getName()+'">\n';
	for (var i=0;i<this.rows.length;i++) {
		var r = this.rows[i];
		xml += '<part>'+r.getTitle()+'</part>\n';
	}
	xml += '</key>\n';
	return xml;
}

SQL.Key.prototype.fromXML = function(node) {
	this.setType(node.getAttribute("type"));
	this.setName(node.getAttribute("name"));
	var parts = node.getElementsByTagName("part");
	for (var i=0;i<parts.length;i++) {
		var name = parts[i].firstChild.nodeValue;
		var row = this.owner.findNamedRow(name);
		this.addRow(row);
	}
}
_application/javascriptOΩbplist00‘
X$versionY$archiverT$topX$objects Ü†_NSKeyedArchiver—	_WebResourceResponseÄØ('-.4567YZ[\]^_`abcdefghijklmnopqrstuyzU$null› !"#$%&___nsurlrequest_proto_prop_obj_6___nsurlrequest_proto_prop_obj_3R$2___nsurlrequest_proto_prop_obj_0R$3___nsurlrequest_proto_prop_obj_4V$class___nsurlrequest_proto_prop_obj_1R$4R$0___nsurlrequest_proto_prop_obj_5___nsurlrequest_proto_prop_obj_2R$1Ä&ÄÄ	ÄÄ'ÄÄ Ä”()$+,WNS.base[NS.relativeÄ ÄÄ_+https://ondras.zarovi.cz/sql/demo/js/key.js“/012Z$classnameX$classesUNSURL¢13XNSObject#AƒS7x¶´Õ »”89:IXWNS.keysZNS.objectsÆ;<=>?@ABCDEFGHÄ	Ä
ÄÄÄÄÄÄÄÄÄÄÄÄÆJKLMNOPQRSTUVWÄÄÄÄÄÄÄÄÄÄ Ä!Ä"Ä#Ä$Ä%\Content-TypeZKeep-Alive]Accept-Ranges]Last-Modified_Content-EncodingVServerTDate^Content-LengthZConnectionX__hhaa___X-Content-Type-OptionsTEtag_X-Frame-OptionsTVary_application/javascript_timeout=5, max=98Ubytes_Thu, 26 May 2016 21:04:07 GMTTgzipVApache_Thu, 11 Aug 2022 17:02:56 GMTS613ZKeep-Alive_ÿ

YnBsaXN0MDDdAQIDBAUGBwgJCgsMDQ4QEhQWGBocHiAiJCZcQ29udGVudC1UeXBlXxAPWC1GcmFtZS1PcHRpb25zWktlZXAtQWxpdmVUVmFyeV8QEENvbnRlbnQtRW5jb2RpbmdWU2VydmVyVERhdGVeQ29udGVudC1MZW5ndGhaQ29ubmVjdGlvbl8QFlgtQ29udGVudC1UeXBlLU9wdGlvbnNURXRhZ11BY2NlcHQtUmFuZ2VzXUxhc3QtTW9kaWZpZWShD18QFmFwcGxpY2F0aW9uL2phdmFzY3JpcHShEVpzYW1lb3JpZ2luoRNfEBF0aW1lb3V0PTUsIG1heD05OKEVXxAPQWNjZXB0LUVuY29kaW5noRdUZ3ppcKEZVkFwYWNoZaEbXxAdVGh1LCAxMSBBdWcgMjAyMiAxNzowMjo1NiBHTVShHVM2MTOhH1pLZWVwLUFsaXZloSFXbm9zbmlmZqEjXxAYIjY4Ni01MzNjNTIxODdiZDk5LWd6aXAioSVVYnl0ZXOhJ18QHVRodSwgMjYgTWF5IDIwMTYgMjE6MDQ6MDcgR01UAAgAIwAwAEIATQBSAGUAbABxAIAAiwCkAKkAtwDFAMcA4ADiAO0A7wEDAQUBFwEZAR4BIAEnASkBSQFLAU8BUQFcAV4BZgFoAYMBhQGLAY0AAAAAAAACAQAAAAAAAAAoAAAAAAAAAAAAAAAAAAABrQ==Wnosniff_"686-533c52187bd99-gzip"Zsameorigin_Accept-Encoding“/0vw_NSMutableDictionary£vx3\NSDictionary_application/javascript“/0{|_NSHTTPURLResponse£}~3_NSHTTPURLResponse]NSURLResponse    $ ) 2 7 I L b d è ï ∞ “ Ù ˜>Egjmè±¥∂∏∫ºæ¿¬ƒ≈«…ÀÕ‘‹ËÍÏÓ!,5;>GPRT[cn}ÅÉÖáâãçèëìïóô®™¨Æ∞≤¥∂∏∫ºæ¿¬ƒ∆”ﬁÏ˙(3<UZlqäû§ƒ…–Ùˇ€„˛	 6:G`ey}ë                           ü_+https://ondras.zarovi.cz/sql/demo/js/key.js‘[\]^ON/* --------------------- rubberband -------------------- */

SQL.Rubberband = function(owner) {
	this.owner = owner;
	SQL.Visual.apply(this);
	this.dom.container = OZ.$("rubberband");
	OZ.Event.add("area", "mousedown", this.down.bind(this));
}
SQL.Rubberband.prototype = Object.create(SQL.Visual.prototype);

SQL.Rubberband.prototype.down = function(e) {
	OZ.Event.prevent(e);
	var scroll = OZ.DOM.scroll();
	this.x = this.x0 = e.clientX + scroll[0];
	this.y = this.y0 = e.clientY + scroll[1];
	this.width = 0;
	this.height = 0;
	this.redraw();
	this.documentMove = OZ.Event.add(document, "mousemove", this.move.bind(this));
	this.documentUp = OZ.Event.add(document, "mouseup", this.up.bind(this));
}

SQL.Rubberband.prototype.move = function(e) {
	var scroll = OZ.DOM.scroll();
	var x = e.clientX + scroll[0];
	var y = e.clientY + scroll[1];
	this.width = Math.abs(x-this.x0);
	this.height = Math.abs(y-this.y0);
	if (x<this.x0) { this.x = x; } else { this.x = this.x0; }
	if (y<this.y0) { this.y = y; } else { this.y = this.y0; }
	this.redraw();
	this.dom.container.style.visibility = "visible";	
}

SQL.Rubberband.prototype.up = function(e) {
	OZ.Event.prevent(e);
	this.dom.container.style.visibility = "hidden";
	OZ.Event.remove(this.documentMove);
	OZ.Event.remove(this.documentUp);
	this.owner.tableManager.selectRect(this.x, this.y, this.width, this.height);
}

SQL.Rubberband.prototype.redraw = function() {
	this.dom.container.style.left = this.x+"px";
	this.dom.container.style.top = this.y+"px";
	this.dom.container.style.width = this.width+"px";
	this.dom.container.style.height = this.height+"px";
}
_application/javascriptOƒbplist00‘
X$versionY$archiverT$topX$objects Ü†_NSKeyedArchiver—	_WebResourceResponseÄØ('-.4567YZ[\]^_`abcdefghijklmnopqrstuyzU$null› !"#$%&___nsurlrequest_proto_prop_obj_6___nsurlrequest_proto_prop_obj_3R$2___nsurlrequest_proto_prop_obj_0R$3___nsurlrequest_proto_prop_obj_4V$class___nsurlrequest_proto_prop_obj_1R$4R$0___nsurlrequest_proto_prop_obj_5___nsurlrequest_proto_prop_obj_2R$1Ä&ÄÄ	ÄÄ'ÄÄ Ä”()$+,WNS.base[NS.relativeÄ ÄÄ_2https://ondras.zarovi.cz/sql/demo/js/rubberband.js“/012Z$classnameX$classesUNSURL¢13XNSObject#AƒS7x¶µW »”89:IXWNS.keysZNS.objectsÆ;<=>?@ABCDEFGHÄ	Ä
ÄÄÄÄÄÄÄÄÄÄÄÄÆJKLMNOPQRSTUVWÄÄÄÄÄÄÄÄÄÄ Ä!Ä"Ä#Ä$Ä%\Content-TypeZKeep-Alive]Accept-Ranges]Last-Modified_Content-EncodingVServerTDate^Content-LengthZConnectionX__hhaa___X-Content-Type-OptionsTEtag_X-Frame-OptionsTVary_application/javascript_timeout=5, max=99Ubytes_Thu, 26 May 2016 21:04:07 GMTTgzipVApache_Thu, 11 Aug 2022 17:02:56 GMTS537ZKeep-Alive_ÿ

YnBsaXN0MDDdAQIDBAUGBwgJCgsMDQ4QEhQWGBocHiAiJCZcQ29udGVudC1UeXBlXxAPWC1GcmFtZS1PcHRpb25zWktlZXAtQWxpdmVUVmFyeV8QEENvbnRlbnQtRW5jb2RpbmdWU2VydmVyVERhdGVeQ29udGVudC1MZW5ndGhaQ29ubmVjdGlvbl8QFlgtQ29udGVudC1UeXBlLU9wdGlvbnNURXRhZ11BY2NlcHQtUmFuZ2VzXUxhc3QtTW9kaWZpZWShD18QFmFwcGxpY2F0aW9uL2phdmFzY3JpcHShEVpzYW1lb3JpZ2luoRNfEBF0aW1lb3V0PTUsIG1heD05OaEVXxAPQWNjZXB0LUVuY29kaW5noRdUZ3ppcKEZVkFwYWNoZaEbXxAdVGh1LCAxMSBBdWcgMjAyMiAxNzowMjo1NiBHTVShHVM1MzehH1pLZWVwLUFsaXZloSFXbm9zbmlmZqEjXxAYIjY0ZS01MzNjNTIxODdjZDM5LWd6aXAioSVVYnl0ZXOhJ18QHVRodSwgMjYgTWF5IDIwMTYgMjE6MDQ6MDcgR01UAAgAIwAwAEIATQBSAGUAbABxAIAAiwCkAKkAtwDFAMcA4ADiAO0A7wEDAQUBFwEZAR4BIAEnASkBSQFLAU8BUQFcAV4BZgFoAYMBhQGLAY0AAAAAAAACAQAAAAAAAAAoAAAAAAAAAAAAAAAAAAABrQ==Wnosniff_"64e-533c52187cd39-gzip"Zsameorigin_Accept-Encoding“/0vw_NSMutableDictionary£vx3\NSDictionary_application/javascript“/0{|_NSHTTPURLResponse£}~3_NSHTTPURLResponse]NSURLResponse    $ ) 2 7 I L b d è ï ∞ “ Ù ˜>Egjmè±¥∂∏∫ºæ¿¬ƒ≈«…ÀÕ‘‹ËÍÏÓ#(3<BENWY[bjuÑÜàäåéêíîñòöúû†Ø±≥µ∑πªΩø¡√≈«…ÀÕ⁄ÂÛ /:C\asxë•´À–◊˜˚‚Í"'=ANglÄÑò                           ¶_2https://ondras.zarovi.cz/sql/demo/js/rubberband.js‘`abcOz/* --------------------- minimap ------------ */

SQL.Map = function(owner) {
	this.owner = owner;
	SQL.Visual.apply(this);
	this.dom.container = OZ.$("minimap");
	this.width = this.dom.container.offsetWidth - 2;
	this.height = this.dom.container.offsetHeight - 2;

	this.dom.port = OZ.DOM.elm("div",{className:"port", zIndex:1});
	this.dom.container.appendChild(this.dom.port);
	this.sync = this.sync.bind(this);

	this.flag = false;
	this.sync();

	OZ.Event.add(window, "resize", this.sync);
	OZ.Event.add(window, "scroll", this.sync);
	OZ.Event.add(this.dom.container, "mousedown", this.down.bind(this));
	OZ.Event.add(this.dom.container, "touchstart", this.down.bind(this));
	OZ.Event.add(this.dom.container, "touchmove", OZ.Event.prevent);
}
SQL.Map.prototype = Object.create(SQL.Visual.prototype);

SQL.Map.prototype.down = function(e) { /* mousedown - move view and start drag */
	this.flag = true;
	this.dom.container.style.cursor = "move";
	var pos = OZ.DOM.pos(this.dom.container);

	this.x = Math.round(pos[0] + this.l + this.w/2);
	this.y = Math.round(pos[1] + this.t + this.h/2);
	this.move(e);

	if (e.type == "touchstart") {
		var eventMove = "touchmove";
		var eventUp = "touchend";
	} else {
		var eventMove = "mousemove";
		var eventUp = "mouseup";
	}

	this.documentMove = OZ.Event.add(document, eventMove, this.move.bind(this));
	this.documentUp = OZ.Event.add(document, eventUp, this.up.bind(this));
}

SQL.Map.prototype.move = function(e) { /* mousemove */
	if (!this.flag) { return; }
	OZ.Event.prevent(e);

	if (e.type.match(/touch/)) {
		if (e.touches.length > 1) { return; }
		var event = e.touches[0];
	} else {
		var event = e;
	}

	var dx = event.clientX - this.x;
	var dy = event.clientY - this.y;
	if (this.l + dx < 0) { dx = -this.l; }
	if (this.t + dy < 0) { dy = -this.t; }
	if (this.l + this.w + 4 + dx > this.width) { dx = this.width - 4 - this.l - this.w; }
	if (this.t + this.h + 4 + dy > this.height) { dy = this.height - 4 - this.t - this.h; }


	this.x += dx;
	this.y += dy;

	this.l += dx;
	this.t += dy;

	var coefX = this.width / this.owner.width;
	var coefY = this.height / this.owner.height;
	var left = this.l / coefX;
	var top = this.t / coefY;

	document.documentElement.scrollLeft = Math.round(left);
	document.documentElement.scrollTop = Math.round(top);

	this.redraw();
}

SQL.Map.prototype.up = function(e) { /* mouseup */
	this.flag = false;
	this.dom.container.style.cursor = "";
	OZ.Event.remove(this.documentMove);
	OZ.Event.remove(this.documentUp);
}

SQL.Map.prototype.sync = function() { /* when window changes, adjust map */
	var dims = OZ.DOM.win();
	var scroll = OZ.DOM.scroll();
	var scaleX = this.width / this.owner.width;
	var scaleY = this.height / this.owner.height;

	var w = dims[0] * scaleX - 4 - 0;
	var h = dims[1] * scaleY - 4 - 0;
	var x = scroll[0] * scaleX;
	var y = scroll[1] * scaleY;

	this.w = Math.round(w);
	this.h = Math.round(h);
	this.l = Math.round(x);
	this.t = Math.round(y);

	this.redraw();
}

SQL.Map.prototype.redraw = function() {
	this.dom.port.style.width = this.w+"px";
	this.dom.port.style.height = this.h+"px";
	this.dom.port.style.left = this.l+"px";
	this.dom.port.style.top = this.t+"px";
}
_application/javascriptOæbplist00‘
X$versionY$archiverT$topX$objects Ü†_NSKeyedArchiver—	_WebResourceResponseÄØ('-.4567YZ[\]^_`abcdefghijklmnopqrstuyzU$null› !"#$%&___nsurlrequest_proto_prop_obj_6___nsurlrequest_proto_prop_obj_3R$2___nsurlrequest_proto_prop_obj_0R$3___nsurlrequest_proto_prop_obj_4V$class___nsurlrequest_proto_prop_obj_1R$4R$0___nsurlrequest_proto_prop_obj_5___nsurlrequest_proto_prop_obj_2R$1Ä&ÄÄ	ÄÄ'ÄÄ Ä”()$+,WNS.base[NS.relativeÄ ÄÄ_+https://ondras.zarovi.cz/sql/demo/js/map.js“/012Z$classnameX$classesUNSURL¢13XNSObject#AƒS7x¶Ω‰ »”89:IXWNS.keysZNS.objectsÆ;<=>?@ABCDEFGHÄ	Ä
ÄÄÄÄÄÄÄÄÄÄÄÄÆJKLMNOPQRSTUVWÄÄÄÄÄÄÄÄÄÄ Ä!Ä"Ä#Ä$Ä%\Content-TypeZKeep-Alive]Accept-Ranges]Last-Modified_Content-EncodingVServerTDate^Content-LengthZConnectionX__hhaa___X-Content-Type-OptionsTEtag_X-Frame-OptionsTVary_application/javascript_timeout=5, max=99Ubytes_Wed, 27 Apr 2022 11:55:20 GMTTgzipVApache_Thu, 11 Aug 2022 17:02:56 GMTT1002ZKeep-Alive_ÿ

YnBsaXN0MDDdAQIDBAUGBwgJCgsMDQ4QEhQWGBocHiAiJCZcQ29udGVudC1UeXBlXxAPWC1GcmFtZS1PcHRpb25zWktlZXAtQWxpdmVUVmFyeV8QEENvbnRlbnQtRW5jb2RpbmdWU2VydmVyVERhdGVeQ29udGVudC1MZW5ndGhaQ29ubmVjdGlvbl8QFlgtQ29udGVudC1UeXBlLU9wdGlvbnNURXRhZ11BY2NlcHQtUmFuZ2VzXUxhc3QtTW9kaWZpZWShD18QFmFwcGxpY2F0aW9uL2phdmFzY3JpcHShEVpzYW1lb3JpZ2luoRNfEBF0aW1lb3V0PTUsIG1heD05OaEVXxAPQWNjZXB0LUVuY29kaW5noRdUZ3ppcKEZVkFwYWNoZaEbXxAdVGh1LCAxMSBBdWcgMjAyMiAxNzowMjo1NiBHTVShHVQxMDAyoR9aS2VlcC1BbGl2ZaEhV25vc25pZmahI18QGCJjN2EtNWRkYTE3YmQxYTIzNy1nemlwIqElVWJ5dGVzoSdfEB1XZWQsIDI3IEFwciAyMDIyIDExOjU1OjIwIEdNVAAIACMAMABCAE0AUgBlAGwAcQCAAIsApACpALcAxQDHAOAA4gDtAO8BAwEFARcBGQEeASABJwEpAUkBSwFQAVIBXQFfAWcBaQGEAYYBjAGOAAAAAAAAAgEAAAAAAAAAKAAAAAAAAAAAAAAAAAAAAa4=Wnosniff_"c7a-5dda17bd1a237-gzip"Zsameorigin_Accept-Encoding“/0vw_NSMutableDictionary£vx3\NSDictionary_application/javascript“/0{|_NSHTTPURLResponse£}~3_NSHTTPURLResponse]NSURLResponse    $ ) 2 7 I L b d è ï ∞ “ Ù ˜>Egjmè±¥∂∏∫ºæ¿¬ƒ≈«…ÀÕ‘‹ËÍÏÓ!,5;>GPRT[cn}ÅÉÖáâãçèëìïóô®™¨Æ∞≤¥∂∏∫ºæ¿¬ƒ∆”ﬁÏ˙(3<UZlqäû§ƒ…–ı ‹‰ˇ
!7;Hafz~í                           †_+https://ondras.zarovi.cz/sql/demo/js/map.js‘efghO∂/* ------------------ minimize/restore bar ----------- */

SQL.Toggle = function(elm) {
	this._state = null;
	this._elm = elm;
	OZ.Event.add(elm, "click", this._click.bind(this));
	
	var defaultState = true;
	if (document.location.href.match(/toolbar=hidden/)) { defaultState = false; }
	this._switch(defaultState);
}

SQL.Toggle.prototype._click = function(e) {
	this._switch(!this._state);
}

SQL.Toggle.prototype._switch = function(state) {
	this._state = state;
	if (this._state) {
		OZ.$("bar").style.maxHeight = "";
	} else {
		OZ.$("bar").style.overflow = "hidden";
		OZ.$("bar").style.maxHeight = this._elm.offsetHeight + "px";
	}
	this._elm.className = (this._state ? "on" : "off");
}
_application/javascriptO¿bplist00‘
X$versionY$archiverT$topX$objects Ü†_NSKeyedArchiver—	_WebResourceResponseÄØ('-.4567YZ[\]^_`abcdefghijklmnopqrstuyzU$null› !"#$%&___nsurlrequest_proto_prop_obj_6___nsurlrequest_proto_prop_obj_3R$2___nsurlrequest_proto_prop_obj_0R$3___nsurlrequest_proto_prop_obj_4V$class___nsurlrequest_proto_prop_obj_1R$4R$0___nsurlrequest_proto_prop_obj_5___nsurlrequest_proto_prop_obj_2R$1Ä&ÄÄ	ÄÄ'ÄÄ Ä”()$+,WNS.base[NS.relativeÄ ÄÄ_.https://ondras.zarovi.cz/sql/demo/js/toggle.js“/012Z$classnameX$classesUNSURL¢13XNSObject#AƒS7x¶«  »”89:IXWNS.keysZNS.objectsÆ;<=>?@ABCDEFGHÄ	Ä
ÄÄÄÄÄÄÄÄÄÄÄÄÆJKLMNOPQRSTUVWÄÄÄÄÄÄÄÄÄÄ Ä!Ä"Ä#Ä$Ä%\Content-TypeZKeep-Alive]Accept-Ranges]Last-Modified_Content-EncodingVServerTDate^Content-LengthZConnectionX__hhaa___X-Content-Type-OptionsTEtag_X-Frame-OptionsTVary_application/javascript_timeout=5, max=94Ubytes_Thu, 05 Sep 2019 08:49:12 GMTTgzipVApache_Thu, 11 Aug 2022 17:02:56 GMTS346ZKeep-Alive_ÿ

YnBsaXN0MDDdAQIDBAUGBwgJCgsMDQ4QEhQWGBocHiAiJCZcQ29udGVudC1UeXBlXxAPWC1GcmFtZS1PcHRpb25zWktlZXAtQWxpdmVUVmFyeV8QEENvbnRlbnQtRW5jb2RpbmdWU2VydmVyVERhdGVeQ29udGVudC1MZW5ndGhaQ29ubmVjdGlvbl8QFlgtQ29udGVudC1UeXBlLU9wdGlvbnNURXRhZ11BY2NlcHQtUmFuZ2VzXUxhc3QtTW9kaWZpZWShD18QFmFwcGxpY2F0aW9uL2phdmFzY3JpcHShEVpzYW1lb3JpZ2luoRNfEBF0aW1lb3V0PTUsIG1heD05NKEVXxAPQWNjZXB0LUVuY29kaW5noRdUZ3ppcKEZVkFwYWNoZaEbXxAdVGh1LCAxMSBBdWcgMjAyMiAxNzowMjo1NiBHTVShHVMzNDahH1pLZWVwLUFsaXZloSFXbm9zbmlmZqEjXxAYIjJiNi01OTFjYTY1NTEzNWVjLWd6aXAioSVVYnl0ZXOhJ18QHVRodSwgMDUgU2VwIDIwMTkgMDg6NDk6MTIgR01UAAgAIwAwAEIATQBSAGUAbABxAIAAiwCkAKkAtwDFAMcA4ADiAO0A7wEDAQUBFwEZAR4BIAEnASkBSQFLAU8BUQFcAV4BZgFoAYMBhQGLAY0AAAAAAAACAQAAAAAAAAAoAAAAAAAAAAAAAAAAAAABrQ==Wnosniff_"2b6-591ca655135ec-gzip"Zsameorigin_Accept-Encoding“/0vw_NSMutableDictionary£vx3\NSDictionary_application/javascript“/0{|_NSHTTPURLResponse£}~3_NSHTTPURLResponse]NSURLResponse    $ ) 2 7 I L b d è ï ∞ “ Ù ˜>Egjmè±¥∂∏∫ºæ¿¬ƒ≈«…ÀÕ‘‹ËÍÏÓ$/8>AJSUW^fqÄÇÑÜàäåéêíîñòöú´≠Ø±≥µ∑πªΩø¡√≈«…÷·Ô˝+6?X]otç°ß«Ã”Û˜ﬁÊ#9=Jch|Äî                           ¢_.https://ondras.zarovi.cz/sql/demo/js/toggle.js‘jklmO;NSQL.IO = function(owner) {
	this.owner = owner;
	this._name = ""; /* last used name with server load/save */
	this.lastUsedName = ""; /* last used name with local storage or dropbox load/save */
	this.dom = {
		container:OZ.$("io")
	};

	var ids = ["saveload","clientlocalsave", "clientsave", "clientlocalload", "clientlocallist","clientload", "clientsql", 
				"dropboxsave", "dropboxload", "dropboxlist",
				"quicksave", "serversave", "serverload",
				"serverlist", "serverimport"];
	for (var i=0;i<ids.length;i++) {
		var id = ids[i];
		var elm = OZ.$(id);
		this.dom[id] = elm;
		elm.value = _(id);
	}
	
	this.dom.quicksave.value += " (F2)";

	var ids = ["client","server","output","backendlabel"];
	for (var i=0;i<ids.length;i++) {
		var id = ids[i];
		var elm = OZ.$(id);
		elm.innerHTML = _(id);
	}
	
	this.dom.ta = OZ.$("textarea");
	this.dom.backend = OZ.$("backend");

	/* init dropbox before hiding the container so it can adjust its buttons */	
	this.dropBoxInit();

	this.dom.container.parentNode.removeChild(this.dom.container);
	this.dom.container.style.visibility = "";
	
	this.saveresponse = this.saveresponse.bind(this);
	this.loadresponse = this.loadresponse.bind(this);
	this.listresponse = this.listresponse.bind(this);
	this.importresponse = this.importresponse.bind(this);
	
	OZ.Event.add(this.dom.saveload, "click", this.click.bind(this));
	OZ.Event.add(this.dom.clientlocalsave, "click", this.clientlocalsave.bind(this));
	OZ.Event.add(this.dom.clientsave, "click", this.clientsave.bind(this));
	OZ.Event.add(this.dom.clientlocalload, "click", this.clientlocalload.bind(this));
	OZ.Event.add(this.dom.clientlocallist, "click", this.clientlocallist.bind(this));
	OZ.Event.add(this.dom.clientload, "click", this.clientload.bind(this));
	OZ.Event.add(this.dom.dropboxload, "click", this.dropboxload.bind(this));
	OZ.Event.add(this.dom.dropboxsave, "click", this.dropboxsave.bind(this));
	OZ.Event.add(this.dom.dropboxlist, "click", this.dropboxlist.bind(this));
	OZ.Event.add(this.dom.clientsql, "click", this.clientsql.bind(this));
	OZ.Event.add(this.dom.quicksave, "click", this.quicksave.bind(this));
	OZ.Event.add(this.dom.serversave, "click", this.serversave.bind(this));
	OZ.Event.add(this.dom.serverload, "click", this.serverload.bind(this));
	OZ.Event.add(this.dom.serverlist, "click", this.serverlist.bind(this));
	OZ.Event.add(this.dom.serverimport, "click", this.serverimport.bind(this));
	OZ.Event.add(document, "keydown", this.press.bind(this));
	this.build();
}

SQL.IO.prototype.build = function() {
	OZ.DOM.clear(this.dom.backend);

	var bs = CONFIG.AVAILABLE_BACKENDS;
	var be = CONFIG.DEFAULT_BACKEND;
	var r = window.location.search.substring(1).match(/backend=([^&]*)/);
	if (r) {
		req = r[1];
		if (bs.indexOf(req) != -1) {
		  be = req;
		}
	}
	for (var i=0;i<bs.length;i++) {
		var o = OZ.DOM.elm("option");
		o.value = bs[i];
		o.innerHTML = bs[i];
		this.dom.backend.appendChild(o);
		if (bs[i] == be) { this.dom.backend.selectedIndex = i; }
	}
}

SQL.IO.prototype.click = function() { /* open io dialog */
	this.build();
	this.dom.ta.value = "";
	this.dom.clientsql.value = _("clientsql") + " (" + window.DATATYPES.getAttribute("db") + ")";
	this.owner.window.open(_("saveload"),this.dom.container);
}

SQL.IO.prototype.fromXMLText = function(xml) {
	try {
		if (window.DOMParser) {
			var parser = new DOMParser();
			var xmlDoc = parser.parseFromString(xml, "text/xml");
		} else if (window.ActiveXObject || "ActiveXObject" in window) {
			var xmlDoc = new ActiveXObject("Microsoft.XMLDOM");
			xmlDoc.loadXML(xml);
		} else {
			throw new Error("No XML parser available.");
		}
	} catch(e) { 
		alert(_("xmlerror")+': '+e.message);
		return;
	}
	this.fromXML(xmlDoc);
}

SQL.IO.prototype.fromXML = function(xmlDoc) {
	if (!xmlDoc || !xmlDoc.documentElement) {
		alert(_("xmlerror")+': Null document');
		return false; 
	}
	this.owner.fromXML(xmlDoc.documentElement);
	this.owner.window.close();
	return true;
}

SQL.IO.prototype.clientsave = function() {
	var xml = this.owner.toXML();
	this.dom.ta.value = xml;
}

SQL.IO.prototype.clientload = function() {
	var xml = this.dom.ta.value;
	if (!xml) {
		alert(_("empty"));
		return;
	}

	this.fromXMLText(xml);
}

SQL.IO.prototype.promptName = function(title, suffix) {
	var lastUsedName = this.owner.getOption("lastUsedName") || this.lastUsedName;
	var name = prompt(_(title), lastUsedName);
	if (!name) { return null; }
	if (suffix && name.endsWith(suffix)) {
		// remove suffix from name
		name = name.substr(0, name.length-4);
	}
	this.owner.setOption("lastUsedName", name);
	this.lastUsedName = name;	// save this also in variable in case cookies are disabled
	return name;
}

SQL.IO.prototype.clientlocalsave = function() {
	if (!window.localStorage) { 
		alert("Sorry, your browser does not seem to support localStorage.");
		return;
	}
	
	var xml = this.owner.toXML();
	if (xml.length >= (5*1024*1024)/2) { /* this is a very big db structure... */
		alert("Warning: your database structure is above 5 megabytes in size, this is above the localStorage single key limit allowed by some browsers, example Mozilla Firefox 10");
		return;
	}

	var key = this.promptName("serversaveprompt");
	if (!key) { return; }

	key = "wwwsqldesigner_databases_" + (key || "default");
	
	try {
		localStorage.setItem(key, xml);
		if (localStorage.getItem(key) != xml) { throw new Error("Content verification failed"); }
	} catch (e) {
		alert("Error saving database structure to localStorage! ("+e.message+")");
	}
}

SQL.IO.prototype.clientlocalload = function() {
	if (!window.localStorage) { 
		alert("Sorry, your browser does not seem to support localStorage.");
		return;
	}
	
	var key = this.promptName("serverloadprompt");
	if (!key) { return; }

	key = "wwwsqldesigner_databases_" + (key || "default");
	
	try {
		var xml = localStorage.getItem(key);
		if (!xml) { throw new Error("No data available"); }
	} catch (e) {
		alert("Error loading database structure from localStorage! ("+e.message+")");
		return;
	}
	
	this.fromXMLText(xml);
}

SQL.IO.prototype.clientlocallist = function() {
	if (!window.localStorage) { 
		alert("Sorry, your browser does not seem to support localStorage.");
		return;
	}
	
	/* --- Define some useful vars --- */
	var baseKeysName = "wwwsqldesigner_databases_";
	var localLen = localStorage.length;
	var data = "";
	var schemasFound = false;
	var code = 200;
	
	/* --- work --- */
	try {
		for (var i = 0; i< localLen; ++i) {
			var key = localStorage.key(i);
			if((new RegExp(baseKeysName)).test(key)) {
				var result = key.substring(baseKeysName.length);
				schemasFound = true;
				data += result + "\n";
			}
		}
		if (!schemasFound) {
			throw new Error("No data available");
		}
	}  catch (e) {
		alert("Error loading database names from localStorage! ("+e.message+")");
		return;
	}
	this.listresponse(data, code);
}

/* ------------------------- Dropbox start ------------------------ */

/**
 * The following code uses this lib: https://github.com/dropbox/dropbox-js
 */
SQL.IO.prototype.dropBoxInit = function() {
	if (CONFIG.DROPBOX_KEY) {
		this.dropboxClient = new Dropbox.Client({ key: CONFIG.DROPBOX_KEY });
	} else {
		this.dropboxClient = null;
		// Hide the Dropbox buttons
		var elems = document.querySelectorAll("[id^=dropbox]");	// gets all tags whose id start with "dropbox"
		[].slice.call(elems).forEach(
			function(elem) { elem.style.display = "none"; }
		);
	}
}

SQL.IO.prototype.showDropboxError = function(error) {
	var prefix = _("Dropbox error")+": ";
	var msg = error.status;

	switch (error.status) {
	  case Dropbox.ApiError.INVALID_TOKEN:
		// If you're using dropbox.js, the only cause behind this error is that
		// the user token expired.
		// Get the user through the authentication flow again.
		msg = _("Token expired - retry the operation, authenticating again with Dropbox");
		this.dropboxClient.reset();
		break;

	  case Dropbox.ApiError.NOT_FOUND:
		// The file or folder you tried to access is not in the user's Dropbox.
		// Handling this error is specific to your application.
		msg = _("File not found");
		break;

	  case Dropbox.ApiError.OVER_QUOTA:
		// The user is over their Dropbox quota.
		// Tell them their Dropbox is full. Refreshing the page won't help.
		msg = _("Dropbox is full");
		break;

	  case Dropbox.ApiError.RATE_LIMITED:
		// Too many API requests. Tell the user to try again later.
		// Long-term, optimize your code to use fewer API calls.
		break;

	  case Dropbox.ApiError.NETWORK_ERROR:
		// An error occurred at the XMLHttpRequest layer.
		// Most likely, the user's network connection is down.
		// API calls will not succeed until the user gets back online.
		msg = _("Network error");
		break;

	  case Dropbox.ApiError.INVALID_PARAM:
	  case Dropbox.ApiError.OAUTH_ERROR:
	  case Dropbox.ApiError.INVALID_METHOD:
	  default:
		// Caused by a bug in dropbox.js, in your application, or in Dropbox.
		// Tell the user an error occurred, ask them to refresh the page.
	}

	alert (prefix+msg);
};

SQL.IO.prototype.showDropboxAuthenticate = function(connectedCallBack) {
	if (!this.dropboxClient) return false;

	// We want to use a popup window for authentication as the default redirection won't work for us as it'll make us lose our schema data
	var href = window.location.href;
	var prefix = href.substring(0, href.lastIndexOf('/')) + "/";
	this.dropboxClient.authDriver(new Dropbox.AuthDriver.Popup({ receiverUrl: prefix+"dropbox-oauth-receiver.html" }));

	// Now let's authenticate us
	var sql_io = this;
	sql_io.dropboxClient.authenticate( function(error, client) {
		if (error) {
			sql_io.showDropboxError(error);
		} else {
			// We're authenticated
			connectedCallBack();
		}
		return;
	});

	return true;
}

SQL.IO.prototype.dropboxsave = function() {
	var sql_io = this;
	sql_io.showDropboxAuthenticate( function() {
		var key = sql_io.promptName("serversaveprompt", ".xml");
		if (!key) { return; }

		var filename = (key || "default") + ".xml";
	
		sql_io.listresponse("Saving...", 200);
		var xml = sql_io.owner.toXML();
		sql_io.dropboxClient.writeFile(filename, xml, function(error, stat) {
			if (error) {
				sql_io.listresponse("", 200);
				return sql_io.showDropboxError(error);
			}
			sql_io.listresponse(filename+" "+_("was saved to Dropbox"), 200);
		});
	});
}

SQL.IO.prototype.dropboxload = function() {
	var sql_io = this;
	sql_io.showDropboxAuthenticate( function() {
		var key = sql_io.promptName("serverloadprompt", ".xml");
		if (!key) { return; }

		var filename = (key || "default") + ".xml";
	
		sql_io.listresponse("Loading...", 200);
		sql_io.dropboxClient.readFile(filename, function(error, data) {
			sql_io.listresponse("", 200);
			if (error) {
				return sql_io.showDropboxError(error);
			}
			sql_io.fromXMLText(data);
		});
	});
}

SQL.IO.prototype.dropboxlist = function() {
	var sql_io = this;
	sql_io.showDropboxAuthenticate( function() {
		sql_io.listresponse("Loading...", 200);
		sql_io.dropboxClient.readdir("/", function(error, entries) {
			if (error) {
				sql_io.listresponse("", 200);
				return sql_io.showDropboxError(error);
			}
			var data = entries.join("\n")+"\n";
			sql_io.listresponse(data, 200);
		});
	});
}


/* ------------------------- Dropbox end ------------------------ */

SQL.IO.prototype.clientsql = function() {
	var bp = this.owner.getOption("staticpath");
	var path = bp + "db/"+window.DATATYPES.getAttribute("db")+"/output.xsl";
	var h = this.owner.getXhrHeaders();
	this.owner.window.showThrobber();
	OZ.Request(path, this.finish.bind(this), {xml:true, headers:h});
}

SQL.IO.prototype.finish = function(xslDoc) {
	this.owner.window.hideThrobber();
	var xml = this.owner.toXML();
	var sql = "";
	try {
		if (window.XSLTProcessor && window.DOMParser) {
			var parser = new DOMParser();
			var xmlDoc = parser.parseFromString(xml, "text/xml");
			var xsl = new XSLTProcessor();
			xsl.importStylesheet(xslDoc);
			var result = xsl.transformToDocument(xmlDoc);
			sql = result.documentElement.textContent;
		} else if (window.ActiveXObject || "ActiveXObject" in window) {
			var xmlDoc = new ActiveXObject("Microsoft.XMLDOM");
			xmlDoc.loadXML(xml);
			sql = xmlDoc.transformNode(xslDoc);
		} else {
			throw new Error("No XSLT processor available");
		}
	} catch(e) {
		alert(_("xmlerror")+': '+e.message);
		return;
	}
	this.dom.ta.value = sql.trim();
}

SQL.IO.prototype.serversave = function(e, keyword) {
	var name = keyword || prompt(_("serversaveprompt"), this._name);
	if (!name) { return; }
	this._name = name;
	var xml = this.owner.toXML();
	var bp = this.owner.getOption("xhrpath");
	var url = bp + "backend/"+this.dom.backend.value+"/?action=save&keyword="+encodeURIComponent(name);
	var h = this.owner.getXhrHeaders();
	h["Content-type"] = "application/xml";
	this.owner.window.showThrobber();
	this.owner.setTitle(name);
	OZ.Request(url, this.saveresponse, {xml:true, method:"post", data:xml, headers:h});
}

SQL.IO.prototype.quicksave = function(e) {
	this.serversave(e, this._name);
}

SQL.IO.prototype.serverload = function(e, keyword) {
	var name = keyword || prompt(_("serverloadprompt"), this._name);
	if (!name) { return; }
	this._name = name;
	var bp = this.owner.getOption("xhrpath");
	var url = bp + "backend/"+this.dom.backend.value+"/?action=load&keyword="+encodeURIComponent(name);
	var h = this.owner.getXhrHeaders();
	this.owner.window.showThrobber();
	this.name = name;
	OZ.Request(url, this.loadresponse, {xml:true, headers:h});
}

SQL.IO.prototype.serverlist = function(e) {
	var bp = this.owner.getOption("xhrpath");
	var url = bp + "backend/"+this.dom.backend.value+"/?action=list";
	var h = this.owner.getXhrHeaders();
	this.owner.window.showThrobber();
	OZ.Request(url, this.listresponse, {headers:h});
}

SQL.IO.prototype.serverimport = function(e) {
	var name = prompt(_("serverimportprompt"), "");
	if (!name) { return; }
	var bp = this.owner.getOption("xhrpath");
	var url = bp + "backend/"+this.dom.backend.value+"/?action=import&database="+name;
	var h = this.owner.getXhrHeaders();
	this.owner.window.showThrobber();
	OZ.Request(url, this.importresponse, {xml:true, headers:h});
}

SQL.IO.prototype.check = function(code) {
	switch (code) {
		case 201:
		case 404:
		case 500:
		case 501:
		case 503:
			var lang = "http"+code;
			this.dom.ta.value = _("httpresponse")+": "+_(lang);
			return false;
		break;
		default: return true;
	}
}

SQL.IO.prototype.saveresponse = function(data, code) {
	this.owner.window.hideThrobber();
	this.check(code);
}

SQL.IO.prototype.loadresponse = function(data, code) {
	this.owner.window.hideThrobber();
	if (!this.check(code)) { return; }
	this.fromXML(data);
	this.owner.setTitle(this.name);
}

SQL.IO.prototype.listresponse = function(data, code) {
	this.owner.window.hideThrobber();
	if (!this.check(code)) { return; }
	this.dom.ta.value = data;
}

SQL.IO.prototype.importresponse = function(data, code) {
	this.owner.window.hideThrobber();
	if (!this.check(code)) { return; }
	if (this.fromXML(data)) {
		this.owner.alignTables();
	}
}

SQL.IO.prototype.press = function(e) {
	switch (e.keyCode) {
		case 113:
			if (OZ.opera) {
				e.preventDefault();
			}
			this.quicksave(e);
		break;
	}
}
_application/javascriptOæbplist00‘
X$versionY$archiverT$topX$objects Ü†_NSKeyedArchiver—	_WebResourceResponseÄØ('-.4567YZ[\]^_`abcdefghijklmnopqrstuyzU$null› !"#$%&___nsurlrequest_proto_prop_obj_6___nsurlrequest_proto_prop_obj_3R$2___nsurlrequest_proto_prop_obj_0R$3___nsurlrequest_proto_prop_obj_4V$class___nsurlrequest_proto_prop_obj_1R$4R$0___nsurlrequest_proto_prop_obj_5___nsurlrequest_proto_prop_obj_2R$1Ä&ÄÄ	ÄÄ'ÄÄ Ä”()$+,WNS.base[NS.relativeÄ ÄÄ_*https://ondras.zarovi.cz/sql/demo/js/io.js“/012Z$classnameX$classesUNSURL¢13XNSObject#AƒS7x¶œñ »”89:IXWNS.keysZNS.objectsÆ;<=>?@ABCDEFGHÄ	Ä
ÄÄÄÄÄÄÄÄÄÄÄÄÆJKLMNOPQRSTUVWÄÄÄÄÄÄÄÄÄÄ Ä!Ä"Ä#Ä$Ä%\Content-TypeZKeep-Alive]Accept-Ranges]Last-Modified_Content-EncodingVServerTDate^Content-LengthZConnectionX__hhaa___X-Content-Type-OptionsTEtag_X-Frame-OptionsTVary_application/javascript_timeout=5, max=99Ubytes_Wed, 27 Apr 2022 11:55:20 GMTTgzipVApache_Thu, 11 Aug 2022 17:02:56 GMTT4269ZKeep-Alive_ÿ

YnBsaXN0MDDdAQIDBAUGBwgJCgsMDQ4QEhQWGBocHiAiJCZcQ29udGVudC1UeXBlXxAPWC1GcmFtZS1PcHRpb25zWktlZXAtQWxpdmVUVmFyeV8QEENvbnRlbnQtRW5jb2RpbmdWU2VydmVyVERhdGVeQ29udGVudC1MZW5ndGhaQ29ubmVjdGlvbl8QFlgtQ29udGVudC1UeXBlLU9wdGlvbnNURXRhZ11BY2NlcHQtUmFuZ2VzXUxhc3QtTW9kaWZpZWShD18QFmFwcGxpY2F0aW9uL2phdmFzY3JpcHShEVpzYW1lb3JpZ2luoRNfEBF0aW1lb3V0PTUsIG1heD05OaEVXxAPQWNjZXB0LUVuY29kaW5noRdUZ3ppcKEZVkFwYWNoZaEbXxAdVGh1LCAxMSBBdWcgMjAyMiAxNzowMjo1NiBHTVShHVQ0MjY5oR9aS2VlcC1BbGl2ZaEhV25vc25pZmahI18QGSIzYjRlLTVkZGExN2JkMTkyOTctZ3ppcCKhJVVieXRlc6EnXxAdV2VkLCAyNyBBcHIgMjAyMiAxMTo1NToyMCBHTVQACAAjADAAQgBNAFIAZQBsAHEAgACLAKQAqQC3AMUAxwDgAOIA7QDvAQMBBQEXARkBHgEgAScBKQFJAUsBUAFSAV0BXwFnAWkBhQGHAY0BjwAAAAAAAAIBAAAAAAAAACgAAAAAAAAAAAAAAAAAAAGvWnosniff_"3b4e-5dda17bd19297-gzip"Zsameorigin_Accept-Encoding“/0vw_NSMutableDictionary£vx3\NSDictionary_application/javascript“/0{|_NSHTTPURLResponse£}~3_NSHTTPURLResponse]NSURLResponse    $ ) 2 7 I L b d è ï ∞ “ Ù ˜>Egjmè±¥∂∏∫ºæ¿¬ƒ≈«…ÀÕ‘‹ËÍÏÓ +4:=FOQSZbm|~ÄÇÑÜàäåéêíîñòß©´≠Ø±≥µ∑πªΩø¡√≈“›Î˘'2;TYkpâù£√»œÔÙˇ€„ˇ
!7;Hafz~í                           †_*https://ondras.zarovi.cz/sql/demo/js/io.js‘opqrO
/* --------------------- table manager ------------ */

SQL.TableManager = function(owner) {
	this.owner = owner;
	this.dom = {
		container:OZ.$("table"),
		name:OZ.$("tablename"),
		comment:OZ.$("tablecomment")
	};
	this.selection = [];
	this.adding = false;
	
	var ids = ["addtable","removetable","aligntables","cleartables","addrow","edittable","tablekeys"];
	for (var i=0;i<ids.length;i++) {
		var id = ids[i];
		var elm = OZ.$(id);
		this.dom[id] = elm;
		elm.value = _(id);
	}

	var ids = ["tablenamelabel","tablecommentlabel"];
	for (var i=0;i<ids.length;i++) {
		var id = ids[i];
		var elm = OZ.$(id);
		elm.innerHTML = _(id);
	}
	
	
	this.select(false);
	
	this.save = this.save.bind(this);
	
	OZ.Event.add("area", "click", this.click.bind(this));
	OZ.Event.add(this.dom.addtable, "click", this.preAdd.bind(this));
	OZ.Event.add(this.dom.removetable, "click", this.remove.bind(this));
	OZ.Event.add(this.dom.cleartables, "click", this.clear.bind(this));
	OZ.Event.add(this.dom.addrow, "click", this.addRow.bind(this));
	OZ.Event.add(this.dom.aligntables, "click", this.owner.alignTables.bind(this.owner));
	OZ.Event.add(this.dom.edittable, "click", this.edit.bind(this));
	OZ.Event.add(this.dom.tablekeys, "click", this.keys.bind(this));
	OZ.Event.add(document, "keydown", this.press.bind(this));

	this.dom.container.parentNode.removeChild(this.dom.container);
}

SQL.TableManager.prototype.addRow = function(e) {
	var newrow = this.selection[0].addRow(_("newrow"));
	this.owner.rowManager.select(newrow);
	newrow.expand();
}

SQL.TableManager.prototype.select = function(table, multi) { /* activate table */
	if (table) {
		if (multi) {
			var i = this.selection.indexOf(table);
			if (i < 0) {
				this.selection.push(table);
			} else {
				this.selection.splice(i, 1);
			}
		} else {
			if (this.selection[0] === table) { return; }
			this.selection = [table];
		}
	} else {
		this.selection = [];
	}
	this.processSelection();
}

SQL.TableManager.prototype.processSelection = function() {
	var tables = this.owner.tables;
	for (var i=0;i<tables.length;i++) {
		tables[i].deselect();
	}
	if (this.selection.length == 1) {
		this.dom.addrow.disabled = false;
		this.dom.edittable.disabled = false;
		this.dom.tablekeys.disabled = false;
		this.dom.removetable.value = _("removetable");
	} else {
		this.dom.addrow.disabled = true;
		this.dom.edittable.disabled = true;
		this.dom.tablekeys.disabled = true;
	}
	if (this.selection.length) {
		this.dom.removetable.disabled = false;
		if (this.selection.length > 1) { this.dom.removetable.value = _("removetables"); }
	} else {
		this.dom.removetable.disabled = true;
		this.dom.removetable.value = _("removetable");
	}
	for (var i=0;i<this.selection.length;i++) {
		var t = this.selection[i];
		t.owner.raise(t);
		t.select();
	}
}

SQL.TableManager.prototype.selectRect = function(x,y,width,height) { /* select all tables intersecting a rectangle */
	this.selection = [];
	var tables = this.owner.tables;
	var x1 = x+width;
	var y1 = y+height;
	for (var i=0;i<tables.length;i++) {
		var t = tables[i];
		var tx = t.x;
		var tx1 = t.x+t.width;
		var ty = t.y;
		var ty1 = t.y+t.height;
		if (((tx>=x && tx<x1) || (tx1>=x && tx1<x1) || (tx<x && tx1>x1)) &&
		    ((ty>=y && ty<y1) || (ty1>=y && ty1<y1) || (ty<y && ty1>y1)))
			{ this.selection.push(t); }
	}
	this.processSelection();
}

SQL.TableManager.prototype.click = function(e) { /* finish adding new table */
	var newtable = false;
	if (this.adding) {
		this.adding = false;
		OZ.DOM.removeClass("area","adding");
		this.dom.addtable.value = this.oldvalue;
		var scroll = OZ.DOM.scroll();
		var x = e.clientX + scroll[0];
		var y = e.clientY + scroll[1];
		newtable = this.owner.addTable(_("newtable"),x,y);
		var r = newtable.addRow("id",{ai:true});
		var k = newtable.addKey("PRIMARY","");
		k.addRow(r);
	}
	this.select(newtable);
	this.owner.rowManager.select(false);
	if (this.selection.length == 1) { this.edit(e); }
}

SQL.TableManager.prototype.preAdd = function(e) { /* click add new table */
	if (this.adding) {
		this.adding = false;
		OZ.DOM.removeClass("area","adding");
		this.dom.addtable.value = this.oldvalue;
	} else {
		this.adding = true;
		OZ.DOM.addClass("area","adding");
		this.oldvalue = this.dom.addtable.value;
		this.dom.addtable.value = "["+_("addpending")+"]";
	}
}

SQL.TableManager.prototype.clear = function(e) { /* remove all tables */
	if (!this.owner.tables.length) { return; }
	var result = confirm(_("confirmall")+" ?");
	if (!result) { return; }
	this.owner.clearTables();
}

SQL.TableManager.prototype.remove = function(e) {
	var titles = this.selection.slice(0);
	for (var i=0;i<titles.length;i++) { titles[i] = "'"+titles[i].getTitle()+"'"; }
	var result = confirm(_("confirmtable")+" "+titles.join(", ")+"?");
	if (!result) { return; }
	var sel = this.selection.slice(0);
	for (var i=0;i<sel.length;i++) { this.owner.removeTable(sel[i]); }
}

SQL.TableManager.prototype.edit = function(e) {
	this.owner.window.open(_("edittable"), this.dom.container, this.save);
	
	var title = this.selection[0].getTitle();
	this.dom.name.value = title;
	try { /* throws in ie6 */
		this.dom.comment.value = this.selection[0].getComment();
	} catch(e) {}

	/* pre-select table name */
	this.dom.name.focus();
	if (OZ.ie) {
		try { /* throws in ie6 */
			this.dom.name.select();
		} catch(e) {}
	} else {
		this.dom.name.setSelectionRange(0, title.length);
	} 
}

SQL.TableManager.prototype.keys = function(e) { /* open keys dialog */
	this.owner.keyManager.open(this.selection[0]);
}

SQL.TableManager.prototype.save = function() {
	this.selection[0].setTitle(this.dom.name.value);
	this.selection[0].setComment(this.dom.comment.value);
}

SQL.TableManager.prototype.press = function(e) {
	var target = OZ.Event.target(e).nodeName.toLowerCase();
	if (target == "textarea" || target == "input") { return; } /* not when in form field */
	
	if (this.owner.rowManager.selected) { return; } /* do not process keypresses if a row is selected */

	if (!this.selection.length) { return; } /* nothing if selection is active */

	switch (e.keyCode) {
		case 46:
			this.remove();
			OZ.Event.prevent(e);
		break;
	}
}
_application/javascriptO»bplist00‘
X$versionY$archiverT$topX$objects Ü†_NSKeyedArchiver—	_WebResourceResponseÄØ('-.4567YZ[\]^_`abcdefghijklmnopqrstuyzU$null› !"#$%&___nsurlrequest_proto_prop_obj_6___nsurlrequest_proto_prop_obj_3R$2___nsurlrequest_proto_prop_obj_0R$3___nsurlrequest_proto_prop_obj_4V$class___nsurlrequest_proto_prop_obj_1R$4R$0___nsurlrequest_proto_prop_obj_5___nsurlrequest_proto_prop_obj_2R$1Ä&ÄÄ	ÄÄ'ÄÄ Ä”()$+,WNS.base[NS.relativeÄ ÄÄ_4https://ondras.zarovi.cz/sql/demo/js/tablemanager.js“/012Z$classnameX$classesUNSURL¢13XNSObject#AƒS7x¶ÿ∫ »”89:IXWNS.keysZNS.objectsÆ;<=>?@ABCDEFGHÄ	Ä
ÄÄÄÄÄÄÄÄÄÄÄÄÆJKLMNOPQRSTUVWÄÄÄÄÄÄÄÄÄÄ Ä!Ä"Ä#Ä$Ä%\Content-TypeZKeep-Alive]Accept-Ranges]Last-Modified_Content-EncodingVServerTDate^Content-LengthZConnectionX__hhaa___X-Content-Type-OptionsTEtag_X-Frame-OptionsTVary_application/javascript_timeout=5, max=99Ubytes_Thu, 26 May 2016 21:04:07 GMTTgzipVApache_Thu, 11 Aug 2022 17:02:56 GMTT1753ZKeep-Alive_ÿ

YnBsaXN0MDDdAQIDBAUGBwgJCgsMDQ4QEhQWGBocHiAiJCZcQ29udGVudC1UeXBlXxAPWC1GcmFtZS1PcHRpb25zWktlZXAtQWxpdmVUVmFyeV8QEENvbnRlbnQtRW5jb2RpbmdWU2VydmVyVERhdGVeQ29udGVudC1MZW5ndGhaQ29ubmVjdGlvbl8QFlgtQ29udGVudC1UeXBlLU9wdGlvbnNURXRhZ11BY2NlcHQtUmFuZ2VzXUxhc3QtTW9kaWZpZWShD18QFmFwcGxpY2F0aW9uL2phdmFzY3JpcHShEVpzYW1lb3JpZ2luoRNfEBF0aW1lb3V0PTUsIG1heD05OaEVXxAPQWNjZXB0LUVuY29kaW5noRdUZ3ppcKEZVkFwYWNoZaEbXxAdVGh1LCAxMSBBdWcgMjAyMiAxNzowMjo1NiBHTVShHVQxNzUzoR9aS2VlcC1BbGl2ZaEhV25vc25pZmahI18QGSIxODBhLTUzM2M1MjE4N2NkMzktZ3ppcCKhJVVieXRlc6EnXxAdVGh1LCAyNiBNYXkgMjAxNiAyMTowNDowNyBHTVQACAAjADAAQgBNAFIAZQBsAHEAgACLAKQAqQC3AMUAxwDgAOIA7QDvAQMBBQEXARkBHgEgAScBKQFJAUsBUAFSAV0BXwFnAWkBhQGHAY0BjwAAAAAAAAIBAAAAAAAAACgAAAAAAAAAAAAAAAAAAAGvWnosniff_"180a-533c52187cd39-gzip"Zsameorigin_Accept-Encoding“/0vw_NSMutableDictionary£vx3\NSDictionary_application/javascript“/0{|_NSHTTPURLResponse£}~3_NSHTTPURLResponse]NSURLResponse    $ ) 2 7 I L b d è ï ∞ “ Ù ˜>Egjmè±¥∂∏∫ºæ¿¬ƒ≈«…ÀÕ‘‹ËÍÏÓ%*5>DGPY[]dlwÜàäåéêíîñòöúû†¢±≥µ∑πªΩø¡√≈«…ÀÕœ‹Áı"1<E^cuzìß≠Õ“Ÿ˘˛	ÂÌ	&+AERkpÑàú                           ™_4https://ondras.zarovi.cz/sql/demo/js/tablemanager.js‘tuvwOv/* --------------------- row manager ------------ */
SQL.RowManager = function(owner) {
	this.owner = owner;
	this.dom = {};
	this.selected = null;
	this.creating = false;
	this.connecting = false;
	
	var ids = ["editrow","removerow","uprow","downrow","foreigncreate","foreignconnect","foreigndisconnect"];
	for (var i=0;i<ids.length;i++) {
		var id = ids[i];
		var elm = OZ.$(id);
		this.dom[id] = elm;
		elm.value = _(id);
	}

	this.select(false);
	
	OZ.Event.add(this.dom.editrow, "click", this.edit.bind(this));
	OZ.Event.add(this.dom.uprow, "click", this.up.bind(this));
	OZ.Event.add(this.dom.downrow, "click", this.down.bind(this));
	OZ.Event.add(this.dom.removerow, "click", this.remove.bind(this));
	OZ.Event.add(this.dom.foreigncreate, "click", this.foreigncreate.bind(this));
	OZ.Event.add(this.dom.foreignconnect, "click", this.foreignconnect.bind(this));
	OZ.Event.add(this.dom.foreigndisconnect, "click", this.foreigndisconnect.bind(this));
	OZ.Event.add(document, "keydown", this.press.bind(this));

	SQL.subscribe("tableclick", this.tableClick.bind(this));
	SQL.subscribe("rowclick", this.rowClick.bind(this));
}

SQL.RowManager.prototype.select = function(row) { /* activate a row */
	if (this.selected === row) { return; }
	if (this.selected) { this.selected.deselect(); }

	this.selected = row;
	if (this.selected) { this.selected.select(); }
	this.redraw();
}

SQL.RowManager.prototype.tableClick = function(e) { /* create relation after clicking target table */
	if (!this.creating) { return; }
	
	var r1 = this.selected;
	var t2 = e.target;
	
	var p = this.owner.getOption("pattern");
	p = p.replace(/%T/g,r1.owner.getTitle());
	p = p.replace(/%t/g,t2.getTitle());
	p = p.replace(/%R/g,r1.getTitle());
	
	var r2 = t2.addRow(p, r1.data);
	r2.update({"type":SQL.Designer.getFKTypeFor(r1.data.type)});
	r2.update({"ai":false});
	this.owner.addRelation(r1, r2);
}

SQL.RowManager.prototype.rowClick = function(e) { /* draw relation after clicking target row */
	if (!this.connecting) { return; }
	
	var r1 = this.selected;
	var r2 = e.target;
	
	if (r1 == r2) { return; }
	
	this.owner.addRelation(r1, r2);
}

SQL.RowManager.prototype.foreigncreate = function(e) { /* start creating fk */
	this.endConnect();
	if (this.creating) {
		this.endCreate();
	} else {
		this.creating = true;
		this.dom.foreigncreate.value = "["+_("foreignpending")+"]";
	}
}

SQL.RowManager.prototype.foreignconnect = function(e) { /* start drawing fk */
	this.endCreate();
	if (this.connecting) {
		this.endConnect();
	} else {
		this.connecting = true;
		this.dom.foreignconnect.value = "["+_("foreignconnectpending")+"]";
	}
}

SQL.RowManager.prototype.foreigndisconnect = function(e) { /* remove connector */
	var rels = this.selected.relations;
	for (var i=rels.length-1;i>=0;i--) {
		var r = rels[i];
		if (r.row2 == this.selected) { this.owner.removeRelation(r); }
	}
	this.redraw();
}

SQL.RowManager.prototype.endCreate = function() {
	this.creating = false;
	this.dom.foreigncreate.value = _("foreigncreate");
}

SQL.RowManager.prototype.endConnect = function() {
	this.connecting = false;
	this.dom.foreignconnect.value = _("foreignconnect");
}

SQL.RowManager.prototype.up = function(e) {
	this.selected.up();
	this.redraw();
}

SQL.RowManager.prototype.down = function(e) {
	this.selected.down();
	this.redraw();
}

SQL.RowManager.prototype.remove = function(e) {
	var result = confirm(_("confirmrow")+" '"+this.selected.getTitle()+"' ?");
	if (!result) { return; }
	var t = this.selected.owner;
	this.selected.owner.removeRow(this.selected);
	
	var next = false;
	if (t.rows) { next = t.rows[t.rows.length-1]; }
	this.select(next);
}

SQL.RowManager.prototype.redraw = function() {
	this.endCreate();
	this.endConnect();
	if (this.selected) {
		var table = this.selected.owner;
		var rows = table.rows;
		this.dom.uprow.disabled = (rows[0] == this.selected);
		this.dom.downrow.disabled = (rows[rows.length-1] == this.selected);
		this.dom.removerow.disabled = false;
		this.dom.editrow.disabled = false;
		this.dom.foreigncreate.disabled = !(this.selected.isUnique());
		this.dom.foreignconnect.disabled = !(this.selected.isUnique());
		
		this.dom.foreigndisconnect.disabled = true;
		var rels = this.selected.relations;
		for (var i=0;i<rels.length;i++) {
			var r = rels[i];
			if (r.row2 == this.selected) { this.dom.foreigndisconnect.disabled = false; }
		}
		
	} else {
		this.dom.uprow.disabled = true;
		this.dom.downrow.disabled = true;
		this.dom.removerow.disabled = true;
		this.dom.editrow.disabled = true;
		this.dom.foreigncreate.disabled = true;
		this.dom.foreignconnect.disabled = true;
		this.dom.foreigndisconnect.disabled = true;
	}
}

SQL.RowManager.prototype.press = function(e) {
	if (!this.selected) { return; }
	
	var target = OZ.Event.target(e).nodeName.toLowerCase();
	if (target == "textarea" || target == "input") { return; } /* not when in form field */
	
	switch (e.keyCode) {
		case 38:
			this.up();
			OZ.Event.prevent(e);
		break;
		case 40:
			this.down();
			OZ.Event.prevent(e);
		break;
		case 46:
			this.remove();
			OZ.Event.prevent(e);
		break;
		case 13:
		case 27:
			this.selected.collapse();
		break;
	}
}

SQL.RowManager.prototype.edit = function(e) {
	this.selected.expand();
}
_application/javascriptO∆bplist00‘
X$versionY$archiverT$topX$objects Ü†_NSKeyedArchiver—	_WebResourceResponseÄØ('-.4567YZ[\]^_`abcdefghijklmnopqrstuyzU$null› !"#$%&___nsurlrequest_proto_prop_obj_6___nsurlrequest_proto_prop_obj_3R$2___nsurlrequest_proto_prop_obj_0R$3___nsurlrequest_proto_prop_obj_4V$class___nsurlrequest_proto_prop_obj_1R$4R$0___nsurlrequest_proto_prop_obj_5___nsurlrequest_proto_prop_obj_2R$1Ä&ÄÄ	ÄÄ'ÄÄ Ä”()$+,WNS.base[NS.relativeÄ ÄÄ_2https://ondras.zarovi.cz/sql/demo/js/rowmanager.js“/012Z$classnameX$classesUNSURL¢13XNSObject#AƒS7x¶·7 »”89:IXWNS.keysZNS.objectsÆ;<=>?@ABCDEFGHÄ	Ä
ÄÄÄÄÄÄÄÄÄÄÄÄÆJKLMNOPQRSTUVWÄÄÄÄÄÄÄÄÄÄ Ä!Ä"Ä#Ä$Ä%\Content-TypeZKeep-Alive]Accept-Ranges]Last-Modified_Content-EncodingVServerTDate^Content-LengthZConnectionX__hhaa___X-Content-Type-OptionsTEtag_X-Frame-OptionsTVary_application/javascript_timeout=5, max=97Ubytes_Thu, 26 May 2016 21:04:07 GMTTgzipVApache_Thu, 11 Aug 2022 17:02:56 GMTT1382ZKeep-Alive_ÿ

YnBsaXN0MDDdAQIDBAUGBwgJCgsMDQ4QEhQWGBocHiAiJCZcQ29udGVudC1UeXBlXxAPWC1GcmFtZS1PcHRpb25zWktlZXAtQWxpdmVUVmFyeV8QEENvbnRlbnQtRW5jb2RpbmdWU2VydmVyVERhdGVeQ29udGVudC1MZW5ndGhaQ29ubmVjdGlvbl8QFlgtQ29udGVudC1UeXBlLU9wdGlvbnNURXRhZ11BY2NlcHQtUmFuZ2VzXUxhc3QtTW9kaWZpZWShD18QFmFwcGxpY2F0aW9uL2phdmFzY3JpcHShEVpzYW1lb3JpZ2luoRNfEBF0aW1lb3V0PTUsIG1heD05N6EVXxAPQWNjZXB0LUVuY29kaW5noRdUZ3ppcKEZVkFwYWNoZaEbXxAdVGh1LCAxMSBBdWcgMjAyMiAxNzowMjo1NiBHTVShHVQxMzgyoR9aS2VlcC1BbGl2ZaEhV25vc25pZmahI18QGSIxNDc2LTUzM2M1MjE4N2NkMzktZ3ppcCKhJVVieXRlc6EnXxAdVGh1LCAyNiBNYXkgMjAxNiAyMTowNDowNyBHTVQACAAjADAAQgBNAFIAZQBsAHEAgACLAKQAqQC3AMUAxwDgAOIA7QDvAQMBBQEXARkBHgEgAScBKQFJAUsBUAFSAV0BXwFnAWkBhQGHAY0BjwAAAAAAAAIBAAAAAAAAACgAAAAAAAAAAAAAAAAAAAGvWnosniff_"1476-533c52187cd39-gzip"Zsameorigin_Accept-Encoding“/0vw_NSMutableDictionary£vx3\NSDictionary_application/javascript“/0{|_NSHTTPURLResponse£}~3_NSHTTPURLResponse]NSURLResponse    $ ) 2 7 I L b d è ï ∞ “ Ù ˜>Egjmè±¥∂∏∫ºæ¿¬ƒ≈«…ÀÕ‘‹ËÍÏÓ#(3<BENWY[bjuÑÜàäåéêíîñòöúû†Ø±≥µ∑πªΩø¡√≈«…ÀÕ⁄ÂÛ /:C\asxë•´À–◊˜¸„Î$)?CPinÇÜö                           ®_2https://ondras.zarovi.cz/sql/demo/js/rowmanager.js‘yz{|OR/* ----------------- key manager ---------- */

SQL.KeyManager = function(owner) {
	this.owner = owner;
	this.dom = {
		container:OZ.$("keys")
	}
	this.build();
}

SQL.KeyManager.prototype.build = function() {
	this.dom.list = OZ.$("keyslist");
	this.dom.type = OZ.$("keytype");
	this.dom.name = OZ.$("keyname");
	this.dom.left = OZ.$("keyleft");
	this.dom.right = OZ.$("keyright");
	this.dom.fields = OZ.$("keyfields");
	this.dom.avail = OZ.$("keyavail");
	this.dom.listlabel = OZ.$("keyslistlabel");

	var ids = ["keyadd","keyremove"];
	for (var i=0;i<ids.length;i++) {
		var id = ids[i];
		var elm = OZ.$(id);
		this.dom[id] = elm;
		elm.value = _(id);
	}

	var ids = ["keyedit","keytypelabel","keynamelabel","keyfieldslabel","keyavaillabel"];
	for (var i=0;i<ids.length;i++) {
		var id = ids[i];
		var elm = OZ.$(id);
		elm.innerHTML = _(id);
	}
	
	var types = ["PRIMARY","INDEX","UNIQUE","FULLTEXT"];
	OZ.DOM.clear(this.dom.type);
	for (var i=0;i<types.length;i++) {
		var o = OZ.DOM.elm("option");
		o.innerHTML = types[i];
		o.value = types[i];
		this.dom.type.appendChild(o);
	}

	this.purge = this.purge.bind(this);

	OZ.Event.add(this.dom.list, "change", this.listchange.bind(this));
	OZ.Event.add(this.dom.type, "change", this.typechange.bind(this));
	OZ.Event.add(this.dom.name, "keyup", this.namechange.bind(this));
	OZ.Event.add(this.dom.keyadd, "click", this.add.bind(this));
	OZ.Event.add(this.dom.keyremove, "click", this.remove.bind(this));
	OZ.Event.add(this.dom.left, "click", this.left.bind(this));
	OZ.Event.add(this.dom.right, "click", this.right.bind(this));
	
	this.dom.container.parentNode.removeChild(this.dom.container);
}

SQL.KeyManager.prototype.listchange = function(e) {
	this.switchTo(this.dom.list.selectedIndex);
}

SQL.KeyManager.prototype.typechange = function(e) {
	this.key.setType(this.dom.type.value);
	this.redrawListItem();
}

SQL.KeyManager.prototype.namechange = function(e) {
	this.key.setName(this.dom.name.value);
	this.redrawListItem();
}

SQL.KeyManager.prototype.add = function(e) {
	var type = (this.table.keys.length ? "INDEX" : "PRIMARY");
	this.table.addKey(type);
	this.sync(this.table);
	this.switchTo(this.table.keys.length-1);
}

SQL.KeyManager.prototype.remove = function(e) {
	var index = this.dom.list.selectedIndex;
	if (index == -1) { return; }
	var r = this.table.keys[index];
	this.table.removeKey(r);
	this.sync(this.table);
}

SQL.KeyManager.prototype.purge = function() { /* remove empty keys */
	for (var i=this.table.keys.length-1;i>=0;i--) {
		var k = this.table.keys[i];
		if (!k.rows.length) { this.table.removeKey(k); }
	}
}

SQL.KeyManager.prototype.sync = function(table) { /* sync content with given table */
	this.table = table;
	this.dom.listlabel.innerHTML = _("keyslistlabel").replace(/%s/,table.getTitle());
	
	OZ.DOM.clear(this.dom.list);
	for (var i=0;i<table.keys.length;i++) {
		var k = table.keys[i];
		var o = OZ.DOM.elm("option");
		this.dom.list.appendChild(o);
		var str = (i+1)+": "+k.getLabel();
		o.innerHTML = str;
	}
	if (table.keys.length) { 
		this.switchTo(0); 
	} else {
		this.disable();
	}
}

SQL.KeyManager.prototype.redrawListItem = function() {
	var index = this.table.keys.indexOf(this.key);
	this.option.innerHTML = (index+1)+": "+this.key.getLabel();
}

SQL.KeyManager.prototype.switchTo = function(index) { /* show Nth key */
	this.enable();
	var k = this.table.keys[index];
	this.key = k;
	this.option = this.dom.list.getElementsByTagName("option")[index];
	
	this.dom.list.selectedIndex = index;
	this.dom.name.value = k.getName();
	
	var opts = this.dom.type.getElementsByTagName("option");
	for (var i=0;i<opts.length;i++) {
		if (opts[i].value == k.getType()) { this.dom.type.selectedIndex = i; }
	}

	OZ.DOM.clear(this.dom.fields);
	for (var i=0;i<k.rows.length;i++) {
		var o = OZ.DOM.elm("option");
		o.innerHTML = k.rows[i].getTitle();
		o.value = o.innerHTML;
		this.dom.fields.appendChild(o);
	}
	
	OZ.DOM.clear(this.dom.avail);
	for (var i=0;i<this.table.rows.length;i++) {
		var r = this.table.rows[i];
		if (k.rows.indexOf(r) != -1) { continue; }
		var o = OZ.DOM.elm("option");
		o.innerHTML = r.getTitle();
		o.value = o.innerHTML;
		this.dom.avail.appendChild(o);
	}
}

SQL.KeyManager.prototype.disable = function() {
	OZ.DOM.clear(this.dom.fields);
	OZ.DOM.clear(this.dom.avail);
	this.dom.keyremove.disabled = true;
	this.dom.left.disabled = true;
	this.dom.right.disabled = true;
	this.dom.list.disabled = true;
	this.dom.name.disabled = true;
	this.dom.type.disabled = true;
	this.dom.fields.disabled = true;
	this.dom.avail.disabled = true;
}

SQL.KeyManager.prototype.enable = function() {
	this.dom.keyremove.disabled = false;
	this.dom.left.disabled = false;
	this.dom.right.disabled = false;
	this.dom.list.disabled = false;
	this.dom.name.disabled = false;
	this.dom.type.disabled = false;
	this.dom.fields.disabled = false;
	this.dom.avail.disabled = false;
}

SQL.KeyManager.prototype.left = function(e) { /* add field to index */
	var opts = this.dom.avail.getElementsByTagName("option");
	for (var i=0;i<opts.length;i++) {
		var o = opts[i];
		if (o.selected) {
			var row = this.table.findNamedRow(o.value);
			this.key.addRow(row);
		}
	}
	this.switchTo(this.dom.list.selectedIndex);
}

SQL.KeyManager.prototype.right = function(e) { /* remove field from index */
	var opts = this.dom.fields.getElementsByTagName("option");
	for (var i=0;i<opts.length;i++) {
		var o = opts[i];
		if (o.selected) {
			var row = this.table.findNamedRow(o.value);
			this.key.removeRow(row);
		}
	}
	this.switchTo(this.dom.list.selectedIndex);
}

SQL.KeyManager.prototype.open = function(table) {
	this.sync(table);
	this.owner.window.open(_("tablekeys"),this.dom.container,this.purge);
}
_application/javascriptO∆bplist00‘
X$versionY$archiverT$topX$objects Ü†_NSKeyedArchiver—	_WebResourceResponseÄØ('-.4567YZ[\]^_`abcdefghijklmnopqrstuyzU$null› !"#$%&___nsurlrequest_proto_prop_obj_6___nsurlrequest_proto_prop_obj_3R$2___nsurlrequest_proto_prop_obj_0R$3___nsurlrequest_proto_prop_obj_4V$class___nsurlrequest_proto_prop_obj_1R$4R$0___nsurlrequest_proto_prop_obj_5___nsurlrequest_proto_prop_obj_2R$1Ä&ÄÄ	ÄÄ'ÄÄ Ä”()$+,WNS.base[NS.relativeÄ ÄÄ_2https://ondras.zarovi.cz/sql/demo/js/keymanager.js“/012Z$classnameX$classesUNSURL¢13XNSObject#AƒS7x¶Íû »”89:IXWNS.keysZNS.objectsÆ;<=>?@ABCDEFGHÄ	Ä
ÄÄÄÄÄÄÄÄÄÄÄÄÆJKLMNOPQRSTUVWÄÄÄÄÄÄÄÄÄÄ Ä!Ä"Ä#Ä$Ä%\Content-TypeZKeep-Alive]Accept-Ranges]Last-Modified_Content-EncodingVServerTDate^Content-LengthZConnectionX__hhaa___X-Content-Type-OptionsTEtag_X-Frame-OptionsTVary_application/javascript_timeout=5, max=98Ubytes_Thu, 26 May 2016 21:04:07 GMTTgzipVApache_Thu, 11 Aug 2022 17:02:56 GMTT1421ZKeep-Alive_ÿ

YnBsaXN0MDDdAQIDBAUGBwgJCgsMDQ4QEhQWGBocHiAiJCZcQ29udGVudC1UeXBlXxAPWC1GcmFtZS1PcHRpb25zWktlZXAtQWxpdmVUVmFyeV8QEENvbnRlbnQtRW5jb2RpbmdWU2VydmVyVERhdGVeQ29udGVudC1MZW5ndGhaQ29ubmVjdGlvbl8QFlgtQ29udGVudC1UeXBlLU9wdGlvbnNURXRhZ11BY2NlcHQtUmFuZ2VzXUxhc3QtTW9kaWZpZWShD18QFmFwcGxpY2F0aW9uL2phdmFzY3JpcHShEVpzYW1lb3JpZ2luoRNfEBF0aW1lb3V0PTUsIG1heD05OKEVXxAPQWNjZXB0LUVuY29kaW5noRdUZ3ppcKEZVkFwYWNoZaEbXxAdVGh1LCAxMSBBdWcgMjAyMiAxNzowMjo1NiBHTVShHVQxNDIxoR9aS2VlcC1BbGl2ZaEhV25vc25pZmahI18QGSIxNjUyLTUzM2M1MjE4N2JkOTktZ3ppcCKhJVVieXRlc6EnXxAdVGh1LCAyNiBNYXkgMjAxNiAyMTowNDowNyBHTVQACAAjADAAQgBNAFIAZQBsAHEAgACLAKQAqQC3AMUAxwDgAOIA7QDvAQMBBQEXARkBHgEgAScBKQFJAUsBUAFSAV0BXwFnAWkBhQGHAY0BjwAAAAAAAAIBAAAAAAAAACgAAAAAAAAAAAAAAAAAAAGvWnosniff_"1652-533c52187bd99-gzip"Zsameorigin_Accept-Encoding“/0vw_NSMutableDictionary£vx3\NSDictionary_application/javascript“/0{|_NSHTTPURLResponse£}~3_NSHTTPURLResponse]NSURLResponse    $ ) 2 7 I L b d è ï ∞ “ Ù ˜>Egjmè±¥∂∏∫ºæ¿¬ƒ≈«…ÀÕ‘‹ËÍÏÓ#(3<BENWY[bjuÑÜàäåéêíîñòöúû†Ø±≥µ∑πªΩø¡√≈«…ÀÕ⁄ÂÛ /:C\asxë•´À–◊˜¸„Î$)?CPinÇÜö                           ®_2https://ondras.zarovi.cz/sql/demo/js/keymanager.js‘~ÄÅO/* --------------------- window ------------ */

SQL.Window = function(owner) {
	this.owner = owner;
	this.dom = {
		container:OZ.$("window"),
		background:OZ.$("background"),
		ok:OZ.$("windowok"),
		cancel:OZ.$("windowcancel"),
		title:OZ.$("windowtitle"),
		content:OZ.$("windowcontent"),
		throbber:OZ.$("throbber")
	}
	this.dom.ok.value = _("windowok");
	this.dom.cancel.value = _("windowcancel");
	this.dom.throbber.alt = this.dom.throbber.title = _("throbber");
	OZ.Event.add(this.dom.ok, "click", this.ok.bind(this));
	OZ.Event.add(this.dom.cancel, "click", this.close.bind(this));
	OZ.Event.add(document, "keydown", this.key.bind(this));
	
	this.sync = this.sync.bind(this);
	
	OZ.Event.add(window, "scroll", this.sync);
	OZ.Event.add(window, "resize", this.sync);
	this.state = 0;
	this.hideThrobber();
	
	this.sync();
}

SQL.Window.prototype.showThrobber = function() {
	this.dom.throbber.style.visibility = "";
}

SQL.Window.prototype.hideThrobber = function() {
	this.dom.throbber.style.visibility = "hidden";
}

SQL.Window.prototype.open = function(title, content, callback) {
	this.state = 1;
	this.callback = callback;
	while (this.dom.title.childNodes.length > 1) { this.dom.title.removeChild(this.dom.title.childNodes[1]); }

	var txt = OZ.DOM.text(title);
	this.dom.title.appendChild(txt);
	this.dom.background.style.visibility = "visible";
	OZ.DOM.clear(this.dom.content);
	this.dom.content.appendChild(content);
	
	var win = OZ.DOM.win();
	var scroll = OZ.DOM.scroll();
	this.dom.container.style.left = Math.round(scroll[0] + (win[0] - this.dom.container.offsetWidth)/2)+"px";
	this.dom.container.style.top = Math.round(scroll[1] + (win[1] - this.dom.container.offsetHeight)/2)+"px";
	
	this.dom.cancel.style.visibility = (this.callback ? "" : "hidden");
	this.dom.container.style.visibility = "visible";

	var formElements = ["input","select","textarea"];
	var all = this.dom.container.getElementsByTagName("*");
	for (var i=0;i<all.length;i++) {
		if (formElements.indexOf(all[i].tagName.toLowerCase()) != -1) {
			all[i].focus();
			break;
		}
	}
}

SQL.Window.prototype.key = function(e) {
	if (!this.state) { return; }
	if (e.keyCode == 13) { this.ok(e); }
	if (e.keyCode == 27) { this.close(); }
}

SQL.Window.prototype.ok = function(e) {
	if (this.callback) { this.callback(); }
	this.close();
}

SQL.Window.prototype.close = function() {
	if (!this.state) { return; }
	this.state = 0;
	this.dom.background.style.visibility = "hidden";
	this.dom.container.style.visibility = "hidden";
}

SQL.Window.prototype.sync = function() { /* adjust background position */
	var dims = OZ.DOM.win();
	var scroll = OZ.DOM.scroll();
	this.dom.background.style.width = dims[0]+"px";
	this.dom.background.style.height = dims[1]+"px";
	this.dom.background.style.left = scroll[0]+"px";
	this.dom.background.style.top = scroll[1]+"px";
}
_application/javascriptO¿bplist00‘
X$versionY$archiverT$topX$objects Ü†_NSKeyedArchiver—	_WebResourceResponseÄØ('-.4567YZ[\]^_`abcdefghijklmnopqrstuyzU$null› !"#$%&___nsurlrequest_proto_prop_obj_6___nsurlrequest_proto_prop_obj_3R$2___nsurlrequest_proto_prop_obj_0R$3___nsurlrequest_proto_prop_obj_4V$class___nsurlrequest_proto_prop_obj_1R$4R$0___nsurlrequest_proto_prop_obj_5___nsurlrequest_proto_prop_obj_2R$1Ä&ÄÄ	ÄÄ'ÄÄ Ä”()$+,WNS.base[NS.relativeÄ ÄÄ_.https://ondras.zarovi.cz/sql/demo/js/window.js“/012Z$classnameX$classesUNSURL¢13XNSObject#AƒS7x¶Ù »”89:IXWNS.keysZNS.objectsÆ;<=>?@ABCDEFGHÄ	Ä
ÄÄÄÄÄÄÄÄÄÄÄÄÆJKLMNOPQRSTUVWÄÄÄÄÄÄÄÄÄÄ Ä!Ä"Ä#Ä$Ä%\Content-TypeZKeep-Alive]Accept-Ranges]Last-Modified_Content-EncodingVServerTDate^Content-LengthZConnectionX__hhaa___X-Content-Type-OptionsTEtag_X-Frame-OptionsTVary_application/javascript_timeout=5, max=98Ubytes_Thu, 26 May 2016 21:04:07 GMTTgzipVApache_Thu, 11 Aug 2022 17:02:56 GMTS918ZKeep-Alive_ÿ

YnBsaXN0MDDdAQIDBAUGBwgJCgsMDQ4QEhQWGBocHiAiJCZcQ29udGVudC1UeXBlXxAPWC1GcmFtZS1PcHRpb25zWktlZXAtQWxpdmVUVmFyeV8QEENvbnRlbnQtRW5jb2RpbmdWU2VydmVyVERhdGVeQ29udGVudC1MZW5ndGhaQ29ubmVjdGlvbl8QFlgtQ29udGVudC1UeXBlLU9wdGlvbnNURXRhZ11BY2NlcHQtUmFuZ2VzXUxhc3QtTW9kaWZpZWShD18QFmFwcGxpY2F0aW9uL2phdmFzY3JpcHShEVpzYW1lb3JpZ2luoRNfEBF0aW1lb3V0PTUsIG1heD05OKEVXxAPQWNjZXB0LUVuY29kaW5noRdUZ3ppcKEZVkFwYWNoZaEbXxAdVGh1LCAxMSBBdWcgMjAyMiAxNzowMjo1NiBHTVShHVM5MTihH1pLZWVwLUFsaXZloSFXbm9zbmlmZqEjXxAYImIxZi01MzNjNTIxODdjZDM5LWd6aXAioSVVYnl0ZXOhJ18QHVRodSwgMjYgTWF5IDIwMTYgMjE6MDQ6MDcgR01UAAgAIwAwAEIATQBSAGUAbABxAIAAiwCkAKkAtwDFAMcA4ADiAO0A7wEDAQUBFwEZAR4BIAEnASkBSQFLAU8BUQFcAV4BZgFoAYMBhQGLAY0AAAAAAAACAQAAAAAAAAAoAAAAAAAAAAAAAAAAAAABrQ==Wnosniff_"b1f-533c52187cd39-gzip"Zsameorigin_Accept-Encoding“/0vw_NSMutableDictionary£vx3\NSDictionary_application/javascript“/0{|_NSHTTPURLResponse£}~3_NSHTTPURLResponse]NSURLResponse    $ ) 2 7 I L b d è ï ∞ “ Ù ˜>Egjmè±¥∂∏∫ºæ¿¬ƒ≈«…ÀÕ‘‹ËÍÏÓ$/8>AJSUW^fqÄÇÑÜàäåéêíîñòöú´≠Ø±≥µ∑πªΩø¡√≈«…÷·Ô˝+6?X]otç°ß«Ã”Û˜ﬁÊ#9=Jch|Äî                           ¢_.https://ondras.zarovi.cz/sql/demo/js/window.js‘ÉÑÖÜOk/* --------------------- options ------------ */

SQL.Options = function(owner) {
	this.owner = owner;
	this.dom = {
		container:OZ.$("opts"),
		btn:OZ.$("options")
	}
	this.dom.btn.value = _("options");
	this.save = this.save.bind(this);
	this.build();
}

SQL.Options.prototype.build = function() {
	this.dom.optionlocale = OZ.$("optionlocale");
	this.dom.optiondb = OZ.$("optiondb");
	this.dom.optionsnap = OZ.$("optionsnap");
	this.dom.optionpattern = OZ.$("optionpattern");
	this.dom.optionstyle = OZ.$("optionstyle");
	this.dom.optionhide = OZ.$("optionhide");
	this.dom.optionvector = OZ.$("optionvector");
	this.dom.optionshowsize = OZ.$("optionshowsize");
	this.dom.optionshowtype = OZ.$("optionshowtype");

	var ids = ["language","db","snap","pattern","style","hide","vector","showsize","showtype","optionsnapnotice","optionpatternnotice","optionsnotice"];
	for (var i=0;i<ids.length;i++) {
		var id = ids[i];
		var elm = OZ.$(id);
		elm.innerHTML = _(id);
	}

	var ls = CONFIG.AVAILABLE_LOCALES;
	OZ.DOM.clear(this.dom.optionlocale);
	for (var i=0;i<ls.length;i++) {
		var o = OZ.DOM.elm("option");
		o.value = ls[i];
		o.innerHTML = ls[i];
		this.dom.optionlocale.appendChild(o);
		if (this.owner.getOption("locale") == ls[i]) { this.dom.optionlocale.selectedIndex = i; }
	}

	var dbs = CONFIG.AVAILABLE_DBS;
	OZ.DOM.clear(this.dom.optiondb);
	for (var i=0;i<dbs.length;i++) {
		var o = OZ.DOM.elm("option");
		o.value = dbs[i];
		o.innerHTML = dbs[i];
		this.dom.optiondb.appendChild(o);
		if (this.owner.getOption("db") == dbs[i]) { this.dom.optiondb.selectedIndex = i; }
	}

	var styles = CONFIG.STYLES;
	OZ.DOM.clear(this.dom.optionstyle);
	for (var i=0;i<styles.length;i++) {
		var o = OZ.DOM.elm("option");
		o.value = styles[i];
		o.innerHTML= styles[i];
		this.dom.optionstyle.appendChild(o);
		if (this.owner.getOption("style") == styles[i]) { this.dom.optionstyle.selectedIndex = i; }
	}


	OZ.Event.add(this.dom.btn, "click", this.click.bind(this));

	this.dom.container.parentNode.removeChild(this.dom.container);
}

SQL.Options.prototype.save = function() {
	this.owner.setOption("locale",this.dom.optionlocale.value);
	this.owner.setOption("db",this.dom.optiondb.value);
	this.owner.setOption("snap",this.dom.optionsnap.value);
	this.owner.setOption("pattern",this.dom.optionpattern.value);
	this.owner.setOption("style",this.dom.optionstyle.value);
	this.owner.setOption("hide",this.dom.optionhide.checked ? "1" : "");
	this.owner.setOption("vector",this.dom.optionvector.checked ? "1" : "");
	this.owner.setOption("showsize",this.dom.optionshowsize.checked ? "1" : "");
	this.owner.setOption("showtype",this.dom.optionshowtype.checked ? "1" : "");
}

SQL.Options.prototype.click = function() {
	this.owner.window.open(_("options"),this.dom.container,this.save);
	this.dom.optionsnap.value = this.owner.getOption("snap");
	this.dom.optionpattern.value = this.owner.getOption("pattern");
	this.dom.optionhide.checked = this.owner.getOption("hide");
	this.dom.optionvector.checked = this.owner.getOption("vector");
	this.dom.optionshowsize.checked = this.owner.getOption("showsize");
	this.dom.optionshowtype.checked = this.owner.getOption("showtype");
}
_application/javascriptO¡bplist00‘
X$versionY$archiverT$topX$objects Ü†_NSKeyedArchiver—	_WebResourceResponseÄØ('-.4567YZ[\]^_`abcdefghijklmnopqrstuyzU$null› !"#$%&___nsurlrequest_proto_prop_obj_6___nsurlrequest_proto_prop_obj_3R$2___nsurlrequest_proto_prop_obj_0R$3___nsurlrequest_proto_prop_obj_4V$class___nsurlrequest_proto_prop_obj_1R$4R$0___nsurlrequest_proto_prop_obj_5___nsurlrequest_proto_prop_obj_2R$1Ä&ÄÄ	ÄÄ'ÄÄ Ä”()$+,WNS.base[NS.relativeÄ ÄÄ_/https://ondras.zarovi.cz/sql/demo/js/options.js“/012Z$classnameX$classesUNSURL¢13XNSObject#AƒS7x¶¸÷ »”89:IXWNS.keysZNS.objectsÆ;<=>?@ABCDEFGHÄ	Ä
ÄÄÄÄÄÄÄÄÄÄÄÄÆJKLMNOPQRSTUVWÄÄÄÄÄÄÄÄÄÄ Ä!Ä"Ä#Ä$Ä%\Content-TypeZKeep-Alive]Accept-Ranges]Last-Modified_Content-EncodingVServerTDate^Content-LengthZConnectionX__hhaa___X-Content-Type-OptionsTEtag_X-Frame-OptionsTVary_application/javascript_timeout=5, max=93Ubytes_Thu, 05 Sep 2019 08:49:12 GMTTgzipVApache_Thu, 11 Aug 2022 17:02:56 GMTS807ZKeep-Alive_ÿ

YnBsaXN0MDDdAQIDBAUGBwgJCgsMDQ4QEhQWGBocHiAiJCZcQ29udGVudC1UeXBlXxAPWC1GcmFtZS1PcHRpb25zWktlZXAtQWxpdmVUVmFyeV8QEENvbnRlbnQtRW5jb2RpbmdWU2VydmVyVERhdGVeQ29udGVudC1MZW5ndGhaQ29ubmVjdGlvbl8QFlgtQ29udGVudC1UeXBlLU9wdGlvbnNURXRhZ11BY2NlcHQtUmFuZ2VzXUxhc3QtTW9kaWZpZWShD18QFmFwcGxpY2F0aW9uL2phdmFzY3JpcHShEVpzYW1lb3JpZ2luoRNfEBF0aW1lb3V0PTUsIG1heD05M6EVXxAPQWNjZXB0LUVuY29kaW5noRdUZ3ppcKEZVkFwYWNoZaEbXxAdVGh1LCAxMSBBdWcgMjAyMiAxNzowMjo1NiBHTVShHVM4MDehH1pLZWVwLUFsaXZloSFXbm9zbmlmZqEjXxAYImM2Yi01OTFjYTY1NTEzNWVjLWd6aXAioSVVYnl0ZXOhJ18QHVRodSwgMDUgU2VwIDIwMTkgMDg6NDk6MTIgR01UAAgAIwAwAEIATQBSAGUAbABxAIAAiwCkAKkAtwDFAMcA4ADiAO0A7wEDAQUBFwEZAR4BIAEnASkBSQFLAU8BUQFcAV4BZgFoAYMBhQGLAY0AAAAAAAACAQAAAAAAAAAoAAAAAAAAAAAAAAAAAAABrQ==Wnosniff_"c6b-591ca655135ec-gzip"Zsameorigin_Accept-Encoding“/0vw_NSMutableDictionary£vx3\NSDictionary_application/javascript“/0{|_NSHTTPURLResponse£}~3_NSHTTPURLResponse]NSURLResponse    $ ) 2 7 I L b d è ï ∞ “ Ù ˜>Egjmè±¥∂∏∫ºæ¿¬ƒ≈«…ÀÕ‘‹ËÍÏÓ %09?BKTVX_grÅÉÖáâãçèëìïóôõù¨Æ∞≤¥∂∏∫ºæ¿¬ƒ∆» ◊‚˛,7@Y^pué¢®»Õ‘Ù¯ﬂÁ$:>Kdi}Åï                           £_/https://ondras.zarovi.cz/sql/demo/js/options.js‘àâäãO&lSQL.Designer = function() {
	SQL.Designer = this;
	
	this.xhrheaders = {};
	this.tables = [];
	this.relations = [];
	this.title = document.title;
	
	SQL.Visual.apply(this);
	new SQL.Toggle(OZ.$("toggle"));
	
	this.dom.container = OZ.$("area");
	this.minSize = [
		this.dom.container.offsetWidth,
		this.dom.container.offsetHeight
	];
	this.width = this.minSize[0];
	this.height = this.minSize[1];
	
	this.typeIndex = false;
	this.fkTypeFor = false;

	this.vector = this.getOption("vector") && document.createElementNS;
	if (this.vector) {
		this.svgNS = "http://www.w3.org/2000/svg";
		this.dom.svg = document.createElementNS(this.svgNS, "svg");
		this.dom.container.appendChild(this.dom.svg);
	}

	this.flag = 2;
	this.requestLanguage();
	this.requestDB();
	this.applyStyle();
}
SQL.Designer.prototype = Object.create(SQL.Visual.prototype);

/* update area size */
SQL.Designer.prototype.sync = function() {
	var w = this.minSize[0];
	var h = this.minSize[0];
	for (var i=0;i<this.tables.length;i++) {
		var t = this.tables[i];
		w = Math.max(w, t.x + t.width);
		h = Math.max(h, t.y + t.height);
	}
	
	this.width = w;
	this.height = h;
	this.map.sync();

	if (this.vector) {	
		this.dom.svg.setAttribute("width", this.width);
		this.dom.svg.setAttribute("height", this.height);
	}
}

SQL.Designer.prototype.requestLanguage = function() { /* get locale file */
	var lang = this.getOption("locale")
	var bp = this.getOption("staticpath");
	var url = bp + "locale/"+lang+".xml";
	OZ.Request(url, this.languageResponse.bind(this), {method:"get", xml:true});
}

SQL.Designer.prototype.languageResponse = function(xmlDoc) {
	if (xmlDoc) {
		var strings = xmlDoc.getElementsByTagName("string");
		for (var i=0;i<strings.length;i++) {
			var n = strings[i].getAttribute("name");
			var v = strings[i].firstChild.nodeValue;
			window.LOCALE[n] = v;
		}
	}
	this.flag--;
	if (!this.flag) { this.init2(); }
}

SQL.Designer.prototype.requestDB = function() { /* get datatypes file */
	var db = this.getOption("db");
	var bp = this.getOption("staticpath");
	var url = bp + "db/"+db+"/datatypes.xml";
	OZ.Request(url, this.dbResponse.bind(this), {method:"get", xml:true});
}

SQL.Designer.prototype.dbResponse = function(xmlDoc) {
	if (xmlDoc) {
		window.DATATYPES = xmlDoc.documentElement;
	}
	this.flag--;
	if (!this.flag) { this.init2(); }
}

SQL.Designer.prototype.applyStyle = function() { /* apply style */
	var style = this.getOption("style");
	var i, link_elms = document.querySelectorAll("link");
	for (i=0; i<link_elms.length; i++) {
		if (link_elms[i].getAttribute("rel").indexOf("style") != -1 && link_elms[i].getAttribute("title")) {
			link_elms[i].disabled = true;
			if (link_elms[i].getAttribute("title") == style) link_elms[i].disabled = false;
		}
	}
}

SQL.Designer.prototype.init2 = function() { /* secondary init, after locale & datatypes were retrieved */
	this.map = new SQL.Map(this);
	this.rubberband = new SQL.Rubberband(this);
	this.tableManager = new SQL.TableManager(this);
	this.rowManager = new SQL.RowManager(this);
	this.keyManager = new SQL.KeyManager(this);
	this.io = new SQL.IO(this);
	this.options = new SQL.Options(this);
	this.window = new SQL.Window(this);

	this.sync();
	
	OZ.$("docs").value = _("docs");

	var url = window.location.href;
	var r = url.match(/keyword=([^&]+)/);
	if (r) {
		var keyword = r[1];
		this.io.serverload(false, keyword);
	}
	document.body.style.visibility = "visible";
}

SQL.Designer.prototype.getMaxZ = function() { /* find max zIndex */
	var max = 0;
	for (var i=0;i<this.tables.length;i++) {
		var z = this.tables[i].getZ();
		if (z > max) { max = z; }
	}
	
	OZ.$("controls").style.zIndex = max+5;
	return max;
}

SQL.Designer.prototype.addTable = function(name, x, y) {
	var max = this.getMaxZ();
	var t = new SQL.Table(this, name, x, y, max+1);
	this.tables.push(t);
	this.dom.container.appendChild(t.dom.container);
	return t;
}

SQL.Designer.prototype.removeTable = function(t) {
	this.tableManager.select(false);
	this.rowManager.select(false);
	var idx = this.tables.indexOf(t);
	if (idx == -1) { return; }
	t.destroy();
	this.tables.splice(idx,1);
}

SQL.Designer.prototype.addRelation = function(row1, row2) {
	var r = new SQL.Relation(this, row1, row2);
	this.relations.push(r);
	return r;
}

SQL.Designer.prototype.removeRelation = function(r) {
	var idx = this.relations.indexOf(r);
	if (idx == -1) { return; }
	r.destroy();
	this.relations.splice(idx,1);
}

SQL.Designer.prototype.getCookie = function() {
	var c = document.cookie;
	var obj = {};
	var parts = c.split(";");
	for (var i=0;i<parts.length;i++) {
		var part = parts[i];
		var r = part.match(/wwwsqldesigner=({.*?})/);
		if (r) { obj = eval("("+r[1]+")"); }
	}
	return obj;
}

SQL.Designer.prototype.setCookie = function(obj) {
	var arr = [];
	for (var p in obj) {
		arr.push(p+":'"+obj[p]+"'");
	}
	var str = "{"+arr.join(",")+"}";
	document.cookie = "wwwsqldesigner="+str+"; path=/";
}

SQL.Designer.prototype.getOption = function(name) {
	var c = this.getCookie();
	if (name in c) { return c[name]; }
	/* defaults */
	switch (name) {
		case "locale": return CONFIG.DEFAULT_LOCALE;
		case "db": return CONFIG.DEFAULT_DB;
		case "staticpath": return CONFIG.STATIC_PATH || "";
		case "xhrpath": return CONFIG.XHR_PATH || "";
		case "snap": return 0;
		case "showsize": return 0;
		case "showtype": return 0;
		case "pattern": return "%R_%T";
		case "hide": return false;
		case "vector": return true;
		case "style": return "material-inspired";
		default: return null;
	}
}

SQL.Designer.prototype.setOption = function(name, value) {
	var obj = this.getCookie();
	obj[name] = value;
	this.setCookie(obj);
}

SQL.Designer.prototype.getXhrHeaders = function (value) {
	return this.xhrheaders;
};

SQL.Designer.prototype.setXhrHeaders = function (value) {
	this.xhrheaders = value;
};

SQL.Designer.prototype.raise = function(table) { /* raise a table */
	var old = table.getZ();
	var max = this.getMaxZ();
	table.setZ(max);
	for (var i=0;i<this.tables.length;i++) {
		var t = this.tables[i];
		if (t == table) { continue; }
		if (t.getZ() > old) { t.setZ(t.getZ()-1); }
	}
	var m = table.dom.mini;
	m.parentNode.appendChild(m);
}

SQL.Designer.prototype.clearTables = function() {
	while (this.tables.length) { this.removeTable(this.tables[0]); }
	this.setTitle(false);
}

SQL.Designer.prototype.alignTables = function() {
	var win = OZ.DOM.win();
	var avail = win[0] - OZ.$("bar").offsetWidth;
	var x = 10;
	var y = 10;
	var max = 0;
	
	this.tables.sort(function(a,b){
		return b.getRelations().length - a.getRelations().length;
	});

	for (var i=0;i<this.tables.length;i++) {
		var t = this.tables[i];
		var w = t.dom.container.offsetWidth;
		var h = t.dom.container.offsetHeight;
		if (x + w > avail) {
			x = 10;
			y += 10 + max;
			max = 0;
		}
		t.moveTo(x,y);
		x += 10 + w;
		if (h > max) { max = h; }
	}

	this.sync();
}

SQL.Designer.prototype.findNamedTable = function(name) { /* find row specified as table(row) */
	for (var i=0;i<this.tables.length;i++) {
		if (this.tables[i].getTitle() == name) { return this.tables[i]; }
	}
}

SQL.Designer.prototype.toXML = function() {
	var xml = '<?xml version="1.0" encoding="utf-8" ?>\n';
	xml += '<!-- SQL XML created by WWW SQL Designer, https://github.com/ondras/wwwsqldesigner/ -->\n';
	xml += '<!-- Active URL: ' + location.href + ' -->\n';
	xml += '<sql>\n';
	
	/* serialize datatypes */
	if (window.XMLSerializer) {
		var s = new XMLSerializer();
		xml += s.serializeToString(window.DATATYPES);
	} else if (window.DATATYPES.xml) {
		xml += window.DATATYPES.xml;
	} else {
		alert(_("errorxml")+': '+e.message);
	}
	
	for (var i=0;i<this.tables.length;i++) {
		xml += this.tables[i].toXML();
	}
	xml += "</sql>\n";
	return xml;
}

SQL.Designer.prototype.fromXML = function(node) {
	this.clearTables();
	var types = node.getElementsByTagName("datatypes");
	if (types.length) { window.DATATYPES = types[0]; }
	var tables = node.getElementsByTagName("table");
	for (var i=0;i<tables.length;i++) {
		var t = this.addTable("", 0, 0);
		t.fromXML(tables[i]);
	}

	for (var i=0;i<this.tables.length;i++) { /* ff one-pixel shift hack */
		this.tables[i].select(); 
		this.tables[i].deselect(); 
	}

	/* relations */
	var rs = node.getElementsByTagName("relation");
	for (var i=0;i<rs.length;i++) {
		var rel = rs[i];
		var tname = rel.getAttribute("table");
		var rname = rel.getAttribute("row");
		
		var t1 = this.findNamedTable(tname);
		if (!t1) { continue; }
		var r1 = t1.findNamedRow(rname);
		if (!r1) { continue; }

		tname = rel.parentNode.parentNode.getAttribute("name");
		rname = rel.parentNode.getAttribute("name");
		var t2 = this.findNamedTable(tname);
		if (!t2) { continue; }
		var r2 = t2.findNamedRow(rname);
		if (!r2) { continue; }

		this.addRelation(r1, r2);
	}
	
	this.sync();
}

SQL.Designer.prototype.setTitle = function(t) {
	document.title = this.title + (t ? " - "+t : "");
}

SQL.Designer.prototype.removeSelection = function() {
	var sel = (window.getSelection ? window.getSelection() : document.selection);
	if (!sel) { return; }
	if (sel.empty) { sel.empty(); }
	if (sel.removeAllRanges) { sel.removeAllRanges(); }
}

SQL.Designer.prototype.getTypeIndex = function(label) {
	if (!this.typeIndex) {
		this.typeIndex = {};
		var types = window.DATATYPES.getElementsByTagName("type");
		for (var i=0;i<types.length;i++) {
			var l = types[i].getAttribute("label");
			if (l) { this.typeIndex[l] = i; }
		}
	}
	return this.typeIndex[label];
}

SQL.Designer.prototype.getFKTypeFor = function(typeIndex) {
	if (!this.fkTypeFor) {
		this.fkTypeFor = {};
		var types = window.DATATYPES.getElementsByTagName("type");
		for (var i=0;i<types.length;i++) {
			this.fkTypeFor[i] = i;
			var fk = types[i].getAttribute("fk");
			if (fk) { this.fkTypeFor[i] = this.getTypeIndex(fk); }
		}
	}
	return this.fkTypeFor[typeIndex];
}
_application/javascriptO bplist00‘
X$versionY$archiverT$topX$objects Ü†_NSKeyedArchiver—	_WebResourceResponseÄØ('-.4567YZ[\]^_`abcdefghijklmnopqrstuyzU$null› !"#$%&___nsurlrequest_proto_prop_obj_6___nsurlrequest_proto_prop_obj_3R$2___nsurlrequest_proto_prop_obj_0R$3___nsurlrequest_proto_prop_obj_4V$class___nsurlrequest_proto_prop_obj_1R$4R$0___nsurlrequest_proto_prop_obj_5___nsurlrequest_proto_prop_obj_2R$1Ä&ÄÄ	ÄÄ'ÄÄ Ä”()$+,WNS.base[NS.relativeÄ ÄÄ_6https://ondras.zarovi.cz/sql/demo/js/wwwsqldesigner.js“/012Z$classnameX$classesUNSURL¢13XNSObject#AƒS7xßÛ »”89:IXWNS.keysZNS.objectsÆ;<=>?@ABCDEFGHÄ	Ä
ÄÄÄÄÄÄÄÄÄÄÄÄÆJKLMNOPQRSTUVWÄÄÄÄÄÄÄÄÄÄ Ä!Ä"Ä#Ä$Ä%\Content-TypeZKeep-Alive]Accept-Ranges]Last-Modified_Content-EncodingVServerTDate^Content-LengthZConnectionX__hhaa___X-Content-Type-OptionsTEtag_X-Frame-OptionsTVary_application/javascript_timeout=5, max=98Ubytes_Wed, 27 Apr 2022 11:55:20 GMTTgzipVApache_Thu, 11 Aug 2022 17:02:56 GMTT3020ZKeep-Alive_ÿ

YnBsaXN0MDDdAQIDBAUGBwgJCgsMDQ4QEhQWGBocHiAiJCZcQ29udGVudC1UeXBlXxAPWC1GcmFtZS1PcHRpb25zWktlZXAtQWxpdmVUVmFyeV8QEENvbnRlbnQtRW5jb2RpbmdWU2VydmVyVERhdGVeQ29udGVudC1MZW5ndGhaQ29ubmVjdGlvbl8QFlgtQ29udGVudC1UeXBlLU9wdGlvbnNURXRhZ11BY2NlcHQtUmFuZ2VzXUxhc3QtTW9kaWZpZWShD18QFmFwcGxpY2F0aW9uL2phdmFzY3JpcHShEVpzYW1lb3JpZ2luoRNfEBF0aW1lb3V0PTUsIG1heD05OKEVXxAPQWNjZXB0LUVuY29kaW5noRdUZ3ppcKEZVkFwYWNoZaEbXxAdVGh1LCAxMSBBdWcgMjAyMiAxNzowMjo1NiBHTVShHVQzMDIwoR9aS2VlcC1BbGl2ZaEhV25vc25pZmahI18QGSIyNjZjLTVkZGExN2JkMWEyMzctZ3ppcCKhJVVieXRlc6EnXxAdV2VkLCAyNyBBcHIgMjAyMiAxMTo1NToyMCBHTVQACAAjADAAQgBNAFIAZQBsAHEAgACLAKQAqQC3AMUAxwDgAOIA7QDvAQMBBQEXARkBHgEgAScBKQFJAUsBUAFSAV0BXwFnAWkBhQGHAY0BjwAAAAAAAAIBAAAAAAAAACgAAAAAAAAAAAAAAAAAAAGvWnosniff_"266c-5dda17bd1a237-gzip"Zsameorigin_Accept-Encoding“/0vw_NSMutableDictionary£vx3\NSDictionary_application/javascript“/0{|_NSHTTPURLResponse£}~3_NSHTTPURLResponse]NSURLResponse    $ ) 2 7 I L b d è ï ∞ “ Ù ˜>Egjmè±¥∂∏∫ºæ¿¬ƒ≈«…ÀÕ‘‹ËÍÏÓ',7@FIR[]_fnyàäåéêíîñòöúû†¢§≥µ∑πªΩø¡√≈«…ÀÕœ—ﬁÈ˜$3>G`ew|ï©Øœ‘€˚ ÁÔ(-CGTmrÜäû                           ¨_6https://ondras.zarovi.cz/sql/demo/js/wwwsqldesigner.js‘çéèêO9GIF89a  „    333LLLfffÄÄÄôôô≤≤≤ˇˇˇˇˇˇˇˇˇˇˇˇˇˇˇˇˇˇˇˇˇˇˇˇ!ˇNETSCAPE2.0   !˘
  ,       H…â †òZõg’Üˆ}·HñﬁI≠lõëî tìa ∂çÎ∫ﬁ≠‹˘pe0»
&ìÚ|.•QÖ^≥⁄≠ﬁ"'⁄N !˘
  ,       H…˘B†òZõß’ˆ  ˆ}·HñﬁI≠lõë‘0t”q<∂çÎ∫ﬁ≠‹˘pÖ@»&ìÚ|.•èB·QÖ^≥⁄≠ﬁ"'⁄N !˘
  ,       H…˘Ñ†òZõÁ’ˆˆ}·HñﬁI≠lõëAt <∂çÎ∫ﬁ≠‹˘p•P»&ìÚ|.•É·QÖ^≥⁄≠ﬁ"'⁄N !˘
  ,       H…˘∆†òZõ'!’ˆˆ}·HñﬁI≠lõëTQtS<∂çÎ∫ﬁ≠‹˘p≈`»  &ìÚ|.•è√·QÖ^≥⁄≠ﬁ"'⁄N !˘
  ,       H…˘°òZõg)’ˆˆ}·HñﬁI≠lõëîatì <∂çÎ∫ﬁ≠‹˘pÂp»&ìÚ|.• ‡QÖ^≥⁄≠ﬁ"'⁄N !˘
  ,       H…˘J°òZõß1’ˆˆ}·HñﬁI≠lõë‘qt”0<∂çÎ∫ﬁ≠‹˘p »&ìÚ|.•è@‡QÖ^≥⁄≠ﬁ"'⁄N !˘
  ,       H…˘å°òZõÁ9’ˆˆ}·HñﬁI≠lõë tA<∂çÎ∫ﬁ≠‹˘p%»&ìÚ|.•Å‡QÖ^≥⁄≠ﬁ"'⁄N !˘
  ,       H…˘Œ°òZõ' ’ˆˆ}·HñﬁI≠lõëTtSQ<∂çÎ∫ﬁ≠‹˘pE »&ìÚ|.•è¡‡QÖ^≥⁄≠ﬁ"'⁄N ;Yimage/gifO‘bplist00‘
X$versionY$archiverT$topX$objects Ü†_NSKeyedArchiver—	_WebResourceResponseÄØ#'-.4567UVWXYZ[\]^_`abcdefghijklmqU$null› !"#$%&___nsurlrequest_proto_prop_obj_6___nsurlrequest_proto_prop_obj_3R$2___nsurlrequest_proto_prop_obj_0R$3___nsurlrequest_proto_prop_obj_4V$class___nsurlrequest_proto_prop_obj_1R$4R$0___nsurlrequest_proto_prop_obj_5___nsurlrequest_proto_prop_obj_2R$1ÄÄÄ	ÄÄ"ÄÄ Ä”()$+,WNS.base[NS.relativeÄ ÄÄ_5https://ondras.zarovi.cz/sql/demo/images/throbber.gif“/012Z$classnameX$classesUNSURL¢13XNSObject#AƒS7xßô »”89:GTWNS.keysZNS.objects¨;<=>?@ABCDEFÄ	Ä
ÄÄÄÄÄÄÄÄÄÄ¨IJKLMNOPQRSÄÄÄÄÄÄÄÄÄÄÄÄ Ä!\Content-Type_X-Frame-OptionsZKeep-AliveVServerTDate^Content-LengthZConnectionX__hhaa___X-Content-Type-OptionsTEtag]Accept-Ranges]Last-ModifiedYimage/gifZsameorigin_timeout=5, max=98VApache_Thu, 11 Aug 2022 17:02:56 GMTS825ZKeep-Alive_d

YnBsaXN0MDDbAQIDBAUGBwgJCgsMDhASFBYYGhweIF8QFlgtQ29udGVudC1UeXBlLU9wdGlvbnNcQ29udGVudC1UeXBlWkNvbm5lY3Rpb25dTGFzdC1Nb2RpZmllZFZTZXJ2ZXJdQWNjZXB0LVJhbmdlc18QD1gtRnJhbWUtT3B0aW9uc1REYXRlXkNvbnRlbnQtTGVuZ3RoWktlZXAtQWxpdmVURXRhZ6ENV25vc25pZmahD1lpbWFnZS9naWahEVpLZWVwLUFsaXZloRNfEB1UaHUsIDI2IE1heSAyMDE2IDIxOjA0OjA3IEdNVKEVVkFwYWNoZaEXVWJ5dGVzoRlac2FtZW9yaWdpbqEbXxAdVGh1LCAxMSBBdWcgMjAyMiAxNzowMjo1NiBHTVShHVM4MjWhH18QEXRpbWVvdXQ9NSwgbWF4PTk4oSFfEBMiMzM5LTUzM2M1MjE4N2JkOTkiAAgAHwA4AEUAUABeAGUAcwCFAIoAmQCkAKkAqwCzALUAvwDBAMwAzgDuAPAA9wD5AP8BAQEMAQ4BLgEwATQBNgFKAUwAAAAAAAACAQAAAAAAAAAiAAAAAAAAAAAAAAAAAAABYg==Wnosniff_"339-533c52187bd99"Ubytes_Thu, 26 May 2016 21:04:07 GMT“/0no_NSMutableDictionary£np3\NSDictionary“/0rs_NSHTTPURLResponse£tu3_NSHTTPURLResponse]NSURLResponse    $ ) 2 7 I L b d ä ê ´ Õ Ô Ú9@behä¨Ø±≥µ∑πªΩø¿¬ƒ∆»œ◊„ÂÁÈ!&1:@CLUWY`hsÄÇÑÜàäåéêíîñò•ß©´≠Ø±≥µ∑πªΩøÃﬁÈı16DR\g{Ç¢¶±!7=]bx|âé¢¶∫             v              »_5https://ondras.zarovi.cz/sql/demo/images/throbber.gif’,íìîïñó_WebResourceFrameNameO!w<!DOCTYPE html><!--
	WWW SQL Designer, (C) 2005-2015 Ondrej Zara, ondras@zarovi.cz
	Version: 2.7
	See license.txt for licencing information.
--><html><head>
	<title>WWW SQL Designer</title>
	<meta name="viewport" content="initial-scale=1,maximum-scale=1">
	<meta charset="utf-8">
	<link rel="stylesheet" title="material-inspired" href="styles/material-inspired.css" media="all">
	<link rel="alternate stylesheet" title="original" href="styles/original.css" media="all" disabled="">
	<!--[if IE 6]><link rel="stylesheet" type="text/css" href="styles/ie6.css" /><![endif]-->
	<!--[if IE 7]><link rel="stylesheet" type="text/css" href="styles/ie7.css" /><![endif]-->
	<link rel="stylesheet" href="styles/print.css" type="text/css" media="print">
	<script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/dropbox.js/0.10.2/dropbox.min.js"></script>

	<script src="js/oz.js"></script>
	<script src="js/config.js"></script>
	<script src="js/globals.js"></script>
	<script src="js/visual.js"></script>
	<script src="js/row.js"></script>
	<script src="js/table.js"></script>
	<script src="js/relation.js"></script>
	<script src="js/key.js"></script>
	<script src="js/rubberband.js"></script>
	<script src="js/map.js"></script>
	<script src="js/toggle.js"></script>
	<script src="js/io.js"></script>
	<script src="js/tablemanager.js"></script>
	<script src="js/rowmanager.js"></script>
	<script src="js/keymanager.js"></script>
	<script src="js/window.js"></script>
	<script src="js/options.js"></script>
	<script src="js/wwwsqldesigner.js"></script>
</head>

<body style="visibility: visible;">
	<div id="area" class=""><svg width="3000" height="3000"><path stroke="#F44336" stroke-width="2" fill="none" d="M 296 159 C 389 159 389 374 482 374"></path></svg><div class="table" style="z-index: 1; left: 155px; top: 118px;"><table><thead><tr><td class="title" colspan="2">restaurants</td></tr></thead><tbody title="" style="background-color: rgb(238, 238, 170); border-color: rgb(238, 238, 170);"><tr><td><div class="selected" style="display: none;">¬ª&nbsp;</div><div class="title primary key">id</div></td><td class="typehint"></td></tr></tbody><tbody title="" style="background-color: rgb(238, 238, 170); border-color: rgb(238, 238, 170);"><tr><td><div class="selected" style="display: none;">¬ª&nbsp;</div><div class="title">name</div></td><td class="typehint"></td></tr></tbody><tbody title="" style="background-color: rgb(238, 238, 170); border-color: rgb(238, 238, 170);"><tr><td><div class="selected" style="display: none;">¬ª&nbsp;</div><div class="title">city</div></td><td class="typehint"></td></tr></tbody><tbody title="" style="background-color: rgb(238, 238, 170); border-color: rgb(238, 238, 170);"><tr><td><div class="selected" style="display: none;">¬ª&nbsp;</div><div class="title">category</div></td><td class="typehint"></td></tr></tbody></table></div><div class="table" style="z-index: 2; left: 482px; top: 264px;"><table><thead><tr><td class="title" colspan="2">reviews</td></tr></thead><tbody title="" style="background-color: rgb(238, 238, 170); border-color: rgb(238, 238, 170);"><tr><td><div class="selected" style="display: none;">¬ª&nbsp;</div><div class="title primary key">id</div></td><td class="typehint"></td></tr></tbody><tbody title="" style="background-color: rgb(238, 238, 170); border-color: rgb(238, 238, 170);"><tr><td><div class="selected" style="display: none;">¬ª&nbsp;</div><div class="title">content</div></td><td class="typehint"></td></tr></tbody><tbody title="" style="background-color: rgb(238, 238, 170); border-color: rgb(238, 238, 170);"><tr><td><div class="selected" style="display: none;">¬ª&nbsp;</div><div class="title">rating</div></td><td class="typehint"></td></tr></tbody><tbody title="" style="background-color: rgb(238, 238, 170); border-color: rgb(238, 238, 170);"><tr><td><div class="selected" style="display: none;">¬ª&nbsp;</div><div class="title">restaurant_id</div></td><td class="typehint"></td></tr></tbody></table></div></div>

	<div id="controls" style="z-index: 6;">
		<div id="bar" style="overflow: hidden;">
			<div id="toggle" class="on"></div>
			<input type="button" id="saveload" value="Save / Load">

			<hr>

			<input type="button" id="addtable" value="Add table">
			<input type="button" id="edittable" value="Edit table" disabled="">
			<input type="button" id="tablekeys" value="Keys" disabled="">
			<input type="button" id="removetable" value="Remove table" disabled="">
			<input type="button" id="aligntables" value="Align tables">
			<input type="button" id="cleartables" value="Clear tables">
		
			<hr>
		
			<input type="button" id="addrow" value="Add field" disabled="">
			<input type="button" id="editrow" value="Edit field" disabled="">
			<input type="button" id="uprow" class="small" value="Up" disabled=""><input type="button" id="downrow" class="small" value="Down" disabled="">
			<input type="button" id="foreigncreate" value="Create foreign key" disabled="">
			<input type="button" id="foreignconnect" value="Connect foreign key" disabled="">
			<input type="button" id="foreigndisconnect" value="Remove foreign key" disabled="">
			<input type="button" id="removerow" value="Remove field" disabled="">
		
			<hr>
		
			<input type="button" id="options" value="Options">
			<a href="https://github.com/ondras/wwwsqldesigner/wiki" target="_blank"><input type="button" id="docs" value="Documentation"></a>
		</div>
	
		<div id="rubberband" style="left: 303px; top: 207px; width: 0px; height: 0px; visibility: hidden;"></div>

		<div id="minimap"><div class="port" style="z-index: 1; width: 43px; height: 24px; left: 0px; top: 0px;"></div><div class="mini" style="width: 5px; height: 4px; left: 5px; top: 4px;"></div><div class="mini" style="width: 4px; height: 4px; left: 16px; top: 9px;"></div></div>
	
		<div id="background" style="width: 1440px; height: 848px; left: 0px; top: 0px; visibility: hidden;"></div>
	
		<div id="window" style="left: 263px; top: 77px; visibility: hidden;">
			<div id="windowtitle"><img id="throbber" src="images/throbber.gif" alt="Please wait..." title="Please wait..." style="visibility: hidden;">Save / Load</div>
			<div id="windowcontent"><div id="io">
		<table>
			<tbody>
				<tr>
					<td style="width:60%">
						<fieldset>
							<legend id="client">Client</legend>
							<div id="singlerow">
							<input type="button" id="clientsave" value="Save XML"> 
							<input type="button" id="clientload" value="Load XML">
							</div>
							<div id="singlerow">
							<input type="button" id="clientlocalsave" value="Save in Browser">
							<input type="button" id="clientlocalload" value="Load from Browser">
							<input type="button" id="clientlocallist" value="List from Browser">
							</div>
							<div id="singlerow">
								<input type="button" id="dropboxsave" value="Save to Dropbox" style="display: none;"><!-- may get hidden by dropBoxInit() -->
								<input type="button" id="dropboxload" value="Load from Dropbox" style="display: none;"><!-- may get hidden by dropBoxInit() -->
								<input type="button" id="dropboxlist" value="List from Dropbox" style="display: none;"><!-- may get hidden by dropBoxInit() -->
							</div>
							<hr>
							<input type="button" id="clientsql" value="Generate SQL (mysql)">
						</fieldset>
					</td>
					<td style="width:40%">
						<fieldset>
							<legend id="server">Server</legend>
							<label for="backend" id="backendlabel">Server backend:</label> <select id="backend"><option value="php-mysql">php-mysql</option></select>
							<hr>
							<input type="button" id="serversave" value="Save"> 
							<input type="button" id="quicksave" value="Quicksave (F2)"> 
							<input type="button" id="serverload" value="Load"> 
							<input type="button" id="serverlist" value="List items"> 
							<input type="button" id="serverimport" value="Import from DB"> 
						</fieldset>
					</td>
				</tr>
				<tr>
					<td colspan="2">
						<fieldset>
							<legend id="output">Input / Output</legend>
							<textarea id="textarea" rows="1" cols="1"></textarea><!--modified by javascript later-->
						</fieldset>
					</td>
				</tr>
			</tbody>
		</table>
	</div></div>
			<input type="button" id="windowok" value="OK">
			<input type="button" id="windowcancel" value="Cancel" style="visibility: hidden;">
		</div>
	</div> <!-- #controls -->
	
	
	
	
	
	
	
	
	
	<script type="text/javascript">
		var d = new SQL.Designer();
		// d.setXhrHeaders({"Authorization": "Bearer xxx"});
		// d.setXhrHeaders({"X-CSRF-TOKEN": "xxx"});
	</script>


</body></html>Ytext/htmlUUTF-8_"https://ondras.zarovi.cz/sql/demo/P            1   P   Y   k   Å   ó   ¶  'T  ']  /Û  04  0=  0¬  0–  4d  51  5:  6ü  6©  >Å  >π  >¬  ?8  G  GG  GP  G…  O£  O›  OÊ  Pi  XE  XÅ  Xä  i£  r1  ri  rr  s†  |)  |^  |i  |á ff f fÖ pâ p” p‹ óá ó† †g †î †ù ®Á ©  ±≈ ±ˆ ±ˇ ∏£ ∏º ¡Ç ¡¥ ¡Ω ƒÙ ≈ Õ— Œ Œ ¸ ¸ò [ â í (j (É 1H 1x 1Å G® G¡ Pâ Pº P≈ WO Wh `) `W `` f≤ fÀ oì o» o— |O |h Ö* ÖX Öa à à4 ê¯ ë) ë2 ÃÑ Ãù ’_ ’å ’ï Ì£ Ìº ˆà ˆø ˆ» B [ % Z c *π *“ 3ú 3— 3⁄ >˝ ? G⁄ H H TÉ Tú ]a ]ì ]ú Ñ Ñ% åÛ ç, ç5 êr ê| òT òå òó òÆ ∫) ∫3 ∫9 ∫^             ò             ∫_